import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as Jl,f as tc}from"./data-utils-BgIH0eTl.js";import{c as ec}from"./regl-Cez-Bdem.js";const fs=!1;var Ns=Array.isArray,nc=Array.prototype.indexOf,Fs=Array.from,fo=Object.defineProperty,Jn=Object.getOwnPropertyDescriptor,ho=Object.getOwnPropertyDescriptors,rc=Object.prototype,ic=Array.prototype,Os=Object.getPrototypeOf,sa=Object.isExtensible;const cn=()=>{};function sc(t){return t()}function hi(t){for(var e=0;e<t.length;e++)t[e]()}function vo(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}function ac(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const n=[];for(const r of t)if(n.push(r),n.length===e)break;return n}const Xt=2,Ps=4,Pi=8,vn=16,gn=32,Ln=64,zi=128,De=512,Gt=1024,_e=2048,en=4096,be=8192,un=16384,zs=32768,ir=65536,aa=1<<17,go=1<<18,vr=1<<19,po=1<<20,On=32768,hs=1<<21,Ds=1<<22,yn=1<<23,Tn=Symbol("$state"),oc=Symbol("legacy props"),lc=Symbol(""),Xn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Di(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function cc(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function uc(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function fc(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function hc(t){throw new Error("https://svelte.dev/e/effect_orphan")}function dc(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function vc(t){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function gc(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function pc(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function _c(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function mc(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function yc(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const _o=1,mo=2,yo=4,xc=8,wc=16,bc=1,Mc=2,Ac=4,$c=8,Ec=16,kc=1,Sc=2,te=Symbol(),Cc="http://www.w3.org/1999/xhtml";function Ic(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function xo(t){return t===this.v}function Ls(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function wo(t){return!Ls(t,this.v)}let gr=!1,Tc=!1;function Rc(){gr=!0}let Ft=null;function sr(t){Ft=t}function ae(t,e=!1,n){Ft={p:Ft,i:!1,c:null,e:null,s:t,x:null,l:gr&&!e?{s:null,u:null,$:[]}:null}}function oe(t){var e=Ft,n=e.e;if(n!==null){e.e=null;for(var r of n)Po(r)}return e.i=!0,Ft=e.p,{}}function pr(){return!gr||Ft!==null&&Ft.l===null}let Sn=[];function bo(){var t=Sn;Sn=[],hi(t)}function _r(t){if(Sn.length===0&&!Rr){var e=Sn;queueMicrotask(()=>{e===Sn&&bo()})}Sn.push(t)}function Nc(){for(;Sn.length>0;)bo()}function Mo(t){var e=Ct;if(e===null)return At.f|=yn,t;if((e.f&zs)===0){if((e.f&zi)===0)throw t;e.b.error(t)}else ar(t,e)}function ar(t,e){for(;e!==null;){if((e.f&zi)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t}const Xr=new Set;let zt=null,si=null,we=null,ke=[],Li=null,ds=!1,Rr=!1;class Ze{committed=!1;current=new Map;previous=new Map;#t=new Set;#e=new Set;#r=0;#n=0;#l=null;#s=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){ke=[],si=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of e)this.#a(r,n);this.is_fork||this.#u(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(si=this,zt=null,oa(n.render_effects),oa(n.effects),si=null,this.#l?.resolve()),we=null}#a(e,n){e.f^=Gt;for(var r=e.first;r!==null;){var i=r.f,s=(i&(gn|Ln))!==0,a=s&&(i&Gt)!==0,o=a||(i&be)!==0||this.skipped_effects.has(r);if((r.f&zi)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!o&&r.fn!==null){s?r.f^=Gt:(i&Ps)!==0?n.effects.push(r):yr(r)&&((r.f&vn)!==0&&n.block_effects.push(r),cr(r));var l=r.first;if(l!==null){r=l;continue}}var c=r.parent;for(r=r.next;r===null&&c!==null;)c===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=c.next,c=c.parent}}#o(e){for(const n of e)((n.f&_e)!==0?this.#s:this.#i).push(n),this.#c(n.deps),Yt(n,Gt)}#c(e){if(e!==null)for(const n of e)(n.f&Xt)===0||(n.f&On)===0||(n.f^=On,this.#c(n.deps))}capture(e,n){this.previous.has(e)||this.previous.set(e,n),(e.f&yn)===0&&(this.current.set(e,e.v),we?.set(e,e.v))}activate(){zt=this,this.apply()}deactivate(){zt===this&&(zt=null,we=null)}flush(){if(this.activate(),ke.length>0){if(Ao(),zt!==null&&zt!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#e)e(this);this.#e.clear()}#u(){if(this.#n===0){for(const e of this.#t)e();this.#t.clear()}this.#r===0&&this.#f()}#f(){if(Xr.size>1){this.previous.clear();var e=we,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of Xr){if(s===this){n=!1;continue}const a=[];for(const[l,c]of this.current){if(s.current.has(l))if(n&&c!==s.current.get(l))s.current.set(l,c);else continue;a.push(l)}if(a.length===0)continue;const o=[...s.current.keys()].filter(l=>!this.current.has(l));if(o.length>0){var i=ke;ke=[];const l=new Set,c=new Map;for(const u of a)$o(u,o,l,c);if(ke.length>0){zt=s,s.apply();for(const u of ke)s.#a(u,r);s.deactivate()}ke=i}}zt=null,we=e}this.committed=!0,Xr.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#s)Yt(e,_e),Pn(e);for(const e of this.#i)Yt(e,en),Pn(e);this.#s=[],this.#i=[],this.flush()}oncommit(e){this.#t.add(e)}ondiscard(e){this.#e.add(e)}settled(){return(this.#l??=vo()).promise}static ensure(){if(zt===null){const e=zt=new Ze;Xr.add(zt),Rr||Ze.enqueue(()=>{zt===e&&e.flush()})}return zt}static enqueue(e){_r(e)}apply(){}}function Fc(t){var e=Rr;Rr=!0;try{for(var n;;){if(Nc(),ke.length===0&&(zt?.flush(),ke.length===0))return Li=null,n;Ao()}}finally{Rr=e}}function Ao(){var t=wn;ds=!0;var e=null;try{var n=0;for(gi(!0);ke.length>0;){var r=Ze.ensure();if(n++>1e3){var i,s;Oc()}r.process(ke),xn.clear()}}finally{ds=!1,gi(t),Li=null}}function Oc(){try{dc()}catch(t){ar(t,Li)}}let ln=null;function oa(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(un|be))===0&&yr(r)&&(ln=new Set,cr(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?Lo(r):r.fn=null),ln?.size>0)){xn.clear();for(const i of ln){if((i.f&(un|be))!==0)continue;const s=[i];let a=i.parent;for(;a!==null;)ln.has(a)&&(ln.delete(a),s.push(a)),a=a.parent;for(let o=s.length-1;o>=0;o--){const l=s[o];(l.f&(un|be))===0&&cr(l)}}ln.clear()}}ln=null}}function $o(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const i of t.reactions){const s=i.f;(s&Xt)!==0?$o(i,e,n,r):(s&(Ds|vn))!==0&&(s&_e)===0&&Eo(i,e,r)&&(Yt(i,_e),Pn(i))}}function Eo(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const i of t.deps){if(e.includes(i))return!0;if((i.f&Xt)!==0&&Eo(i,e,n))return n.set(i,!0),!0}return n.set(t,!1),!1}function Pn(t){for(var e=Li=t;e.parent!==null;){e=e.parent;var n=e.f;if(ds&&e===Ct&&(n&vn)!==0&&(n&go)===0)return;if((n&(Ln|gn))!==0){if((n&Gt)===0)return;e.f^=Gt}}ke.push(e)}function Pc(t){let e=0,n=zn(0),r;return()=>{Hi()&&(h(n),mr(()=>(e===0&&(r=H(()=>t(()=>Nr(n)))),e+=1,()=>{_r(()=>{e-=1,e===0&&(r?.(),r=void 0,Nr(n))})})))}}var zc=ir|vr|zi;function Dc(t,e,n){new Lc(t,e,n)}class Lc{parent;#t=!1;#e;#r=null;#n;#l;#s;#i=null;#a=null;#o=null;#c=null;#u=null;#f=0;#h=0;#v=!1;#d=null;#y=Pc(()=>(this.#d=zn(this.#f),()=>{this.#d=null}));constructor(e,n,r){this.#e=e,this.#n=n,this.#l=r,this.parent=Ct.b,this.#t=!!this.#n.pending,this.#s=Vi(()=>{Ct.b=this;{var i=this.#_();try{this.#i=Se(()=>r(i))}catch(s){this.error(s)}this.#h>0?this.#p():this.#t=!1}return()=>{this.#u?.remove()}},zc)}#x(){try{this.#i=Se(()=>this.#l(this.#e))}catch(e){this.error(e)}this.#t=!1}#w(){const e=this.#n.pending;e&&(this.#a=Se(()=>e(this.#e)),Ze.enqueue(()=>{var n=this.#_();this.#i=this.#g(()=>(Ze.ensure(),Se(()=>this.#l(n)))),this.#h>0?this.#p():(tr(this.#a,()=>{this.#a=null}),this.#t=!1)}))}#_(){var e=this.#e;return this.#t&&(this.#u=bn(),this.#e.before(this.#u),e=this.#u),e}is_pending(){return this.#t||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#g(e){var n=Ct,r=At,i=Ft;tn(this.#s),de(this.#s),sr(this.#s.ctx);try{return e()}catch(s){return Mo(s),null}finally{tn(n),de(r),sr(i)}}#p(){const e=this.#n.pending;this.#i!==null&&(this.#c=document.createDocumentFragment(),this.#c.append(this.#u),Vo(this.#i,this.#c)),this.#a===null&&(this.#a=Se(()=>e(this.#e)))}#m(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(e);return}this.#h+=e,this.#h===0&&(this.#t=!1,this.#a&&tr(this.#a,()=>{this.#a=null}),this.#c&&(this.#e.before(this.#c),this.#c=null))}update_pending_count(e){this.#m(e),this.#f+=e,this.#d&&or(this.#d,this.#f)}get_effect_pending(){return this.#y(),h(this.#d)}error(e){var n=this.#n.onerror;let r=this.#n.failed;if(this.#v||!n&&!r)throw e;this.#i&&(pe(this.#i),this.#i=null),this.#a&&(pe(this.#a),this.#a=null),this.#o&&(pe(this.#o),this.#o=null);var i=!1,s=!1;const a=()=>{if(i){Ic();return}i=!0,s&&yc(),Ze.ensure(),this.#f=0,this.#o!==null&&tr(this.#o,()=>{this.#o=null}),this.#t=this.has_pending_snippet(),this.#i=this.#g(()=>(this.#v=!1,Se(()=>this.#l(this.#e)))),this.#h>0?this.#p():this.#t=!1};var o=At;try{de(null),s=!0,n?.(e,a),s=!1}catch(l){ar(l,this.#s&&this.#s.parent)}finally{de(o)}r&&_r(()=>{this.#o=this.#g(()=>{Ze.ensure(),this.#v=!0;try{return Se(()=>{r(this.#e,()=>e,()=>a)})}catch(l){return ar(l,this.#s.parent),null}finally{this.#v=!1}})})}}function qc(t,e,n,r){const i=pr()?Vr:ee;if(n.length===0&&t.length===0){r(e.map(i));return}var s=zt,a=Ct,o=Hc();function l(){Promise.all(n.map(c=>Vc(c))).then(c=>{o();try{r([...e.map(i),...c])}catch(u){(a.f&un)===0&&ar(u,a)}s?.deactivate(),di()}).catch(c=>{ar(c,a)})}t.length>0?Promise.all(t).then(()=>{o();try{return l()}finally{s?.deactivate(),di()}}):l()}function Hc(){var t=Ct,e=At,n=Ft,r=zt;return function(s=!0){tn(t),de(e),sr(n),s&&r?.activate()}}function di(){tn(null),de(null),sr(null)}function Vr(t){var e=Xt|_e,n=At!==null&&(At.f&Xt)!==0?At:null;return Ct!==null&&(Ct.f|=vr),{ctx:Ft,deps:null,effects:null,equals:xo,f:e,fn:t,reactions:null,rv:0,v:te,wv:0,parent:n??Ct,ac:null}}function Vc(t,e){let n=Ct;n===null&&cc();var r=n.b,i=void 0,s=zn(te),a=!At,o=new Map;return Jc(()=>{var l=vo();i=l.promise;try{Promise.resolve(t()).then(l.resolve,l.reject).then(()=>{c===zt&&c.committed&&c.deactivate(),di()})}catch(f){l.reject(f),di()}var c=zt;if(a){var u=!r.is_pending();r.update_pending_count(1),c.increment(u),o.get(c)?.reject(Xn),o.delete(c),o.set(c,l)}const d=(f,v=void 0)=>{if(c.activate(),v)v!==Xn&&(s.f|=yn,or(s,v));else{(s.f&yn)!==0&&(s.f^=yn),or(s,f);for(const[g,_]of o){if(o.delete(g),g===c)break;_.reject(Xn)}}a&&(r.update_pending_count(-1),c.decrement(u))};l.promise.then(d,f=>d(null,f||"unknown"))}),Hs(()=>{for(const l of o.values())l.reject(Xn)}),new Promise(l=>{function c(u){function d(){u===i?l(s):c(i)}u.then(d,d)}c(i)})}function jc(t){const e=Vr(t);return jo(e),e}function ee(t){const e=Vr(t);return e.equals=wo,e}function ko(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)pe(e[n])}}function Bc(t){for(var e=t.parent;e!==null;){if((e.f&Xt)===0)return(e.f&un)===0?e:null;e=e.parent}return null}function qs(t){var e,n=Ct;tn(Bc(t));try{t.f&=~On,ko(t),e=Go(t)}finally{tn(n)}return e}function So(t){var e=qs(t);if(t.equals(e)||(t.v=e,t.wv=Wo()),!qn)if(we!==null)Hi()&&we.set(t,t.v);else{var n=(t.f&De)===0?en:Gt;Yt(t,n)}}let vs=new Set;const xn=new Map;let Co=!1;function zn(t,e){var n={f:0,v:t,reactions:null,equals:xo,rv:0,wv:0};return n}function _n(t,e){const n=zn(t);return jo(n),n}function ot(t,e=!1,n=!0){const r=zn(t);return e||(r.equals=wo),gr&&n&&Ft!==null&&Ft.l!==null&&(Ft.l.s??=[]).push(r),r}function An(t,e){return P(t,H(()=>h(t))),e}function P(t,e,n=!1){At!==null&&(!Qe||(At.f&aa)!==0)&&pr()&&(At.f&(Xt|vn|Ds|aa))!==0&&!fn?.includes(t)&&mc();let r=n?Kn(e):e;return or(t,r)}function or(t,e){if(!t.equals(e)){var n=t.v;qn?xn.set(t,e):xn.set(t,n),t.v=e;var r=Ze.ensure();r.capture(t,n),(t.f&Xt)!==0&&((t.f&_e)!==0&&qs(t),Yt(t,(t.f&De)!==0?Gt:en)),t.wv=Wo(),Io(t,_e),pr()&&Ct!==null&&(Ct.f&Gt)!==0&&(Ct.f&(gn|Ln))===0&&(Ee===null?nu([t]):Ee.push(t)),!r.is_fork&&vs.size>0&&!Co&&Wc()}return e}function Wc(){Co=!1;var t=wn;gi(!0);const e=Array.from(vs);try{for(const n of e)(n.f&Gt)!==0&&Yt(n,en),yr(n)&&cr(n)}finally{gi(t)}vs.clear()}function Nr(t){P(t,t.v+1)}function Io(t,e){var n=t.reactions;if(n!==null)for(var r=pr(),i=n.length,s=0;s<i;s++){var a=n[s],o=a.f;if(!(!r&&a===Ct)){var l=(o&_e)===0;if(l&&Yt(a,e),(o&Xt)!==0){var c=a;we?.delete(c),(o&On)===0&&(o&De&&(a.f|=On),Io(c,en))}else l&&((o&vn)!==0&&ln!==null&&ln.add(a),Pn(a))}}}function Kn(t){if(typeof t!="object"||t===null||Tn in t)return t;const e=Os(t);if(e!==rc&&e!==ic)return t;var n=new Map,r=Ns(t),i=_n(0),s=Rn,a=o=>{if(Rn===s)return o();var l=At,c=Rn;de(null),fa(s);var u=o();return de(l),fa(c),u};return r&&n.set("length",_n(t.length)),new Proxy(t,{defineProperty(o,l,c){(!("value"in c)||c.configurable===!1||c.enumerable===!1||c.writable===!1)&&pc();var u=n.get(l);return u===void 0?u=a(()=>{var d=_n(c.value);return n.set(l,d),d}):P(u,c.value,!0),!0},deleteProperty(o,l){var c=n.get(l);if(c===void 0){if(l in o){const u=a(()=>_n(te));n.set(l,u),Nr(i)}}else P(c,te),Nr(i);return!0},get(o,l,c){if(l===Tn)return t;var u=n.get(l),d=l in o;if(u===void 0&&(!d||Jn(o,l)?.writable)&&(u=a(()=>{var v=Kn(d?o[l]:te),g=_n(v);return g}),n.set(l,u)),u!==void 0){var f=h(u);return f===te?void 0:f}return Reflect.get(o,l,c)},getOwnPropertyDescriptor(o,l){var c=Reflect.getOwnPropertyDescriptor(o,l);if(c&&"value"in c){var u=n.get(l);u&&(c.value=h(u))}else if(c===void 0){var d=n.get(l),f=d?.v;if(d!==void 0&&f!==te)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return c},has(o,l){if(l===Tn)return!0;var c=n.get(l),u=c!==void 0&&c.v!==te||Reflect.has(o,l);if(c!==void 0||Ct!==null&&(!u||Jn(o,l)?.writable)){c===void 0&&(c=a(()=>{var f=u?Kn(o[l]):te,v=_n(f);return v}),n.set(l,c));var d=h(c);if(d===te)return!1}return u},set(o,l,c,u){var d=n.get(l),f=l in o;if(r&&l==="length")for(var v=c;v<d.v;v+=1){var g=n.get(v+"");g!==void 0?P(g,te):v in o&&(g=a(()=>_n(te)),n.set(v+"",g))}if(d===void 0)(!f||Jn(o,l)?.writable)&&(d=a(()=>_n(void 0)),P(d,Kn(c)),n.set(l,d));else{f=d.v!==te;var _=a(()=>Kn(c));P(d,_)}var p=Reflect.getOwnPropertyDescriptor(o,l);if(p?.set&&p.set.call(u,c),!f){if(r&&typeof l=="string"){var m=n.get("length"),A=Number(l);Number.isInteger(A)&&A>=m.v&&P(m,A+1)}Nr(i)}return!0},ownKeys(o){h(i);var l=Reflect.ownKeys(o).filter(d=>{var f=n.get(d);return f===void 0||f.v!==te});for(var[c,u]of n)u.v!==te&&!(c in o)&&l.push(c);return l},setPrototypeOf(){_c()}})}var la,To,Ro,No;function Uc(){if(la===void 0){la=window,To=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;Ro=Jn(e,"firstChild").get,No=Jn(e,"nextSibling").get,sa(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),sa(n)&&(n.__t=void 0)}}function bn(t=""){return document.createTextNode(t)}function lr(t){return Ro.call(t)}function jr(t){return No.call(t)}function O(t,e){return lr(t)}function he(t,e=!1){{var n=lr(t);return n instanceof Comment&&n.data===""?jr(n):n}}function K(t,e=1,n=!1){let r=t;for(;e--;)r=jr(r);return r}function Gc(t){t.textContent=""}function Fo(){return!1}let ca=!1;function Yc(){ca||(ca=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function qi(t){var e=At,n=Ct;de(null),tn(null);try{return t()}finally{de(e),tn(n)}}function Xc(t,e,n,r=n){t.addEventListener(e,()=>qi(n));const i=t.__on_r;i?t.__on_r=()=>{i(),r(!0)}:t.__on_r=()=>r(!0),Yc()}function Oo(t){Ct===null&&(At===null&&hc(),fc()),qn&&uc()}function Kc(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function nn(t,e,n){var r=Ct;r!==null&&(r.f&be)!==0&&(t|=be);var i={ctx:Ft,deps:null,nodes_start:null,nodes_end:null,f:t|_e|De,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{cr(i),i.f|=zs}catch(o){throw pe(i),o}else e!==null&&Pn(i);var s=i;if(n&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&vr)===0&&(s=s.first,(t&vn)!==0&&(t&ir)!==0&&s!==null&&(s.f|=ir)),s!==null&&(s.parent=r,r!==null&&Kc(s,r),At!==null&&(At.f&Xt)!==0&&(t&Ln)===0)){var a=At;(a.effects??=[]).push(s)}return i}function Hi(){return At!==null&&!Qe}function Hs(t){const e=nn(Pi,null,!1);return Yt(e,Gt),e.teardown=t,e}function gs(t){Oo();var e=Ct.f,n=!At&&(e&gn)!==0&&(e&zs)===0;if(n){var r=Ft;(r.e??=[]).push(t)}else return Po(t)}function Po(t){return nn(Ps|po,t,!1)}function Zc(t){return Oo(),nn(Pi|po,t,!0)}function Qc(t){Ze.ensure();const e=nn(Ln|vr,t,!0);return(n={})=>new Promise(r=>{n.outro?tr(e,()=>{pe(e),r(void 0)}):(pe(e),r(void 0))})}function vi(t){return nn(Ps,t,!1)}function mt(t,e){var n=Ft,r={effect:null,ran:!1,deps:t};n.l.$.push(r),r.effect=mr(()=>{t(),!r.ran&&(r.ran=!0,H(e))})}function Le(){var t=Ft;mr(()=>{for(var e of t.l.$){e.deps();var n=e.effect;(n.f&Gt)!==0&&Yt(n,en),yr(n)&&cr(n),e.ran=!1}})}function Jc(t){return nn(Ds|vr,t,!0)}function mr(t,e=0){return nn(Pi|e,t,!0)}function gt(t,e=[],n=[],r=[]){qc(r,e,n,i=>{nn(Pi,()=>t(...i.map(h)),!0)})}function Vi(t,e=0){var n=nn(vn|e,t,!0);return n}function Se(t){return nn(gn|vr,t,!0)}function zo(t){var e=t.teardown;if(e!==null){const n=qn,r=At;ua(!0),de(null);try{e.call(null)}finally{ua(n),de(r)}}}function Do(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const i=n.ac;i!==null&&qi(()=>{i.abort(Xn)});var r=n.next;(n.f&Ln)!==0?n.parent=null:pe(n,e),n=r}}function tu(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&gn)===0&&pe(e),e=n}}function pe(t,e=!0){var n=!1;(e||(t.f&go)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(eu(t.nodes_start,t.nodes_end),n=!0),Do(t,e&&!n),pi(t,0),Yt(t,un);var r=t.transitions;if(r!==null)for(const s of r)s.stop();zo(t);var i=t.parent;i!==null&&i.first!==null&&Lo(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function eu(t,e){for(;t!==null;){var n=t===e?null:jr(t);t.remove(),t=n}}function Lo(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function tr(t,e,n=!0){var r=[];Vs(t,r,!0),qo(r,()=>{n&&pe(t),e&&e()})}function qo(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var i of t)i.out(r)}else e()}function Vs(t,e,n){if((t.f&be)===0){if(t.f^=be,t.transitions!==null)for(const a of t.transitions)(a.is_global||n)&&e.push(a);for(var r=t.first;r!==null;){var i=r.next,s=(r.f&ir)!==0||(r.f&gn)!==0&&(t.f&vn)!==0;Vs(r,e,s?n:!1),r=i}}}function js(t){Ho(t,!0)}function Ho(t,e){if((t.f&be)!==0){t.f^=be,(t.f&Gt)===0&&(Yt(t,_e),Pn(t));for(var n=t.first;n!==null;){var r=n.next,i=(n.f&ir)!==0||(n.f&gn)!==0;Ho(n,i?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}function Vo(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var i=n===r?null:jr(n);e.append(n),n=i}}let wn=!1;function gi(t){wn=t}let qn=!1;function ua(t){qn=t}let At=null,Qe=!1;function de(t){At=t}let Ct=null;function tn(t){Ct=t}let fn=null;function jo(t){At!==null&&(fn===null?fn=[t]:fn.push(t))}let re=null,ye=0,Ee=null;function nu(t){Ee=t}let Bo=1,Or=0,Rn=Or;function fa(t){Rn=t}function Wo(){return++Bo}function yr(t){var e=t.f;if((e&_e)!==0)return!0;if(e&Xt&&(t.f&=~On),(e&en)!==0){var n=t.deps;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i];if(yr(s)&&So(s),s.wv>t.wv)return!0}(e&De)!==0&&we===null&&Yt(t,Gt)}return!1}function Uo(t,e,n=!0){var r=t.reactions;if(r!==null&&!fn?.includes(t))for(var i=0;i<r.length;i++){var s=r[i];(s.f&Xt)!==0?Uo(s,e,!1):e===s&&(n?Yt(s,_e):(s.f&Gt)!==0&&Yt(s,en),Pn(s))}}function Go(t){var e=re,n=ye,r=Ee,i=At,s=fn,a=Ft,o=Qe,l=Rn,c=t.f;re=null,ye=0,Ee=null,At=(c&(gn|Ln))===0?t:null,fn=null,sr(t.ctx),Qe=!1,Rn=++Or,t.ac!==null&&(qi(()=>{t.ac.abort(Xn)}),t.ac=null);try{t.f|=hs;var u=t.fn,d=u(),f=t.deps;if(re!==null){var v;if(pi(t,ye),f!==null&&ye>0)for(f.length=ye+re.length,v=0;v<re.length;v++)f[ye+v]=re[v];else t.deps=f=re;if(wn&&Hi()&&(t.f&De)!==0)for(v=ye;v<f.length;v++)(f[v].reactions??=[]).push(t)}else f!==null&&ye<f.length&&(pi(t,ye),f.length=ye);if(pr()&&Ee!==null&&!Qe&&f!==null&&(t.f&(Xt|en|_e))===0)for(v=0;v<Ee.length;v++)Uo(Ee[v],t);return i!==null&&i!==t&&(Or++,Ee!==null&&(r===null?r=Ee:r.push(...Ee))),(t.f&yn)!==0&&(t.f^=yn),d}catch(g){return Mo(g)}finally{t.f^=hs,re=e,ye=n,Ee=r,At=i,fn=s,sr(a),Qe=o,Rn=l}}function ru(t,e){let n=e.reactions;if(n!==null){var r=nc.call(n,t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(e.f&Xt)!==0&&(re===null||!re.includes(e))&&(Yt(e,en),(e.f&De)!==0&&(e.f^=De,e.f&=~On),ko(e),pi(e,0))}function pi(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)ru(t,n[r])}function cr(t){var e=t.f;if((e&un)===0){Yt(t,Gt);var n=Ct,r=wn;Ct=t,wn=!0;try{(e&vn)!==0?tu(t):Do(t),zo(t);var i=Go(t);t.teardown=typeof i=="function"?i:null,t.wv=Bo;var s;fs&&Tc&&(t.f&_e)!==0&&t.deps}finally{wn=r,Ct=n}}}async function Pr(){await Promise.resolve(),Fc()}function h(t){var e=t.f,n=(e&Xt)!==0;if(At!==null&&!Qe){var r=Ct!==null&&(Ct.f&un)!==0;if(!r&&!fn?.includes(t)){var i=At.deps;if((At.f&hs)!==0)t.rv<Or&&(t.rv=Or,re===null&&i!==null&&i[ye]===t?ye++:re===null?re=[t]:re.includes(t)||re.push(t));else{(At.deps??=[]).push(t);var s=t.reactions;s===null?t.reactions=[At]:s.includes(At)||s.push(At)}}}if(qn){if(xn.has(t))return xn.get(t);if(n){var a=t,o=a.v;return((a.f&Gt)===0&&a.reactions!==null||Xo(a))&&(o=qs(a)),xn.set(a,o),o}}else if(n){if(a=t,we?.has(a))return we.get(a);yr(a)&&So(a),wn&&Hi()&&(a.f&De)===0&&Yo(a)}else if(we?.has(t))return we.get(t);if((t.f&yn)!==0)throw t.v;return t.v}function Yo(t){if(t.deps!==null){t.f^=De;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&Xt)!==0&&(e.f&De)===0&&Yo(e)}}function Xo(t){if(t.v===te)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(xn.has(e)||(e.f&Xt)!==0&&Xo(e))return!0;return!1}function H(t){var e=Qe;try{return Qe=!0,t()}finally{Qe=e}}const iu=-7169;function Yt(t,e){t.f=t.f&iu|e}function R(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(Tn in t)ps(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&Tn in n&&ps(n)}}}function ps(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{ps(t[r],e)}catch{}const n=Os(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=ho(n);for(let i in r){const s=r[i].get;if(s)try{s.call(t)}catch{}}}}}const su=["touchstart","touchmove"];function au(t){return su.includes(t)}const ou=new Set,ha=new Set;function lu(t,e,n,r={}){function i(s){if(r.capture||kr.call(e,s),!s.cancelBubble)return qi(()=>n?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?_r(()=>{e.addEventListener(t,i,r)}):e.addEventListener(t,i,r),i}function $t(t,e,n,r,i){var s={capture:r,passive:i},a=lu(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&Hs(()=>{e.removeEventListener(t,a,s)})}let da=null;function kr(t){var e=this,n=e.ownerDocument,r=t.type,i=t.composedPath?.()||[],s=i[0]||t.target;da=t;var a=0,o=da===t&&t.__root;if(o){var l=i.indexOf(o);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var c=i.indexOf(e);if(c===-1)return;l<=c&&(a=l)}if(s=i[a]||t.target,s!==e){fo(t,"currentTarget",{configurable:!0,get(){return s||n}});var u=At,d=Ct;de(null),tn(null);try{for(var f,v=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var _=s["__"+r];_!=null&&(!s.disabled||t.target===s)&&_.call(s,t)}catch(p){f?v.push(p):f=p}if(t.cancelBubble||g===e||g===null)break;s=g}if(f){for(let p of v)queueMicrotask(()=>{throw p});throw f}}finally{t.__root=e,delete t.currentTarget,de(u),tn(d)}}}function Ko(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function _i(t,e){var n=Ct;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function Z(t,e){var n=(e&kc)!==0,r=(e&Sc)!==0,i,s=!t.startsWith("<!>");return()=>{i===void 0&&(i=Ko(s?t:"<!>"+t),n||(i=lr(i)));var a=r||To?document.importNode(i,!0):i.cloneNode(!0);if(n){var o=lr(a),l=a.lastChild;_i(o,l)}else _i(a,a);return a}}function cu(t,e,n="svg"){var r=!t.startsWith("<!>"),i=`<${n}>${r?t:"<!>"+t}</${n}>`,s;return()=>{if(!s){var a=Ko(i),o=lr(a);s=lr(o)}var l=s.cloneNode(!0);return _i(l,l),l}}function Zo(t,e){return cu(t,e,"svg")}function Ye(){var t=document.createDocumentFragment(),e=document.createComment(""),n=bn();return t.append(e,n),_i(e,n),t}function V(t,e){t!==null&&t.before(e)}function St(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function uu(t,e){return fu(t,e)}const Bn=new Map;function fu(t,{target:e,anchor:n,props:r={},events:i,context:s,intro:a=!0}){Uc();var o=new Set,l=d=>{for(var f=0;f<d.length;f++){var v=d[f];if(!o.has(v)){o.add(v);var g=au(v);e.addEventListener(v,kr,{passive:g});var _=Bn.get(v);_===void 0?(document.addEventListener(v,kr,{passive:g}),Bn.set(v,1)):Bn.set(v,_+1)}}};l(Fs(ou)),ha.add(l);var c=void 0,u=Qc(()=>{var d=n??e.appendChild(bn());return Dc(d,{pending:()=>{}},f=>{if(s){ae({});var v=Ft;v.c=s}i&&(r.$$events=i),c=t(f,r)||{},s&&oe()}),()=>{for(var f of o){e.removeEventListener(f,kr);var v=Bn.get(f);--v===0?(document.removeEventListener(f,kr),Bn.delete(f)):Bn.set(f,v)}ha.delete(l),d!==n&&d.parentNode?.removeChild(d)}});return hu.set(c,u),c}let hu=new WeakMap;class Qo{anchor;#t=new Map;#e=new Map;#r=new Map;#n=new Set;#l=!0;constructor(e,n=!0){this.anchor=e,this.#l=n}#s=()=>{var e=zt;if(this.#t.has(e)){var n=this.#t.get(e),r=this.#e.get(n);if(r)js(r),this.#n.delete(n);else{var i=this.#r.get(n);i&&(this.#e.set(n,i.effect),this.#r.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,a]of this.#t){if(this.#t.delete(s),s===e)break;const o=this.#r.get(a);o&&(pe(o.effect),this.#r.delete(a))}for(const[s,a]of this.#e){if(s===n||this.#n.has(s))continue;const o=()=>{if(Array.from(this.#t.values()).includes(s)){var c=document.createDocumentFragment();Vo(a,c),c.append(bn()),this.#r.set(s,{effect:a,fragment:c})}else pe(a);this.#n.delete(s),this.#e.delete(s)};this.#l||!r?(this.#n.add(s),tr(a,o,!1)):o()}}};#i=e=>{this.#t.delete(e);const n=Array.from(this.#t.values());for(const[r,i]of this.#r)n.includes(r)||(pe(i.effect),this.#r.delete(r))};ensure(e,n){var r=zt,i=Fo();if(n&&!this.#e.has(e)&&!this.#r.has(e))if(i){var s=document.createDocumentFragment(),a=bn();s.append(a),this.#r.set(e,{effect:Se(()=>n(a)),fragment:s})}else this.#e.set(e,Se(()=>n(this.anchor)));if(this.#t.set(r,e),i){for(const[o,l]of this.#e)o===e?r.skipped_effects.delete(l):r.skipped_effects.add(l);for(const[o,l]of this.#r)o===e?r.skipped_effects.delete(l.effect):r.skipped_effects.add(l.effect);r.oncommit(this.#s),r.ondiscard(this.#i)}else this.#s()}}function wt(t,e,n=!1){var r=new Qo(t),i=n?ir:0;function s(a,o){r.ensure(a,o)}Vi(()=>{var a=!1;e((o,l=!0)=>{a=!0,s(l,o)}),a||s(!1,null)},i)}function du(t,e,n){var r=new Qo(t),i=!pr();Vi(()=>{var s=e();i&&s!==null&&typeof s=="object"&&(s={}),r.ensure(s,n)})}function Fe(t,e){return e}function vu(t,e,n){for(var r=[],i=e.length,s=0;s<i;s++)Vs(e[s].e,r,!0);qo(r,()=>{var a=r.length===0&&n!==null;if(a){var o=n,l=o.parentNode;Gc(l),l.append(o),t.items.clear(),Xe(t,e[0].prev,e[i-1].next)}for(var c=0;c<i;c++){var u=e[c];a||(t.items.delete(u.k),Xe(t,u.prev,u.next)),pe(u.e,!a)}t.first===e[0]&&(t.first=e[0].prev)})}function Ce(t,e,n,r,i,s=null){var a=t,o=new Map,l=null,c=(e&yo)!==0,u=(e&_o)!==0,d=(e&mo)!==0;if(c){var f=t;a=f.appendChild(bn())}var v=null,g=ee(()=>{var M=n();return Ns(M)?M:M==null?[]:Fs(M)}),_,p=!0;function m(){gu(w,_,a,e,r),v!==null&&(_.length===0?(v.fragment?(a.before(v.fragment),v.fragment=null):js(v.effect),A.first=v.effect):tr(v.effect,()=>{v=null}))}var A=Vi(()=>{_=h(g);for(var M=_.length,x=new Set,C=zt,j=null,k=Fo(),$=0;$<M;$+=1){var S=_[$],b=r(S,$),I=p?null:o.get(b);I?(u&&or(I.v,S),d?or(I.i,$):I.i=$,k&&C.skipped_effects.delete(I.e)):(I=pu(p?a:null,j,S,b,$,i,e,n),p&&(I.o=!0,j===null?l=I:j.next=I,j=I),o.set(b,I)),x.add(b)}if(M===0&&s&&!v)if(p)v={fragment:null,effect:Se(()=>s(a))};else{var E=document.createDocumentFragment(),T=bn();E.append(T),v={fragment:E,effect:Se(()=>s(T))}}if(!p)if(k){for(const[ht,xt]of o)x.has(ht)||C.skipped_effects.add(xt.e);C.oncommit(m),C.ondiscard(()=>{})}else m();h(g)}),w={effect:A,items:o,first:l};p=!1}function gu(t,e,n,r,i){var s=(r&xc)!==0,a=e.length,o=t.items,l=t.first,c,u=null,d,f=[],v=[],g,_,p,m;if(s)for(m=0;m<a;m+=1)g=e[m],_=i(g,m),p=o.get(_),p.a?.measure(),(d??=new Set).add(p);for(m=0;m<a;m+=1){if(g=e[m],_=i(g,m),p=o.get(_),t.first??=p,!p.o){p.o=!0;var A=u?u.next:l;Xe(t,u,p),Xe(t,p,A),Qi(p,A,n),u=p,f=[],v=[],l=u.next;continue}if((p.e.f&be)!==0&&(js(p.e),s&&(p.a?.unfix(),(d??=new Set).delete(p))),p!==l){if(c!==void 0&&c.has(p)){if(f.length<v.length){var w=v[0],M;u=w.prev;var x=f[0],C=f[f.length-1];for(M=0;M<f.length;M+=1)Qi(f[M],w,n);for(M=0;M<v.length;M+=1)c.delete(v[M]);Xe(t,x.prev,C.next),Xe(t,u,x),Xe(t,C,w),l=w,u=C,m-=1,f=[],v=[]}else c.delete(p),Qi(p,l,n),Xe(t,p.prev,p.next),Xe(t,p,u===null?t.first:u.next),Xe(t,u,p),u=p;continue}for(f=[],v=[];l!==null&&l.k!==_;)(l.e.f&be)===0&&(c??=new Set).add(l),v.push(l),l=l.next;if(l===null)continue;p=l}f.push(p),u=p,l=p.next}if(l!==null||c!==void 0){for(var j=c===void 0?[]:Fs(c);l!==null;)(l.e.f&be)===0&&j.push(l),l=l.next;var k=j.length;if(k>0){var $=(r&yo)!==0&&a===0?n:null;if(s){for(m=0;m<k;m+=1)j[m].a?.measure();for(m=0;m<k;m+=1)j[m].a?.fix()}vu(t,j,$)}}s&&_r(()=>{if(d!==void 0)for(p of d)p.a?.apply()})}function pu(t,e,n,r,i,s,a,o){var l=(a&_o)!==0,c=(a&wc)===0,u=l?c?ot(n,!1,!1):zn(n):n,d=(a&mo)===0?i:zn(i),f={i:d,v:u,k:r,a:null,e:null,o:!1,prev:e,next:null};try{if(t===null){var v=document.createDocumentFragment();v.append(t=bn())}return f.e=Se(()=>s(t,u,d,o)),e!==null&&(e.next=f),f}finally{}}function Qi(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==null&&s!==r;){var a=jr(s);i.before(s),s=a}}function Xe(t,e,n){e===null?(t.first=n,t.effect.first=n&&n.e):(e.e.next&&(e.e.next.prev=null),e.next=n,e.e.next=n&&n.e),n===null?t.effect.last=e&&e.e:(n.e.prev&&(n.e.prev.next=null),n.prev=e,n.e.prev=e&&e.e)}function _u(t,e,n){vi(()=>{var r=H(()=>e(t,n?.())||{});if(n&&r?.update){var i=!1,s={};mr(()=>{var a=n();R(a),i&&Ls(s,a)&&(s=a,r.update(a))}),i=!0}if(r?.destroy)return()=>r.destroy()})}const va=[...` 	
\r\fÂ \v\uFEFF`];function mu(t,e,n){var r=t==null?"":""+t;if(n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,a=0;(a=r.indexOf(i,a))>=0;){var o=a+s;(a===0||va.includes(r[a-1]))&&(o===r.length||va.includes(r[o]))?r=(a===0?"":r.substring(0,a))+r.substring(o+1):a=o}}return r===""?null:r}function yu(t,e){return t==null?null:String(t)}function ve(t,e,n,r,i,s){var a=t.__className;if(a!==n||a===void 0){var o=mu(n,r,s);o==null?t.removeAttribute("class"):t.className=o,t.__className=n}else if(s&&i!==s)for(var l in s){var c=!!s[l];(i==null||c!==!!i[l])&&t.classList.toggle(l,c)}return s}function zr(t,e,n,r){var i=t.__style;if(i!==e){var s=yu(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const xu=Symbol("is custom element"),wu=Symbol("is html");function bu(t,e){var n=Bs(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function mi(t,e){var n=Bs(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function ne(t,e,n,r){var i=Bs(t);i[e]!==(i[e]=n)&&(e==="loading"&&(t[lc]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Mu(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function Bs(t){return t.__attributes??={[xu]:t.nodeName.includes("-"),[wu]:t.namespaceURI===Cc}}var ga=new Map;function Mu(t){var e=t.getAttribute("is")||t.nodeName,n=ga.get(e);if(n)return n;ga.set(e,n=[]);for(var r,i=t,s=Element.prototype;s!==i;){r=ho(i);for(var a in r)r[a].set&&n.push(a);i=Os(i)}return n}function Au(t,e,n=e){var r=new WeakSet;Xc(t,"input",async i=>{var s=i?t.defaultValue:t.value;if(s=Ji(t)?ts(s):s,n(s),zt!==null&&r.add(zt),await Pr(),s!==(s=e())){var a=t.selectionStart,o=t.selectionEnd,l=t.value.length;if(t.value=s??"",o!==null){var c=t.value.length;a===o&&o===l&&c>l?(t.selectionStart=c,t.selectionEnd=c):(t.selectionStart=a,t.selectionEnd=Math.min(o,c))}}}),H(e)==null&&t.value&&(n(Ji(t)?ts(t.value):t.value),zt!==null&&r.add(zt)),mr(()=>{var i=e();if(t===document.activeElement){var s=si??zt;if(r.has(s))return}Ji(t)&&i===ts(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function Ji(t){var e=t.type;return e==="number"||e==="range"}function ts(t){return t===""?null:+t}function pa(t,e){return t===e||t?.[Tn]===e}function xr(t={},e,n,r){return vi(()=>{var i,s;return mr(()=>{i=s,s=[],H(()=>{t!==n(...s)&&(e(t,...s),i&&pa(n(...i),t)&&e(null,...i))})}),()=>{_r(()=>{s&&pa(n(...s),t)&&e(null,...s)})}}),t}function me(t=!1){const e=Ft,n=e.l.u;if(!n)return;let r=()=>R(e.s);if(t){let i=0,s={};const a=Vr(()=>{let o=!1;const l=e.s;for(const c in l)l[c]!==s[c]&&(s[c]=l[c],o=!0);return o&&i++,i});r=()=>h(a)}n.b.length&&Zc(()=>{_a(e,r),hi(n.b)}),gs(()=>{const i=H(()=>n.m.map(sc));return()=>{for(const s of i)typeof s=="function"&&s()}}),n.a.length&&gs(()=>{_a(e,r),hi(n.a)})}function _a(t,e){if(t.l.s)for(const n of t.l.s)h(n);e()}function Ws(t,e,n){if(t==null)return e(void 0),n&&n(void 0),cn;const r=H(()=>t.subscribe(e,n));return r.unsubscribe?()=>r.unsubscribe():r}const Wn=[];function $u(t,e){return{subscribe:Ut(t,e).subscribe}}function Ut(t,e=cn){let n=null;const r=new Set;function i(o){if(Ls(t,o)&&(t=o,n)){const l=!Wn.length;for(const c of r)c[1](),Wn.push(c,t);if(l){for(let c=0;c<Wn.length;c+=2)Wn[c][0](Wn[c+1]);Wn.length=0}}}function s(o){i(o(t))}function a(o,l=cn){const c=[o,l];return r.add(c),r.size===1&&(n=e(i,s)||cn),o(t),()=>{r.delete(c),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:a}}function Kt(t,e,n){const r=!Array.isArray(t),i=r?[t]:t;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return $u(n,(a,o)=>{let l=!1;const c=[];let u=0,d=cn;const f=()=>{if(u)return;d();const g=e(r?c[0]:c,a,o);s?a(g):d=typeof g=="function"?g:cn},v=i.map((g,_)=>Ws(g,p=>{c[_]=p,u&=~(1<<_),l&&f()},()=>{u|=1<<_}));return l=!0,f(),function(){hi(v),d(),l=!1}})}function Eu(t){let e;return Ws(t,n=>e=n)(),e}let Kr=!1,_s=Symbol();function ft(t,e,n){const r=n[e]??={store:null,source:ot(void 0),unsubscribe:cn};if(r.store!==t&&!(_s in n))if(r.unsubscribe(),r.store=t??null,t==null)r.source.v=void 0,r.unsubscribe=cn;else{var i=!0;r.unsubscribe=Ws(t,s=>{i?r.source.v=s:P(r.source,s)}),i=!1}return t&&_s in n?Eu(t):h(r.source)}function ku(t,e,n){let r=n[e];return r&&r.store!==t&&(r.unsubscribe(),r.unsubscribe=cn),t}function qe(){const t={};function e(){Hs(()=>{for(var n in t)t[n].unsubscribe();fo(t,_s,{enumerable:!1,value:!0})})}return[t,e]}function Su(t){var e=Kr;try{return Kr=!1,[t(),Kr]}finally{Kr=e}}function _t(t,e,n,r){var i=!gr||(n&Mc)!==0,s=(n&$c)!==0,a=(n&Ec)!==0,o=r,l=!0,c=()=>(l&&(l=!1,o=a?H(r):r),o),u;if(s){var d=Tn in t||oc in t;u=Jn(t,e)?.set??(d&&e in t?w=>t[e]=w:void 0)}var f,v=!1;s?[f,v]=Su(()=>t[e]):f=t[e],f===void 0&&r!==void 0&&(f=c(),u&&(i&&gc(),u(f)));var g;if(i?g=()=>{var w=t[e];return w===void 0?c():(l=!0,w)}:g=()=>{var w=t[e];return w!==void 0&&(o=void 0),w===void 0?o:w},i&&(n&Ac)===0)return g;if(u){var _=t.$$legacy;return(function(w,M){return arguments.length>0?((!i||!M||_||v)&&u(M?g():w),w):g()})}var p=!1,m=((n&bc)!==0?Vr:ee)(()=>(p=!1,g()));s&&h(m);var A=Ct;return(function(w,M){if(arguments.length>0){const x=M?h(m):i&&s?Kn(w):w;return P(m,x),p=!0,o!==void 0&&(o=x),w}return qn&&p||(A.f&un)!==0?m.v:h(m)})}function Hn(t){Ft===null&&Di(),gr&&Ft.l!==null?tl(Ft).m.push(t):gs(()=>{const e=H(t);if(typeof e=="function")return e})}function Cu(t){Ft===null&&Di(),Hn(()=>()=>H(t))}function Iu(t,e,{bubbles:n=!1,cancelable:r=!1}={}){return new CustomEvent(t,{detail:e,bubbles:n,cancelable:r})}function Tu(){const t=Ft;return t===null&&Di(),(e,n,r)=>{const i=t.s.$$events?.[e];if(i){const s=Ns(i)?i.slice():[i],a=Iu(e,n,r);for(const o of s)o.call(t.x,a);return!a.defaultPrevented}return!0}}function Jo(t){Ft===null&&Di(),Ft.l===null&&vc(),tl(Ft).a.push(t)}function tl(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const Ru="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Ru);Rc();function ai(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Nu(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function el(t){let e,n,r;t.length!==2?(e=ai,n=(o,l)=>ai(t(o),l),r=(o,l)=>t(o)-l):(e=t===ai||t===Nu?t:Fu,n=t,r=t);function i(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(o[d],l)<0?c=d+1:u=d}while(c<u)}return c}function s(o,l,c=0,u=o.length){if(c<u){if(e(l,l)!==0)return u;do{const d=c+u>>>1;n(o[d],l)<=0?c=d+1:u=d}while(c<u)}return c}function a(o,l,c=0,u=o.length){const d=i(o,l,c,u-1);return d>c&&r(o[d-1],l)>-r(o[d],l)?d-1:d}return{left:i,center:a,right:s}}function Fu(){return 0}function Ou(t){return t===null?NaN:+t}const Pu=el(ai),zu=Pu.right;el(Ou).center;const Du=Math.sqrt(50),Lu=Math.sqrt(10),qu=Math.sqrt(2);function yi(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=Du?10:s>=Lu?5:s>=qu?2:1;let o,l,c;return i<0?(c=Math.pow(10,-i)/a,o=Math.round(t*c),l=Math.round(e*c),o/c<t&&++o,l/c>e&&--l,c=-c):(c=Math.pow(10,i)*a,o=Math.round(t/c),l=Math.round(e/c),o*c<t&&++o,l*c>e&&--l),l<o&&.5<=n&&n<2?yi(t,e,n*2):[o,l,c]}function Hu(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?yi(e,t,n):yi(t,e,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let c=0;c<o;++c)l[c]=(s-c)/-a;else for(let c=0;c<o;++c)l[c]=(s-c)*a;else if(a<0)for(let c=0;c<o;++c)l[c]=(i+c)/-a;else for(let c=0;c<o;++c)l[c]=(i+c)*a;return l}function ms(t,e,n){return e=+e,t=+t,n=+n,yi(t,e,n)[2]}function Vu(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?ms(e,t,n):ms(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function nl(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function ju(t,e){let n=0;if(e===void 0)for(let r of t)(r=+r)&&(n+=r);else{let r=-1;for(let i of t)(i=+e(i,++r,t))&&(n+=i)}return n}var Bu={value:()=>{}};function rl(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new oi(n)}function oi(t){this._=t}function Wu(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}oi.prototype=rl.prototype={constructor:oi,on:function(t,e){var n=this._,r=Wu(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=Uu(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=ma(n[i],t.name,e);else if(e==null)for(i in n)n[i]=ma(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new oi(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Uu(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function ma(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Bu,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ys="http://www.w3.org/1999/xhtml";const ya={svg:"http://www.w3.org/2000/svg",xhtml:ys,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ji(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),ya.hasOwnProperty(e)?{space:ya[e],local:t}:t}function Gu(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ys&&e.documentElement.namespaceURI===ys?e.createElement(t):e.createElementNS(n,t)}}function Yu(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function il(t){var e=ji(t);return(e.local?Yu:Gu)(e)}function Xu(){}function Us(t){return t==null?Xu:function(){return this.querySelector(t)}}function Ku(t){typeof t!="function"&&(t=Us(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=new Array(a),l,c,u=0;u<a;++u)(l=s[u])&&(c=t.call(l,l.__data__,u,s))&&("__data__"in l&&(c.__data__=l.__data__),o[u]=c);return new Me(r,this._parents)}function Zu(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function Qu(){return[]}function sl(t){return t==null?Qu:function(){return this.querySelectorAll(t)}}function Ju(t){return function(){return Zu(t.apply(this,arguments))}}function tf(t){typeof t=="function"?t=Ju(t):t=sl(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&(r.push(t.call(l,l.__data__,c,a)),i.push(l));return new Me(r,i)}function al(t){return function(){return this.matches(t)}}function ol(t){return function(e){return e.matches(t)}}var ef=Array.prototype.find;function nf(t){return function(){return ef.call(this.children,t)}}function rf(){return this.firstElementChild}function sf(t){return this.select(t==null?rf:nf(typeof t=="function"?t:ol(t)))}var af=Array.prototype.filter;function of(){return Array.from(this.children)}function lf(t){return function(){return af.call(this.children,t)}}function cf(t){return this.selectAll(t==null?of:lf(typeof t=="function"?t:ol(t)))}function uf(t){typeof t!="function"&&(t=al(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&o.push(l);return new Me(r,this._parents)}function ll(t){return new Array(t.length)}function ff(){return new Me(this._enter||this._groups.map(ll),this._parents)}function xi(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}xi.prototype={constructor:xi,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function hf(t){return function(){return t}}function df(t,e,n,r,i,s){for(var a=0,o,l=e.length,c=s.length;a<c;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new xi(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function vf(t,e,n,r,i,s,a){var o,l,c=new Map,u=e.length,d=s.length,f=new Array(u),v;for(o=0;o<u;++o)(l=e[o])&&(f[o]=v=a.call(l,l.__data__,o,e)+"",c.has(v)?i[o]=l:c.set(v,l));for(o=0;o<d;++o)v=a.call(t,s[o],o,s)+"",(l=c.get(v))?(r[o]=l,l.__data__=s[o],c.delete(v)):n[o]=new xi(t,s[o]);for(o=0;o<u;++o)(l=e[o])&&c.get(f[o])===l&&(i[o]=l)}function gf(t){return t.__data__}function pf(t,e){if(!arguments.length)return Array.from(this,gf);var n=e?vf:df,r=this._parents,i=this._groups;typeof t!="function"&&(t=hf(t));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),c=0;c<s;++c){var u=r[c],d=i[c],f=d.length,v=_f(t.call(u,u&&u.__data__,c,r)),g=v.length,_=o[c]=new Array(g),p=a[c]=new Array(g),m=l[c]=new Array(f);n(u,d,_,p,m,v,e);for(var A=0,w=0,M,x;A<g;++A)if(M=_[A]){for(A>=w&&(w=A+1);!(x=p[w])&&++w<g;);M._next=x||null}}return a=new Me(a,r),a._enter=o,a._exit=l,a}function _f(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function mf(){return new Me(this._exit||this._groups.map(ll),this._parents)}function yf(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function xf(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var c=n[l],u=r[l],d=c.length,f=o[l]=new Array(d),v,g=0;g<d;++g)(v=c[g]||u[g])&&(f[g]=v);for(;l<i;++l)o[l]=n[l];return new Me(o,this._parents)}function wf(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function bf(t){t||(t=Mf);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),c,u=0;u<o;++u)(c=a[u])&&(l[u]=c);l.sort(e)}return new Me(i,this._parents).order()}function Mf(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Af(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function $f(){return Array.from(this)}function Ef(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function kf(){let t=0;for(const e of this)++t;return t}function Sf(){return!this.node()}function Cf(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function If(t){return function(){this.removeAttribute(t)}}function Tf(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Rf(t,e){return function(){this.setAttribute(t,e)}}function Nf(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Ff(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Of(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Pf(t,e){var n=ji(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Tf:If:typeof e=="function"?n.local?Of:Ff:n.local?Nf:Rf)(n,e))}function cl(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function zf(t){return function(){this.style.removeProperty(t)}}function Df(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Lf(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function qf(t,e,n){return arguments.length>1?this.each((e==null?zf:typeof e=="function"?Lf:Df)(t,e,n??"")):ur(this.node(),t)}function ur(t,e){return t.style.getPropertyValue(e)||cl(t).getComputedStyle(t,null).getPropertyValue(e)}function Hf(t){return function(){delete this[t]}}function Vf(t,e){return function(){this[t]=e}}function jf(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Bf(t,e){return arguments.length>1?this.each((e==null?Hf:typeof e=="function"?jf:Vf)(t,e)):this.node()[t]}function ul(t){return t.trim().split(/^|\s+/)}function Gs(t){return t.classList||new fl(t)}function fl(t){this._node=t,this._names=ul(t.getAttribute("class")||"")}fl.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function hl(t,e){for(var n=Gs(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function dl(t,e){for(var n=Gs(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Wf(t){return function(){hl(this,t)}}function Uf(t){return function(){dl(this,t)}}function Gf(t,e){return function(){(e.apply(this,arguments)?hl:dl)(this,t)}}function Yf(t,e){var n=ul(t+"");if(arguments.length<2){for(var r=Gs(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Gf:e?Wf:Uf)(n,e))}function Xf(){this.textContent=""}function Kf(t){return function(){this.textContent=t}}function Zf(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Qf(t){return arguments.length?this.each(t==null?Xf:(typeof t=="function"?Zf:Kf)(t)):this.node().textContent}function Jf(){this.innerHTML=""}function th(t){return function(){this.innerHTML=t}}function eh(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function nh(t){return arguments.length?this.each(t==null?Jf:(typeof t=="function"?eh:th)(t)):this.node().innerHTML}function rh(){this.nextSibling&&this.parentNode.appendChild(this)}function ih(){return this.each(rh)}function sh(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ah(){return this.each(sh)}function oh(t){var e=typeof t=="function"?t:il(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function lh(){return null}function ch(t,e){var n=typeof t=="function"?t:il(t),r=e==null?lh:typeof e=="function"?e:Us(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function uh(){var t=this.parentNode;t&&t.removeChild(this)}function fh(){return this.each(uh)}function hh(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function dh(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function vh(t){return this.select(t?dh:hh)}function gh(t){return arguments.length?this.property("__data__",t):this.node().__data__}function ph(t){return function(e){t.call(this,e,this.__data__)}}function _h(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function mh(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function yh(t,e,n){return function(){var r=this.__on,i,s=ph(e);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function xh(t,e,n){var r=_h(t+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,c=o.length,u;l<c;++l)for(i=0,u=o[l];i<s;++i)if((a=r[i]).type===u.type&&a.name===u.name)return u.value}return}for(o=e?yh:mh,i=0;i<s;++i)this.each(o(r[i],e,n));return this}function vl(t,e,n){var r=cl(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function wh(t,e){return function(){return vl(this,t,e)}}function bh(t,e){return function(){return vl(this,t,e.apply(this,arguments))}}function Mh(t,e){return this.each((typeof e=="function"?bh:wh)(t,e))}function*Ah(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var gl=[null];function Me(t,e){this._groups=t,this._parents=e}function Br(){return new Me([[document.documentElement]],gl)}function $h(){return this}Me.prototype=Br.prototype={constructor:Me,select:Ku,selectAll:tf,selectChild:sf,selectChildren:cf,filter:uf,data:pf,enter:ff,exit:mf,join:yf,merge:xf,selection:$h,order:wf,sort:bf,call:Af,nodes:$f,node:Ef,size:kf,empty:Sf,each:Cf,attr:Pf,style:qf,property:Bf,classed:Yf,text:Qf,html:nh,raise:ih,lower:ah,append:oh,insert:ch,remove:fh,clone:vh,datum:gh,on:xh,dispatch:Mh,[Symbol.iterator]:Ah};function Ie(t){return typeof t=="string"?new Me([[document.querySelector(t)]],[document.documentElement]):new Me([[t]],gl)}function Ys(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function pl(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Wr(){}var Dr=.7,wi=1/Dr,er="\\s*([+-]?\\d+)\\s*",Lr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Je="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Eh=/^#([0-9a-f]{3,8})$/,kh=new RegExp(`^rgb\\(${er},${er},${er}\\)$`),Sh=new RegExp(`^rgb\\(${Je},${Je},${Je}\\)$`),Ch=new RegExp(`^rgba\\(${er},${er},${er},${Lr}\\)$`),Ih=new RegExp(`^rgba\\(${Je},${Je},${Je},${Lr}\\)$`),Th=new RegExp(`^hsl\\(${Lr},${Je},${Je}\\)$`),Rh=new RegExp(`^hsla\\(${Lr},${Je},${Je},${Lr}\\)$`),xa={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ys(Wr,ze,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:wa,formatHex:wa,formatHex8:Nh,formatHsl:Fh,formatRgb:ba,toString:ba});function wa(){return this.rgb().formatHex()}function Nh(){return this.rgb().formatHex8()}function Fh(){return _l(this).formatHsl()}function ba(){return this.rgb().formatRgb()}function ze(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Eh.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ma(e):n===3?new ge(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Zr(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Zr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=kh.exec(t))?new ge(e[1],e[2],e[3],1):(e=Sh.exec(t))?new ge(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Ch.exec(t))?Zr(e[1],e[2],e[3],e[4]):(e=Ih.exec(t))?Zr(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Th.exec(t))?Ea(e[1],e[2]/100,e[3]/100,1):(e=Rh.exec(t))?Ea(e[1],e[2]/100,e[3]/100,e[4]):xa.hasOwnProperty(t)?Ma(xa[t]):t==="transparent"?new ge(NaN,NaN,NaN,0):null}function Ma(t){return new ge(t>>16&255,t>>8&255,t&255,1)}function Zr(t,e,n,r){return r<=0&&(t=e=n=NaN),new ge(t,e,n,r)}function Oh(t){return t instanceof Wr||(t=ze(t)),t?(t=t.rgb(),new ge(t.r,t.g,t.b,t.opacity)):new ge}function bi(t,e,n,r){return arguments.length===1?Oh(t):new ge(t,e,n,r??1)}function ge(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ys(ge,bi,pl(Wr,{brighter(t){return t=t==null?wi:Math.pow(wi,t),new ge(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?Dr:Math.pow(Dr,t),new ge(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new ge(Nn(this.r),Nn(this.g),Nn(this.b),Mi(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Aa,formatHex:Aa,formatHex8:Ph,formatRgb:$a,toString:$a}));function Aa(){return`#${Cn(this.r)}${Cn(this.g)}${Cn(this.b)}`}function Ph(){return`#${Cn(this.r)}${Cn(this.g)}${Cn(this.b)}${Cn((isNaN(this.opacity)?1:this.opacity)*255)}`}function $a(){const t=Mi(this.opacity);return`${t===1?"rgb(":"rgba("}${Nn(this.r)}, ${Nn(this.g)}, ${Nn(this.b)}${t===1?")":`, ${t})`}`}function Mi(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Nn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Cn(t){return t=Nn(t),(t<16?"0":"")+t.toString(16)}function Ea(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new Pe(t,e,n,r)}function _l(t){if(t instanceof Pe)return new Pe(t.h,t.s,t.l,t.opacity);if(t instanceof Wr||(t=ze(t)),!t)return new Pe;if(t instanceof Pe)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new Pe(a,o,l,t.opacity)}function Fr(t,e,n,r){return arguments.length===1?_l(t):new Pe(t,e,n,r??1)}function Pe(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ys(Pe,Fr,pl(Wr,{brighter(t){return t=t==null?wi:Math.pow(wi,t),new Pe(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?Dr:Math.pow(Dr,t),new Pe(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new ge(es(t>=240?t-240:t+120,i,r),es(t,i,r),es(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new Pe(ka(this.h),Qr(this.s),Qr(this.l),Mi(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Mi(this.opacity);return`${t===1?"hsl(":"hsla("}${ka(this.h)}, ${Qr(this.s)*100}%, ${Qr(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ka(t){return t=(t||0)%360,t<0?t+360:t}function Qr(t){return Math.max(0,Math.min(1,t||0))}function es(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}function zh(t,e,n,r,i){var s=t*t,a=s*t;return((1-3*t+3*s-a)*e+(4-6*s+3*a)*n+(1+3*t+3*s-3*a)*r+a*i)/6}function Dh(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],s=t[r+1],a=r>0?t[r-1]:2*i-s,o=r<e-1?t[r+2]:2*s-i;return zh((n-r/e)*e,a,i,s,o)}}const Xs=t=>()=>t;function Lh(t,e){return function(n){return t+n*e}}function qh(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Hh(t){return(t=+t)==1?ml:function(e,n){return n-e?qh(e,n,t):Xs(isNaN(e)?n:e)}}function ml(t,e){var n=e-t;return n?Lh(t,n):Xs(isNaN(t)?e:t)}const Ai=(function t(e){var n=Hh(e);function r(i,s){var a=n((i=bi(i)).r,(s=bi(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),c=ml(i.opacity,s.opacity);return function(u){return i.r=a(u),i.g=o(u),i.b=l(u),i.opacity=c(u),i+""}}return r.gamma=t,r})(1);function Vh(t){return function(e){var n=e.length,r=new Array(n),i=new Array(n),s=new Array(n),a,o;for(a=0;a<n;++a)o=bi(e[a]),r[a]=o.r||0,i[a]=o.g||0,s[a]=o.b||0;return r=t(r),i=t(i),s=t(s),o.opacity=1,function(l){return o.r=r(l),o.g=i(l),o.b=s(l),o+""}}}var jh=Vh(Dh);function Bh(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Wh(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Uh(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=Bi(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function Gh(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function Oe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Yh(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=Bi(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var xs=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ns=new RegExp(xs.source,"g");function Xh(t){return function(){return t}}function Kh(t){return function(e){return t(e)+""}}function yl(t,e){var n=xs.lastIndex=ns.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=xs.exec(t))&&(i=ns.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:Oe(r,i)})),n=ns.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?Kh(l[0].x):Xh(e):(e=l.length,function(c){for(var u=0,d;u<e;++u)o[(d=l[u]).i]=d.x(c);return o.join("")})}function Bi(t,e){var n=typeof e,r;return e==null||n==="boolean"?Xs(e):(n==="number"?Oe:n==="string"?(r=ze(e))?(e=r,Ai):yl:e instanceof ze?Ai:e instanceof Date?Gh:Wh(e)?Bh:Array.isArray(e)?Uh:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Yh:Oe)(t,e)}function xl(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Sa=180/Math.PI,ws={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function wl(t,e,n,r,i,s){var a,o,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Sa,skewX:Math.atan(l)*Sa,scaleX:a,scaleY:o}}var Jr;function Zh(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ws:wl(e.a,e.b,e.c,e.d,e.e,e.f)}function Qh(t){return t==null||(Jr||(Jr=document.createElementNS("http://www.w3.org/2000/svg","g")),Jr.setAttribute("transform",t),!(t=Jr.transform.baseVal.consolidate()))?ws:(t=t.matrix,wl(t.a,t.b,t.c,t.d,t.e,t.f))}function bl(t,e,n,r){function i(c){return c.length?c.pop()+" ":""}function s(c,u,d,f,v,g){if(c!==d||u!==f){var _=v.push("translate(",null,e,null,n);g.push({i:_-4,x:Oe(c,d)},{i:_-2,x:Oe(u,f)})}else(d||f)&&v.push("translate("+d+e+f+n)}function a(c,u,d,f){c!==u?(c-u>180?u+=360:u-c>180&&(c+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Oe(c,u)})):u&&d.push(i(d)+"rotate("+u+r)}function o(c,u,d,f){c!==u?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Oe(c,u)}):u&&d.push(i(d)+"skewX("+u+r)}function l(c,u,d,f,v,g){if(c!==d||u!==f){var _=v.push(i(v)+"scale(",null,",",null,")");g.push({i:_-4,x:Oe(c,d)},{i:_-2,x:Oe(u,f)})}else(d!==1||f!==1)&&v.push(i(v)+"scale("+d+","+f+")")}return function(c,u){var d=[],f=[];return c=t(c),u=t(u),s(c.translateX,c.translateY,u.translateX,u.translateY,d,f),a(c.rotate,u.rotate,d,f),o(c.skewX,u.skewX,d,f),l(c.scaleX,c.scaleY,u.scaleX,u.scaleY,d,f),c=u=null,function(v){for(var g=-1,_=f.length,p;++g<_;)d[(p=f[g]).i]=p.x(v);return d.join("")}}}var Jh=bl(Zh,"px, ","px)","deg)"),td=bl(Qh,", ",")",")"),fr=0,Sr=0,$r=0,Ml=1e3,$i,Cr,Ei=0,Dn=0,Wi=0,qr=typeof performance=="object"&&performance.now?performance:Date,Al=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ks(){return Dn||(Al(ed),Dn=qr.now()+Wi)}function ed(){Dn=0}function ki(){this._call=this._time=this._next=null}ki.prototype=$l.prototype={constructor:ki,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ks():+n)+(e==null?0:+e),!this._next&&Cr!==this&&(Cr?Cr._next=this:$i=this,Cr=this),this._call=t,this._time=n,bs()},stop:function(){this._call&&(this._call=null,this._time=1/0,bs())}};function $l(t,e,n){var r=new ki;return r.restart(t,e,n),r}function nd(){Ks(),++fr;for(var t=$i,e;t;)(e=Dn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--fr}function Ca(){Dn=(Ei=qr.now())+Wi,fr=Sr=0;try{nd()}finally{fr=0,id(),Dn=0}}function rd(){var t=qr.now(),e=t-Ei;e>Ml&&(Wi-=e,Ei=t)}function id(){for(var t,e=$i,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:$i=n);Cr=t,bs(r)}function bs(t){if(!fr){Sr&&(Sr=clearTimeout(Sr));var e=t-Dn;e>24?(t<1/0&&(Sr=setTimeout(Ca,t-qr.now()-Wi)),$r&&($r=clearInterval($r))):($r||(Ei=qr.now(),$r=setInterval(rd,Ml)),fr=1,Al(Ca))}}function Ia(t,e,n){var r=new ki;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var sd=rl("start","end","cancel","interrupt"),ad=[],El=0,Ta=1,Ms=2,li=3,Ra=4,As=5,ci=6;function Ui(t,e,n,r,i,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;od(t,n,{name:e,index:r,group:i,on:sd,tween:ad,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:El})}function Zs(t,e){var n=He(t,e);if(n.state>El)throw new Error("too late; already scheduled");return n}function rn(t,e){var n=He(t,e);if(n.state>li)throw new Error("too late; already running");return n}function He(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function od(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=$l(s,0,n.time);function s(c){n.state=Ta,n.timer.restart(a,n.delay,n.time),n.delay<=c&&a(c-n.delay)}function a(c){var u,d,f,v;if(n.state!==Ta)return l();for(u in r)if(v=r[u],v.name===n.name){if(v.state===li)return Ia(a);v.state===Ra?(v.state=ci,v.timer.stop(),v.on.call("interrupt",t,t.__data__,v.index,v.group),delete r[u]):+u<e&&(v.state=ci,v.timer.stop(),v.on.call("cancel",t,t.__data__,v.index,v.group),delete r[u])}if(Ia(function(){n.state===li&&(n.state=Ra,n.timer.restart(o,n.delay,n.time),o(c))}),n.state=Ms,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Ms){for(n.state=li,i=new Array(f=n.tween.length),u=0,d=-1;u<f;++u)(v=n.tween[u].value.call(t,t.__data__,n.index,n.group))&&(i[++d]=v);i.length=d+1}}function o(c){for(var u=c<n.duration?n.ease.call(null,c/n.duration):(n.timer.restart(l),n.state=As,1),d=-1,f=i.length;++d<f;)i[d].call(t,u);n.state===As&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=ci,n.timer.stop(),delete r[e];for(var c in r)return;delete t.__transition}}function ld(t,e){var n=t.__transition,r,i,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){s=!1;continue}i=r.state>Ms&&r.state<As,r.state=ci,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}s&&delete t.__transition}}function cd(t){return this.each(function(){ld(this,t)})}function ud(t,e){var n,r;return function(){var i=rn(this,t),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function fd(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=rn(this,t),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:e,value:n},l=0,c=i.length;l<c;++l)if(i[l].name===e){i[l]=o;break}l===c&&i.push(o)}s.tween=i}}function hd(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=He(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?ud:fd)(n,t,e))}function Qs(t,e,n){var r=t._id;return t.each(function(){var i=rn(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return He(i,r).value[e]}}function kl(t,e){var n;return(typeof e=="number"?Oe:e instanceof ze?Ai:(n=ze(e))?(e=n,Ai):yl)(t,e)}function dd(t){return function(){this.removeAttribute(t)}}function vd(t){return function(){this.removeAttributeNS(t.space,t.local)}}function gd(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===r?s:s=e(r=a,n)}}function pd(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?s:s=e(r=a,n)}}function _d(t,e,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o)))}}function md(t,e,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o)))}}function yd(t,e){var n=ji(t),r=n==="transform"?td:kl;return this.attrTween(t,typeof e=="function"?(n.local?md:_d)(n,r,Qs(this,"attr."+t,e)):e==null?(n.local?vd:dd)(n):(n.local?pd:gd)(n,r,e))}function xd(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function wd(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function bd(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&wd(t,s)),n}return i._value=e,i}function Md(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&xd(t,s)),n}return i._value=e,i}function Ad(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=ji(t);return this.tween(n,(r.local?bd:Md)(r,e))}function $d(t,e){return function(){Zs(this,t).delay=+e.apply(this,arguments)}}function Ed(t,e){return e=+e,function(){Zs(this,t).delay=e}}function kd(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?$d:Ed)(e,t)):He(this.node(),e).delay}function Sd(t,e){return function(){rn(this,t).duration=+e.apply(this,arguments)}}function Cd(t,e){return e=+e,function(){rn(this,t).duration=e}}function Id(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Sd:Cd)(e,t)):He(this.node(),e).duration}function Td(t,e){if(typeof e!="function")throw new Error;return function(){rn(this,t).ease=e}}function Rd(t){var e=this._id;return arguments.length?this.each(Td(e,t)):He(this.node(),e).ease}function Nd(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;rn(this,t).ease=n}}function Fd(t){if(typeof t!="function")throw new Error;return this.each(Nd(this._id,t))}function Od(t){typeof t!="function"&&(t=al(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,c=0;c<a;++c)(l=s[c])&&t.call(l,l.__data__,c,s)&&o.push(l);return new dn(r,this._parents,this._name,this._id)}function Pd(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=e[o],c=n[o],u=l.length,d=a[o]=new Array(u),f,v=0;v<u;++v)(f=l[v]||c[v])&&(d[v]=f);for(;o<r;++o)a[o]=e[o];return new dn(a,this._parents,this._name,this._id)}function zd(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Dd(t,e,n){var r,i,s=zd(e)?Zs:rn;return function(){var a=s(this,t),o=a.on;o!==r&&(i=(r=o).copy()).on(e,n),a.on=i}}function Ld(t,e){var n=this._id;return arguments.length<2?He(this.node(),n).on.on(t):this.each(Dd(n,t,e))}function qd(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Hd(){return this.on("end.remove",qd(this._id))}function Vd(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Us(t));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],l=o.length,c=s[a]=new Array(l),u,d,f=0;f<l;++f)(u=o[f])&&(d=t.call(u,u.__data__,f,o))&&("__data__"in u&&(d.__data__=u.__data__),c[f]=d,Ui(c[f],e,n,f,c,He(u,n)));return new dn(s,this._parents,e,n)}function jd(t){var e=this._name,n=this._id;typeof t!="function"&&(t=sl(t));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var l=r[o],c=l.length,u,d=0;d<c;++d)if(u=l[d]){for(var f=t.call(u,u.__data__,d,l),v,g=He(u,n),_=0,p=f.length;_<p;++_)(v=f[_])&&Ui(v,e,n,_,f,g);s.push(f),a.push(u)}return new dn(s,a,e,n)}var Bd=Br.prototype.constructor;function Wd(){return new Bd(this._groups,this._parents)}function Ud(t,e){var n,r,i;return function(){var s=ur(this,t),a=(this.style.removeProperty(t),ur(this,t));return s===a?null:s===n&&a===r?i:i=e(n=s,r=a)}}function Sl(t){return function(){this.style.removeProperty(t)}}function Gd(t,e,n){var r,i=n+"",s;return function(){var a=ur(this,t);return a===i?null:a===r?s:s=e(r=a,n)}}function Yd(t,e,n){var r,i,s;return function(){var a=ur(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),ur(this,t))),a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o))}}function Xd(t,e){var n,r,i,s="style."+e,a="end."+s,o;return function(){var l=rn(this,t),c=l.on,u=l.value[s]==null?o||(o=Sl(e)):void 0;(c!==n||i!==u)&&(r=(n=c).copy()).on(a,i=u),l.on=r}}function Kd(t,e,n){var r=(t+="")=="transform"?Jh:kl;return e==null?this.styleTween(t,Ud(t,r)).on("end.style."+t,Sl(t)):typeof e=="function"?this.styleTween(t,Yd(t,r,Qs(this,"style."+t,e))).each(Xd(this._id,t)):this.styleTween(t,Gd(t,r,e),n).on("end.style."+t,null)}function Zd(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Qd(t,e,n){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Zd(t,a,n)),r}return s._value=e,s}function Jd(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Qd(t,e,n??""))}function tv(t){return function(){this.textContent=t}}function ev(t){return function(){var e=t(this);this.textContent=e??""}}function nv(t){return this.tween("text",typeof t=="function"?ev(Qs(this,"text",t)):tv(t==null?"":t+""))}function rv(t){return function(e){this.textContent=t.call(this,e)}}function iv(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&rv(i)),e}return r._value=t,r}function sv(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,iv(t))}function av(){for(var t=this._name,e=this._id,n=Cl(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)if(l=a[c]){var u=He(l,e);Ui(l,t,n,c,a,{time:u.time+u.delay+u.duration,delay:0,duration:u.duration,ease:u.ease})}return new dn(r,this._parents,t,n)}function ov(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--i===0&&s()}};n.each(function(){var c=rn(this,r),u=c.on;u!==t&&(e=(t=u).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),c.on=e}),i===0&&s()})}var lv=0;function dn(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Cl(){return++lv}var on=Br.prototype;dn.prototype={constructor:dn,select:Vd,selectAll:jd,selectChild:on.selectChild,selectChildren:on.selectChildren,filter:Od,merge:Pd,selection:Wd,transition:av,call:on.call,nodes:on.nodes,node:on.node,size:on.size,empty:on.empty,each:on.each,on:Ld,attr:yd,attrTween:Ad,style:Kd,styleTween:Jd,text:nv,textTween:sv,remove:Hd,tween:hd,delay:kd,duration:Id,ease:Rd,easeVarying:Fd,end:ov,[Symbol.iterator]:on[Symbol.iterator]};function cv(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var uv={time:null,delay:0,duration:250,ease:cv};function fv(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function hv(t){var e,n;t instanceof dn?(e=t._id,t=t._name):(e=Cl(),(n=uv).time=Ks(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,c=0;c<o;++c)(l=a[c])&&Ui(l,t,e,c,a,n||fv(l,e));return new dn(r,this._parents,t,e)}Br.prototype.interrupt=cd;Br.prototype.transition=hv;const $s=Math.PI,Es=2*$s,En=1e-6,dv=Es-En;function Il(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function vv(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Il;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class gv{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Il:vv(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-e,c=i-n,u=a-e,d=o-n,f=u*u+d*d;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>En)if(!(Math.abs(d*l-c*u)>En)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let v=r-a,g=i-o,_=l*l+c*c,p=v*v+g*g,m=Math.sqrt(_),A=Math.sqrt(f),w=s*Math.tan(($s-Math.acos((_+f-p)/(2*m*A)))/2),M=w/A,x=w/m;Math.abs(M-1)>En&&this._append`L${e+M*u},${n+M*d}`,this._append`A${s},${s},0,0,${+(d*v>u*g)},${this._x1=e+x*l},${this._y1=n+x*c}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),c=e+o,u=n+l,d=1^a,f=a?i-s:s-i;this._x1===null?this._append`M${c},${u}`:(Math.abs(this._x1-c)>En||Math.abs(this._y1-u)>En)&&this._append`L${c},${u}`,r&&(f<0&&(f=f%Es+Es),f>dv?this._append`A${r},${r},0,1,${d},${e-o},${n-l}A${r},${r},0,1,${d},${this._x1=c},${this._y1=u}`:f>En&&this._append`A${r},${r},0,${+(f>=$s)},${d},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function pv(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function ks(t,e){return fetch(t,e).then(pv)}function _v(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return Tl(this.cover(e,n),e,n,t)}function Tl(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s=t._root,a={data:r},o=t._x0,l=t._y0,c=t._x1,u=t._y1,d,f,v,g,_,p,m,A;if(!s)return t._root=a,t;for(;s.length;)if((_=e>=(d=(o+c)/2))?o=d:c=d,(p=n>=(f=(l+u)/2))?l=f:u=f,i=s,!(s=s[m=p<<1|_]))return i[m]=a,t;if(v=+t._x.call(null,s.data),g=+t._y.call(null,s.data),e===v&&n===g)return a.next=s,i?i[m]=a:t._root=a,t;do i=i?i[m]=new Array(4):t._root=new Array(4),(_=e>=(d=(o+c)/2))?o=d:c=d,(p=n>=(f=(l+u)/2))?l=f:u=f;while((m=p<<1|_)===(A=(g>=f)<<1|v>=d));return i[A]=s,i[m]=a,t}function mv(t){var e,n,r=t.length,i,s,a=new Array(r),o=new Array(r),l=1/0,c=1/0,u=-1/0,d=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(a[n]=i,o[n]=s,i<l&&(l=i),i>u&&(u=i),s<c&&(c=s),s>d&&(d=s));if(l>u||c>d)return this;for(this.cover(l,c).cover(u,d),n=0;n<r;++n)Tl(this,a[n],o[n],t[n]);return this}function yv(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else{for(var a=i-n||1,o=this._root,l,c;n>t||t>=i||r>e||e>=s;)switch(c=(e<r)<<1|t<n,l=new Array(4),l[c]=o,o=l,a*=2,c){case 0:i=n+a,s=r+a;break;case 1:n=i-a,s=r+a;break;case 2:i=n+a,r=s-a;break;case 3:n=i-a,r=s-a;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function xv(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function wv(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function se(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function bv(t,e,n){var r,i=this._x0,s=this._y0,a,o,l,c,u=this._x1,d=this._y1,f=[],v=this._root,g,_;for(v&&f.push(new se(v,i,s,u,d)),n==null?n=1/0:(i=t-n,s=e-n,u=t+n,d=e+n,n*=n);g=f.pop();)if(!(!(v=g.node)||(a=g.x0)>u||(o=g.y0)>d||(l=g.x1)<i||(c=g.y1)<s))if(v.length){var p=(a+l)/2,m=(o+c)/2;f.push(new se(v[3],p,m,l,c),new se(v[2],a,m,p,c),new se(v[1],p,o,l,m),new se(v[0],a,o,p,m)),(_=(e>=m)<<1|t>=p)&&(g=f[f.length-1],f[f.length-1]=f[f.length-1-_],f[f.length-1-_]=g)}else{var A=t-+this._x.call(null,v.data),w=e-+this._y.call(null,v.data),M=A*A+w*w;if(M<n){var x=Math.sqrt(n=M);i=t-x,s=e-x,u=t+x,d=e+x,r=v.data}}return r}function Mv(t){if(isNaN(u=+this._x.call(null,t))||isNaN(d=+this._y.call(null,t)))return this;var e,n=this._root,r,i,s,a=this._x0,o=this._y0,l=this._x1,c=this._y1,u,d,f,v,g,_,p,m;if(!n)return this;if(n.length)for(;;){if((g=u>=(f=(a+l)/2))?a=f:l=f,(_=d>=(v=(o+c)/2))?o=v:c=v,e=n,!(n=n[p=_<<1|g]))return this;if(!n.length)break;(e[p+1&3]||e[p+2&3]||e[p+3&3])&&(r=e,m=p)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):e?(s?e[p]=s:delete e[p],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[m]=n:this._root=n),this):(this._root=s,this)}function Av(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function $v(){return this._root}function Ev(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function kv(t){var e=[],n,r=this._root,i,s,a,o,l;for(r&&e.push(new se(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,s=n.x0,a=n.y0,o=n.x1,l=n.y1)&&r.length){var c=(s+o)/2,u=(a+l)/2;(i=r[3])&&e.push(new se(i,c,u,o,l)),(i=r[2])&&e.push(new se(i,s,u,c,l)),(i=r[1])&&e.push(new se(i,c,a,o,u)),(i=r[0])&&e.push(new se(i,s,a,c,u))}return this}function Sv(t){var e=[],n=[],r;for(this._root&&e.push(new se(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,a=r.x0,o=r.y0,l=r.x1,c=r.y1,u=(a+l)/2,d=(o+c)/2;(s=i[0])&&e.push(new se(s,a,o,u,d)),(s=i[1])&&e.push(new se(s,u,o,l,d)),(s=i[2])&&e.push(new se(s,a,d,u,c)),(s=i[3])&&e.push(new se(s,u,d,l,c))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Cv(t){return t[0]}function Iv(t){return arguments.length?(this._x=t,this):this._x}function Tv(t){return t[1]}function Rv(t){return arguments.length?(this._y=t,this):this._y}function ui(t,e,n){var r=new Js(e??Cv,n??Tv,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Js(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function Na(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var le=ui.prototype=Js.prototype;le.copy=function(){var t=new Js(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=Na(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=Na(r));return t};le.add=_v;le.addAll=mv;le.cover=yv;le.data=xv;le.extent=wv;le.find=bv;le.remove=Mv;le.removeAll=Av;le.root=$v;le.size=Ev;le.visit=kv;le.visitAfter=Sv;le.x=Iv;le.y=Rv;function Nv(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Si(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function hr(t){return t=Si(Math.abs(t)),t?t[1]:NaN}function Fv(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function Ov(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Pv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Ci(t){if(!(e=Pv.exec(t)))throw new Error("invalid format: "+t);var e;return new ta({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Ci.prototype=ta.prototype;function ta(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}ta.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function zv(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Rl;function Dv(t,e){var n=Si(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(Rl=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Si(t,Math.max(0,e+s-1))[0]}function Fa(t,e){var n=Si(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const Oa={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:Nv,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>Fa(t*100,e),r:Fa,s:Dv,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function Pa(t){return t}var za=Array.prototype.map,Da=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function Lv(t){var e=t.grouping===void 0||t.thousands===void 0?Pa:Fv(za.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?Pa:Ov(za.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"â":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function c(d){d=Ci(d);var f=d.fill,v=d.align,g=d.sign,_=d.symbol,p=d.zero,m=d.width,A=d.comma,w=d.precision,M=d.trim,x=d.type;x==="n"?(A=!0,x="g"):Oa[x]||(w===void 0&&(w=12),M=!0,x="g"),(p||f==="0"&&v==="=")&&(p=!0,f="0",v="=");var C=_==="$"?n:_==="#"&&/[boxX]/.test(x)?"0"+x.toLowerCase():"",j=_==="$"?r:/[%p]/.test(x)?a:"",k=Oa[x],$=/[defgprs%]/.test(x);w=w===void 0?6:/[gprs]/.test(x)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function S(b){var I=C,E=j,T,ht,xt;if(x==="c")E=k(b)+E,b="";else{b=+b;var It=b<0||1/b<0;if(b=isNaN(b)?l:k(Math.abs(b),w),M&&(b=zv(b)),It&&+b==0&&g!=="+"&&(It=!1),I=(It?g==="("?g:o:g==="-"||g==="("?"":g)+I,E=(x==="s"?Da[8+Rl/3]:"")+E+(It&&g==="("?")":""),$){for(T=-1,ht=b.length;++T<ht;)if(xt=b.charCodeAt(T),48>xt||xt>57){E=(xt===46?i+b.slice(T+1):b.slice(T))+E,b=b.slice(0,T);break}}}A&&!p&&(b=e(b,1/0));var lt=I.length+b.length+E.length,bt=lt<m?new Array(m-lt+1).join(f):"";switch(A&&p&&(b=e(bt+b,bt.length?m-E.length:1/0),bt=""),v){case"<":b=I+b+E+bt;break;case"=":b=I+bt+b+E;break;case"^":b=bt.slice(0,lt=bt.length>>1)+I+b+E+bt.slice(lt);break;default:b=bt+I+b+E;break}return s(b)}return S.toString=function(){return d+""},S}function u(d,f){var v=c((d=Ci(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(hr(f)/3)))*3,_=Math.pow(10,-g),p=Da[8+g/3];return function(m){return v(_*m)+p}}return{format:c,formatPrefix:u}}var ti,Nl,Fl;qv({thousands:",",grouping:[3],currency:["$",""]});function qv(t){return ti=Lv(t),Nl=ti.format,Fl=ti.formatPrefix,ti}function Hv(t){return Math.max(0,-hr(Math.abs(t)))}function Vv(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(hr(e)/3)))*3-hr(Math.abs(t)))}function jv(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,hr(e)-hr(t))+1}function Bv(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function Wv(){return this.eachAfter(Bv)}function Uv(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function Gv(t,e){for(var n=this,r=[n],i,s,a=-1;n=r.pop();)if(t.call(e,n,++a,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Yv(t,e){for(var n=this,r=[n],i=[],s,a,o,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(a=0,o=s.length;a<o;++a)r.push(s[a]);for(;n=i.pop();)t.call(e,n,++l,this);return this}function Xv(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function Kv(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function Zv(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Qv(t){for(var e=this,n=Jv(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function Jv(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function tg(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function eg(){return Array.from(this)}function ng(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function rg(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*ig(){var t=this,e,n=[t],r,i,s;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function wr(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=og)):e===void 0&&(e=ag);for(var n=new Ii(t),r,i=[n],s,a,o,l;r=i.pop();)if((a=e(r.data))&&(l=(a=Array.from(a)).length))for(r.children=a,o=l-1;o>=0;--o)i.push(s=a[o]=new Ii(a[o])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(cg)}function sg(){return wr(this).eachBefore(lg)}function ag(t){return t.children}function og(t){return Array.isArray(t)?t[1]:null}function lg(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function cg(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Ii(t){this.data=t,this.depth=this.height=0,this.parent=null}Ii.prototype=wr.prototype={constructor:Ii,count:Wv,each:Uv,eachAfter:Yv,eachBefore:Gv,find:Xv,sum:Kv,sort:Zv,path:Qv,ancestors:tg,descendants:eg,leaves:ng,links:rg,copy:sg,[Symbol.iterator]:ig};function ug(t){return t==null?null:Ol(t)}function Ol(t){if(typeof t!="function")throw new Error;return t}function kn(){return 0}function Yn(t){return function(){return t}}const fg=1664525,hg=1013904223,La=4294967296;function dg(){let t=1;return()=>(t=(fg*t+hg)%La)/La}function vg(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function gg(t,e){let n=t.length,r,i;for(;n;)i=e()*n--|0,r=t[n],t[n]=t[i],t[i]=r;return t}function pg(t,e){for(var n=0,r=(t=gg(Array.from(t),e)).length,i=[],s,a;n<r;)s=t[n],a&&Pl(a,s)?++n:(a=mg(i=_g(i,s)),n=0);return a}function _g(t,e){var n,r;if(rs(e,t))return[e];for(n=0;n<t.length;++n)if(ei(e,t[n])&&rs(Ir(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(ei(Ir(t[n],t[r]),e)&&ei(Ir(t[n],e),t[r])&&ei(Ir(t[r],e),t[n])&&rs(zl(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function ei(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Pl(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function rs(t,e){for(var n=0;n<e.length;++n)if(!Pl(t,e[n]))return!1;return!0}function mg(t){switch(t.length){case 1:return yg(t[0]);case 2:return Ir(t[0],t[1]);case 3:return zl(t[0],t[1],t[2])}}function yg(t){return{x:t.x,y:t.y,r:t.r}}function Ir(t,e){var n=t.x,r=t.y,i=t.r,s=e.x,a=e.y,o=e.r,l=s-n,c=a-r,u=o-i,d=Math.sqrt(l*l+c*c);return{x:(n+s+l/d*u)/2,y:(r+a+c/d*u)/2,r:(d+i+o)/2}}function zl(t,e,n){var r=t.x,i=t.y,s=t.r,a=e.x,o=e.y,l=e.r,c=n.x,u=n.y,d=n.r,f=r-a,v=r-c,g=i-o,_=i-u,p=l-s,m=d-s,A=r*r+i*i-s*s,w=A-a*a-o*o+l*l,M=A-c*c-u*u+d*d,x=v*g-f*_,C=(g*M-_*w)/(x*2)-r,j=(_*p-g*m)/x,k=(v*w-f*M)/(x*2)-i,$=(f*m-v*p)/x,S=j*j+$*$-1,b=2*(s+C*j+k*$),I=C*C+k*k-s*s,E=-(Math.abs(S)>1e-6?(b+Math.sqrt(b*b-4*S*I))/(2*S):I/b);return{x:r+C+j*E,y:i+k+$*E,r:E}}function qa(t,e,n){var r=t.x-e.x,i,s,a=t.y-e.y,o,l,c=r*r+a*a;c?(s=e.r+n.r,s*=s,l=t.r+n.r,l*=l,s>l?(i=(c+l-s)/(2*c),o=Math.sqrt(Math.max(0,l/c-i*i)),n.x=t.x-i*r-o*a,n.y=t.y-i*a+o*r):(i=(c+s-l)/(2*c),o=Math.sqrt(Math.max(0,s/c-i*i)),n.x=e.x+i*r-o*a,n.y=e.y+i*a+o*r)):(n.x=e.x+n.r,n.y=e.y)}function Ha(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Va(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,s=(e.y*n.r+n.y*e.r)/r;return i*i+s*s}function ni(t){this._=t,this.next=null,this.previous=null}function xg(t,e){if(!(s=(t=vg(t)).length))return 0;var n,r,i,s,a,o,l,c,u,d,f;if(n=t[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;qa(r,n,i=t[2]),n=new ni(n),r=new ni(r),i=new ni(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;t:for(l=3;l<s;++l){qa(n._,r._,i=t[l]),i=new ni(i),c=r.next,u=n.previous,d=r._.r,f=n._.r;do if(d<=f){if(Ha(c._,i._)){r=c,n.next=r,r.previous=n,--l;continue t}d+=c._.r,c=c.next}else{if(Ha(u._,i._)){n=u,n.next=r,r.previous=n,--l;continue t}f+=u._.r,u=u.previous}while(c!==u.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=Va(n);(i=i.next)!==r;)(o=Va(i))<a&&(n=i,a=o);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=pg(n,e),l=0;l<s;++l)n=t[l],n.x-=i.x,n.y-=i.y;return i.r}function wg(t){return Math.sqrt(t.value)}function bg(){var t=null,e=1,n=1,r=kn;function i(s){const a=dg();return s.x=e/2,s.y=n/2,t?s.eachBefore(ja(t)).eachAfter(is(r,.5,a)).eachBefore(Ba(1)):s.eachBefore(ja(wg)).eachAfter(is(kn,1,a)).eachAfter(is(r,s.r/Math.min(e,n),a)).eachBefore(Ba(Math.min(e,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(t=ug(s),i):t},i.size=function(s){return arguments.length?(e=+s[0],n=+s[1],i):[e,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:Yn(+s),i):r},i}function ja(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function is(t,e,n){return function(r){if(i=r.children){var i,s,a=i.length,o=t(r)*e||0,l;if(o)for(s=0;s<a;++s)i[s].r+=o;if(l=xg(i,n),o)for(s=0;s<a;++s)i[s].r-=o;r.r=l+o}}}function Ba(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Mg(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Ag(t,e,n,r,i){for(var s=t.children,a,o=-1,l=s.length,c=t.value&&(r-e)/t.value;++o<l;)a=s[o],a.y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*c}function $g(t,e,n,r,i){for(var s=t.children,a,o=-1,l=s.length,c=t.value&&(i-n)/t.value;++o<l;)a=s[o],a.x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*c}var Eg=(1+Math.sqrt(5))/2;function kg(t,e,n,r,i,s){for(var a=[],o=e.children,l,c,u=0,d=0,f=o.length,v,g,_=e.value,p,m,A,w,M,x,C;u<f;){v=i-n,g=s-r;do p=o[d++].value;while(!p&&d<f);for(m=A=p,x=Math.max(g/v,v/g)/(_*t),C=p*p*x,M=Math.max(A/C,C/m);d<f;++d){if(p+=c=o[d].value,c<m&&(m=c),c>A&&(A=c),C=p*p*x,w=Math.max(A/C,C/m),w>M){p-=c;break}M=w}a.push(l={value:p,dice:v<g,children:o.slice(u,d)}),l.dice?Ag(l,n,r,i,_?r+=g*p/_:s):$g(l,n,r,_?n+=v*p/_:i,s),_-=p,u=d}return a}const Sg=(function t(e){function n(r,i,s,a,o){kg(e,r,i,s,a,o)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(Eg);function ea(){var t=Sg,e=!1,n=1,r=1,i=[0],s=kn,a=kn,o=kn,l=kn,c=kn;function u(f){return f.x0=f.y0=0,f.x1=n,f.y1=r,f.eachBefore(d),i=[0],e&&f.eachBefore(Mg),f}function d(f){var v=i[f.depth],g=f.x0+v,_=f.y0+v,p=f.x1-v,m=f.y1-v;p<g&&(g=p=(g+p)/2),m<_&&(_=m=(_+m)/2),f.x0=g,f.y0=_,f.x1=p,f.y1=m,f.children&&(v=i[f.depth+1]=s(f)/2,g+=c(f)-v,_+=a(f)-v,p-=o(f)-v,m-=l(f)-v,p<g&&(g=p=(g+p)/2),m<_&&(_=m=(_+m)/2),t(f,g,_,p,m))}return u.round=function(f){return arguments.length?(e=!!f,u):e},u.size=function(f){return arguments.length?(n=+f[0],r=+f[1],u):[n,r]},u.tile=function(f){return arguments.length?(t=Ol(f),u):t},u.padding=function(f){return arguments.length?u.paddingInner(f).paddingOuter(f):u.paddingInner()},u.paddingInner=function(f){return arguments.length?(s=typeof f=="function"?f:Yn(+f),u):s},u.paddingOuter=function(f){return arguments.length?u.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):u.paddingTop()},u.paddingTop=function(f){return arguments.length?(a=typeof f=="function"?f:Yn(+f),u):a},u.paddingRight=function(f){return arguments.length?(o=typeof f=="function"?f:Yn(+f),u):o},u.paddingBottom=function(f){return arguments.length?(l=typeof f=="function"?f:Yn(+f),u):l},u.paddingLeft=function(f){return arguments.length?(c=typeof f=="function"?f:Yn(+f),u):c},u}function Dl(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Cg(t,e){switch(arguments.length){case 0:break;case 1:{typeof t=="function"?this.interpolator(t):this.range(t);break}default:{this.domain(t),typeof e=="function"?this.interpolator(e):this.range(e);break}}return this}function Ig(t){return function(){return t}}function Tg(t){return+t}var Wa=[0,1];function Te(t){return t}function Ss(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Ig(isNaN(e)?NaN:.5)}function Rg(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function Ng(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=Ss(i,r),s=n(a,s)):(r=Ss(r,i),s=n(s,a)),function(o){return s(r(o))}}function Fg(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Ss(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=zu(t,o,1,r)-1;return s[l](i[l](o))}}function Ll(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function ql(){var t=Wa,e=Wa,n=Bi,r,i,s,a=Te,o,l,c;function u(){var f=Math.min(t.length,e.length);return a!==Te&&(a=Rg(t[0],t[f-1])),o=f>2?Fg:Ng,l=c=null,d}function d(f){return f==null||isNaN(f=+f)?s:(l||(l=o(t.map(r),e,n)))(r(a(f)))}return d.invert=function(f){return a(i((c||(c=o(e,t.map(r),Oe)))(f)))},d.domain=function(f){return arguments.length?(t=Array.from(f,Tg),u()):t.slice()},d.range=function(f){return arguments.length?(e=Array.from(f),u()):e.slice()},d.rangeRound=function(f){return e=Array.from(f),n=xl,u()},d.clamp=function(f){return arguments.length?(a=f?!0:Te,u()):a!==Te},d.interpolate=function(f){return arguments.length?(n=f,u()):n},d.unknown=function(f){return arguments.length?(s=f,d):s},function(f,v){return r=f,i=v,u()}}function Og(){return ql()(Te,Te)}function Pg(t,e,n,r){var i=Vu(t,e,n),s;switch(r=Ci(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Vv(i,a))&&(r.precision=s),Fl(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=jv(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Hv(i))&&(r.precision=s-(r.type==="%")*2);break}}return Nl(r)}function na(t){var e=t.domain;return t.ticks=function(n){var r=e();return Hu(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Pg(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l,c,u=10;for(o<a&&(c=a,a=o,o=c,c=i,i=s,s=c);u-- >0;){if(c=ms(a,o,n),c===l)return r[i]=a,r[s]=o,e(r);if(c>0)a=Math.floor(a/c)*c,o=Math.ceil(o/c)*c;else if(c<0)a=Math.ceil(a*c)/c,o=Math.floor(o*c)/c;else break;l=c}return t},t}function Hl(){var t=Og();return t.copy=function(){return Ll(t,Hl())},Dl.apply(t,arguments),na(t)}function Ua(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function zg(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function Dg(t){return t<0?-t*t:t*t}function Lg(t){var e=t(Te,Te),n=1;function r(){return n===1?t(Te,Te):n===.5?t(zg,Dg):t(Ua(n),Ua(1/n))}return e.exponent=function(i){return arguments.length?(n=+i,r()):n},na(e)}function Vl(){var t=Lg(ql());return t.copy=function(){return Ll(t,Vl()).exponent(t.exponent())},Dl.apply(t,arguments),t}function qg(){return Vl.apply(null,arguments).exponent(.5)}function Hg(){var t=0,e=1,n,r,i,s,a=Te,o=!1,l;function c(d){return d==null||isNaN(d=+d)?l:a(i===0?.5:(d=(s(d)-n)*i,o?Math.max(0,Math.min(1,d)):d))}c.domain=function(d){return arguments.length?([t,e]=d,n=s(t=+t),r=s(e=+e),i=n===r?0:1/(r-n),c):[t,e]},c.clamp=function(d){return arguments.length?(o=!!d,c):o},c.interpolator=function(d){return arguments.length?(a=d,c):a};function u(d){return function(f){var v,g;return arguments.length?([v,g]=f,a=d(v,g),c):[a(0),a(1)]}}return c.range=u(Bi),c.rangeRound=u(xl),c.unknown=function(d){return arguments.length?(l=d,c):l},function(d){return s=d,n=d(t),r=d(e),i=n===r?0:1/(r-n),c}}function Vg(t,e){return e.domain(t.domain()).interpolator(t.interpolator()).clamp(t.clamp()).unknown(t.unknown())}function Cs(){var t=na(Hg()(Te));return t.copy=function(){return Vg(t,Cs())},Cg.apply(t,arguments)}function jl(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(r*6,++r*6);return n}const Bl=t=>jh(t[t.length-1]);var jg=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(jl);const Bg=Bl(jg);var Wg=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(jl);const Ug=Bl(Wg);function ie(t){return function(){return t}}const Ga=Math.abs,Jt=Math.atan2,$n=Math.cos,Gg=Math.max,ss=Math.min,Be=Math.sin,Zn=Math.sqrt,fe=1e-12,Hr=Math.PI,Ti=Hr/2,fi=2*Hr;function Yg(t){return t>1?0:t<-1?Hr:Math.acos(t)}function Ya(t){return t>=1?Ti:t<=-1?-Ti:Math.asin(t)}function Xg(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new gv(e)}function Kg(t){return t.innerRadius}function Zg(t){return t.outerRadius}function Qg(t){return t.startAngle}function Jg(t){return t.endAngle}function tp(t){return t&&t.padAngle}function ep(t,e,n,r,i,s,a,o){var l=n-t,c=r-e,u=a-i,d=o-s,f=d*l-u*c;if(!(f*f<fe))return f=(u*(e-s)-d*(t-i))/f,[t+f*l,e+f*c]}function ri(t,e,n,r,i,s,a){var o=t-n,l=e-r,c=(a?s:-s)/Zn(o*o+l*l),u=c*l,d=-c*o,f=t+u,v=e+d,g=n+u,_=r+d,p=(f+g)/2,m=(v+_)/2,A=g-f,w=_-v,M=A*A+w*w,x=i-s,C=f*_-g*v,j=(w<0?-1:1)*Zn(Gg(0,x*x*M-C*C)),k=(C*w-A*j)/M,$=(-C*A-w*j)/M,S=(C*w+A*j)/M,b=(-C*A+w*j)/M,I=k-p,E=$-m,T=S-p,ht=b-m;return I*I+E*E>T*T+ht*ht&&(k=S,$=b),{cx:k,cy:$,x01:-u,y01:-d,x11:k*(i/x-1),y11:$*(i/x-1)}}function np(){var t=Kg,e=Zg,n=ie(0),r=null,i=Qg,s=Jg,a=tp,o=null,l=Xg(c);function c(){var u,d,f=+t.apply(this,arguments),v=+e.apply(this,arguments),g=i.apply(this,arguments)-Ti,_=s.apply(this,arguments)-Ti,p=Ga(_-g),m=_>g;if(o||(o=u=l()),v<f&&(d=v,v=f,f=d),!(v>fe))o.moveTo(0,0);else if(p>fi-fe)o.moveTo(v*$n(g),v*Be(g)),o.arc(0,0,v,g,_,!m),f>fe&&(o.moveTo(f*$n(_),f*Be(_)),o.arc(0,0,f,_,g,m));else{var A=g,w=_,M=g,x=_,C=p,j=p,k=a.apply(this,arguments)/2,$=k>fe&&(r?+r.apply(this,arguments):Zn(f*f+v*v)),S=ss(Ga(v-f)/2,+n.apply(this,arguments)),b=S,I=S,E,T;if($>fe){var ht=Ya($/f*Be(k)),xt=Ya($/v*Be(k));(C-=ht*2)>fe?(ht*=m?1:-1,M+=ht,x-=ht):(C=0,M=x=(g+_)/2),(j-=xt*2)>fe?(xt*=m?1:-1,A+=xt,w-=xt):(j=0,A=w=(g+_)/2)}var It=v*$n(A),lt=v*Be(A),bt=f*$n(x),N=f*Be(x);if(S>fe){var X=v*$n(w),Q=v*Be(w),st=f*$n(M),D=f*Be(M),L;if(p<Hr)if(L=ep(It,lt,st,D,X,Q,bt,N)){var G=It-L[0],Et=lt-L[1],ct=X-L[0],y=Q-L[1],q=1/Be(Yg((G*ct+Et*y)/(Zn(G*G+Et*Et)*Zn(ct*ct+y*y)))/2),B=Zn(L[0]*L[0]+L[1]*L[1]);b=ss(S,(f-B)/(q-1)),I=ss(S,(v-B)/(q+1))}else b=I=0}j>fe?I>fe?(E=ri(st,D,It,lt,v,I,m),T=ri(X,Q,bt,N,v,I,m),o.moveTo(E.cx+E.x01,E.cy+E.y01),I<S?o.arc(E.cx,E.cy,I,Jt(E.y01,E.x01),Jt(T.y01,T.x01),!m):(o.arc(E.cx,E.cy,I,Jt(E.y01,E.x01),Jt(E.y11,E.x11),!m),o.arc(0,0,v,Jt(E.cy+E.y11,E.cx+E.x11),Jt(T.cy+T.y11,T.cx+T.x11),!m),o.arc(T.cx,T.cy,I,Jt(T.y11,T.x11),Jt(T.y01,T.x01),!m))):(o.moveTo(It,lt),o.arc(0,0,v,A,w,!m)):o.moveTo(It,lt),!(f>fe)||!(C>fe)?o.lineTo(bt,N):b>fe?(E=ri(bt,N,X,Q,f,-b,m),T=ri(It,lt,st,D,f,-b,m),o.lineTo(E.cx+E.x01,E.cy+E.y01),b<S?o.arc(E.cx,E.cy,b,Jt(E.y01,E.x01),Jt(T.y01,T.x01),!m):(o.arc(E.cx,E.cy,b,Jt(E.y01,E.x01),Jt(E.y11,E.x11),!m),o.arc(0,0,f,Jt(E.cy+E.y11,E.cx+E.x11),Jt(T.cy+T.y11,T.cx+T.x11),m),o.arc(T.cx,T.cy,b,Jt(T.y11,T.x11),Jt(T.y01,T.x01),!m))):o.arc(0,0,f,x,M,m)}if(o.closePath(),u)return o=null,u+""||null}return c.centroid=function(){var u=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,d=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-Hr/2;return[$n(d)*u,Be(d)*u]},c.innerRadius=function(u){return arguments.length?(t=typeof u=="function"?u:ie(+u),c):t},c.outerRadius=function(u){return arguments.length?(e=typeof u=="function"?u:ie(+u),c):e},c.cornerRadius=function(u){return arguments.length?(n=typeof u=="function"?u:ie(+u),c):n},c.padRadius=function(u){return arguments.length?(r=u==null?null:typeof u=="function"?u:ie(+u),c):r},c.startAngle=function(u){return arguments.length?(i=typeof u=="function"?u:ie(+u),c):i},c.endAngle=function(u){return arguments.length?(s=typeof u=="function"?u:ie(+u),c):s},c.padAngle=function(u){return arguments.length?(a=typeof u=="function"?u:ie(+u),c):a},c.context=function(u){return arguments.length?(o=u??null,c):o},c}function rp(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ip(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function sp(t){return t}function ap(){var t=sp,e=ip,n=null,r=ie(0),i=ie(fi),s=ie(0);function a(o){var l,c=(o=rp(o)).length,u,d,f=0,v=new Array(c),g=new Array(c),_=+r.apply(this,arguments),p=Math.min(fi,Math.max(-fi,i.apply(this,arguments)-_)),m,A=Math.min(Math.abs(p)/c,s.apply(this,arguments)),w=A*(p<0?-1:1),M;for(l=0;l<c;++l)(M=g[v[l]=l]=+t(o[l],l,o))>0&&(f+=M);for(e!=null?v.sort(function(x,C){return e(g[x],g[C])}):n!=null&&v.sort(function(x,C){return n(o[x],o[C])}),l=0,d=f?(p-c*w)/f:0;l<c;++l,_=m)u=v[l],M=g[u],m=_+(M>0?M*d:0)+w,g[u]={data:o[u],index:l,value:M,startAngle:_,endAngle:m,padAngle:A};return g}return a.value=function(o){return arguments.length?(t=typeof o=="function"?o:ie(+o),a):t},a.sortValues=function(o){return arguments.length?(e=o,n=null,a):e},a.sort=function(o){return arguments.length?(n=o,e=null,a):n},a.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:ie(+o),a):r},a.endAngle=function(o){return arguments.length?(i=typeof o=="function"?o:ie(+o),a):i},a.padAngle=function(o){return arguments.length?(s=typeof o=="function"?o:ie(+o),a):s},a}function Tr(t,e,n){this.k=t,this.x=e,this.y=n}Tr.prototype={constructor:Tr,scale:function(t){return t===1?this:new Tr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new Tr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};Tr.prototype;const Xa=30,Wl=800,jt=Wl,Bt=Wl,as=["#4A90E2","#7B68EE","#50C878","#FF6B6B","#FFA500","#9B59B6","#1ABC9C","#E74C3C"],os=60,ls=30,Ka=40,Za=40,Qa=40,Ja=60,op=.8,lp=.75,cp=.15,up=.4,fp=.25,hp=4,to=30,eo=25,dp=.85,vp=.7,Ri=Jl,Wt=tc;function ra(t,e){let n=t+"_categories";if(e[n])return n;if(t.endsWith("s")){const r=t.slice(0,-1)+"_categories";if(e[r])return r}return null}function We(t,e){const n=ze(t);if(!n)return t;const r=Fr(n),i=.05,s=1,o=Math.min(e/.1,1),l=Math.pow(o,3);return r.s=s-l*(s-i),r.toString()}function gp(t){if(t.length===0)return{};const e={},n=t[0];for(const r of Object.keys(n)){if(r==="id"||r==="user"||r==="agent"||r==="connections")continue;const i=n[r];if(typeof i=="string"&&new Set(t.map(a=>a[r])).size<Xa&&(e[r]="string"),Array.isArray(i)){const s=new Set;if(t.forEach(a=>{Array.isArray(a[r])&&a[r].forEach(o=>s.add(o))}),s.size<Xa){const a=ra(r,n);a&&typeof n[a]=="object"?e[r]="hierarchical":e[r]="array"}}}return e}function pp(t,e,n="count",r=["spend_30d","users_1d","users_7d","users_30d"]){const i={};for(const[s,a]of Object.entries(e))a==="hierarchical"?i[s]=_p(t,s,r):a==="string"?(i[s]={},t.forEach(o=>{const l=o[s];i[s][l]||(i[s][l]=Ri(),r.forEach(c=>{i[s][l][c]===void 0&&(i[s][l][c]=0)})),i[s][l].count++,r.forEach(c=>{i[s][l][c]=(i[s][l][c]||0)+(o[c]||0)}),Ni(o)&&i[s][l].problematic++})):a==="array"&&(i[s]={},t.forEach(o=>{(o[s]||[]).forEach(c=>{i[s][c]||(i[s][c]=Ri(),r.forEach(u=>{i[s][c][u]===void 0&&(i[s][c][u]=0)})),i[s][c].count++,r.forEach(u=>{i[s][c][u]=(i[s][c][u]||0)+(o[u]||0)}),Ni(o)&&i[s][c].problematic++})}));return i}function _p(t,e,n=["spend_30d","users_1d","users_7d","users_30d"]){if(t.length===0)return{};const r=ra(e,t[0]);if(!r)return console.error(`No hierarchy field found for facet: ${e}`),{};const i={},s=new Set,a={};return t.forEach(o=>{const l=o[r];l&&Object.entries(l).forEach(([c,u])=>{s.add(c),a[c]||(a[c]=new Set),u.forEach(d=>a[c].add(d))})}),s.forEach(o=>{i[o]=Object.assign(Ri(),{children:{}}),n.forEach(l=>{i[o][l]===void 0&&(i[o][l]=0)}),a[o]&&a[o].forEach(l=>{i[o].children[l]=Ri(),n.forEach(c=>{i[o].children[l][c]===void 0&&(i[o].children[l][c]=0)})})}),t.forEach(o=>{const l=o[r];l&&Object.entries(l).forEach(([c,u])=>{u.forEach(d=>{i[c].children[d].count++,n.forEach(f=>{i[c].children[d][f]=(i[c].children[d][f]||0)+(o[f]||0)}),Ni(o)&&i[c].children[d].problematic++,i[c].count++,n.forEach(f=>{i[c][f]=(i[c][f]||0)+(o[f]||0)}),Ni(o)&&i[c].problematic++})})}),i}function Ni(t){return t.status==="warning"}function Er(t,e){const n=t[e]||{direct:[],transitive:[]};return{isDirect:r=>n.direct?.includes(r)??!1,isTransitive:r=>n.transitive?.includes(r)??!1}}function Un(t,e){const n=e?`
${e}`:"",r=t.problematic>0?`
Problematic: ${Wt(t.problematic)}`:"";return`${t.name}${n}
Count: ${Wt(t.count)}${r}`}function Ue(t,e){return t>0?e/t:0}function mp(t,e,n,r="count"){const s={name:"root",children:Object.entries(t).map(([l,c])=>({name:l,value:c[r]||0,count:c.count,spend_30d:c.spend_30d,users_1d:c.users_1d,users_7d:c.users_7d,users_30d:c.users_30d,problematic:c.problematic}))},a=wr(s).sum(l=>l.value).sort((l,c)=>(c.value||0)-(l.value||0));return ea().size([e,n]).padding(2).round(!0)(a),a.leaves()}function yp(t,e,n,r="count"){const s={name:"root",children:Object.entries(t).map(([l,c])=>({name:l,count:c.count,spend_30d:c.spend_30d,users_1d:c.users_1d,users_7d:c.users_7d,users_30d:c.users_30d,problematic:c.problematic,isCategory:!0,children:Object.entries(c.children||{}).map(([d,f])=>({name:d,value:f[r]||0,count:f.count,spend_30d:f.spend_30d,users_1d:f.users_1d,users_7d:f.users_7d,users_30d:f.users_30d,problematic:f.problematic,isCategory:!1}))}))},a=wr(s).sum(l=>l.value||0).sort((l,c)=>(c.value||0)-(l.value||0));return ea().size([e,n]).paddingOuter(2).paddingTop(20).paddingInner(2).round(!0)(a),a}function xp(t,e){const n={};return t.forEach(r=>{const i=r[e];if(i!=null){const s=String(i);n[s]||(n[s]=[]),n[s].push(r)}}),n}function wp(t,e){const n=xp(t,e),r=[],i=Object.entries(n);for(let s=0;s<i.length;s++){const[a,o]=i[s];for(let l=0;l<i.length;l++){const[c,u]=i[l],d=new Set(u.map(_=>_.id));let f=0;const v=new Set,g=new Set;for(const _ of o)if(_.connections)for(const p of _.connections)d.has(p)&&(f++,v.add(_.id),g.add(p));f>0&&r.push({source:a,target:c,weight:f,sourceIds:Array.from(v),targetIds:Array.from(g)})}}return r}function bp(t,e){const n=new Set(e),r=new Set,i=[...e],s=new Map;for(t.forEach(a=>s.set(a.id,a));i.length>0;){const a=i.shift();if(r.has(a))continue;r.add(a);const o=s.get(a);if(o&&o.connections)for(const l of o.connections)r.has(l)||(n.add(l),i.push(l))}return t.filter(a=>n.has(a.id))}const Ur=Ut([]),br=Ut({}),hn=Ut([]);function Ul(t,e,n){hn.update(r=>r.some(s=>s.facetName===t&&s.facetValue===e)?r:[...r,{facetName:t,facetValue:e,facetType:n}])}const xe=Ut(0),Fi=Ut("count"),Oi=Ut("treemap"),dr=Ut(!1),Is=Ut(!1),Qn=Ut(!1),Ts=Ut(""),Fn=Ut(null),Rs=Ut({}),Ke=Ut(null),Mp=Kt([Ur],([t])=>{const e=new Map;return t.forEach(n=>e.set(n.id,n)),e}),Ap=Kt([Ur],([t])=>{const e=new Map;return t.forEach(n=>e.set(n.id,[])),t.forEach(n=>{n.connections&&Array.isArray(n.connections)&&n.connections.forEach(r=>{const i=e.get(r);i&&i.push(n.id)})}),e}),Gr=Kt([Ur,hn,Is,Fn],([t,e,n,r])=>{let i=t;if(e.length>0&&(i=i.filter(s=>e.every(a=>{const{facetName:o,facetValue:l,facetType:c}=a;if(c==="string")return s[o]===l;if(c==="array"||c==="hierarchical"){if(c==="hierarchical"){const d=ra(o,s);if(d){const f=s[d];if(f&&typeof f=="object"&&f[l])return!0}}return(s[o]||[]).includes(l)}return!0}))),r){const s=r.employeeIds;i=i.filter(a=>(a.user_ids||[]).some(l=>s.has(l)))}if(n&&i.length>0){const s=i.map(a=>a.id);i=bp(t,s)}return i}),Gl=Kt([Gr,br,Fi,hn],([t,e,n,r])=>{if(Object.keys(e).length===0)return{};const s=pp(t,e,n,["spend_30d","users_1d","users_7d","users_30d"]),a={};r.forEach(l=>{a[l.facetName]||(a[l.facetName]=new Set),a[l.facetName].add(l.facetValue)});const o={};for(const[l,c]of Object.entries(s)){const u=a[l];if(!u){o[l]=c;continue}const d={};for(const[f,v]of Object.entries(c))if(!u.has(f))if(v.children){const g={};for(const[_,p]of Object.entries(v.children))u.has(_)||(g[_]=p);d[f]={...v,children:g}}else d[f]=v;o[l]=d}return o}),Gi=Kt([br,Gl],([t,e])=>Object.keys(t).filter(n=>{const r=e[n];return r?Object.keys(r).length>=2:!1})),Yr=Kt([Gi,xe],([t,e])=>t[e]||""),Yi=Kt([Yr,br],([t,e])=>e[t]||null),$p=Kt([Yr,Gl],([t,e])=>e[t]||{}),Ep=Kt([Gr,Yr,Yi,dr],([t,e,n,r])=>!r||!e||n!=="string"?null:wp(t,e)),kp=Kt([Gr,Yr,Yi,Qn],([t,e,n,r])=>{const i=new Map;return!r||!e||n!=="string"||t.forEach(s=>{const a=s[e];if(a==null)return;const o=String(a);i.has(o)||i.set(o,[]),i.get(o).push(s)}),i}),Mr=Ut(null),cs=Ut("adoption"),nr=Ut([]);Kt(nr,t=>{if(t.length===0)return null;const e=t[t.length-1];return e.employeeIds?new Set(e.employeeIds):null});const Sp=Kt(Mr,t=>{const e=new Map;if(!t)return e;for(const n of t.employees)e.set(n.id,n);return e});Kt([Mr,Ur],([t,e])=>{const n=new Map;if(!t)return n;const r=new Map;for(const i of t.employees)n.set(i.name,[]),r.set(i.id,i.name);for(const i of e){const s=i.user_ids||[];for(const a of s){const o=r.get(a);o&&n.has(o)&&n.get(o).push(i)}}return n});const Yl=Kt([Mr,Gr],([t,e])=>{const n=new Map;if(!t)return n;const r=new Map;for(const i of t.employees)n.set(i.name,[]),r.set(i.id,i.name);for(const i of e){const s=i.user_ids||[];for(const a of s){const o=r.get(a);o&&n.has(o)&&n.get(o).push(i)}}return n});function In(t,e){const n=t.length;if(n===0)return{adoption:0,density:0,agentCount:0,employeeCount:0,employeesWithAgents:0};let r=0,i=0;for(const s of t){const a=e.get(s.name)||[];a.length>0&&r++,i+=a.length}return{adoption:r/n,density:i/n,agentCount:i,employeeCount:n,employeesWithAgents:r}}function rr(t,e,n){const r=[],i=n.find(a=>a.id===e);i&&r.push(i);const s=t.filter(a=>a.manager_id===e);for(const a of s){r.push(a);const o=rr(t,a.id,n);r.push(...o.filter(l=>l.id!==a.id))}return r}function Cp(t,e,n){const r=t.employees;if(e.length===0){const a=new Map;for(const o of r)a.has(o.department)||a.set(o.department,[]),a.get(o.department).push(o);return Array.from(a.entries()).map(([o,l])=>{const c=In(l,n);return{name:o,type:"department",hasReports:!0,employees:l,...c}}).sort((o,l)=>l.employeeCount-o.employeeCount)}let i=r;for(const a of e)a.type==="department"?i=i.filter(o=>o.department===a.name):a.type==="manager"&&a.id&&(i=rr(i,a.id,r));const s=e[e.length-1];if(s.type==="department"){const a=i.filter(o=>i.some(l=>l.manager_id===o.id));return a.length>0?a.map(o=>{const l=rr(i,o.id,r),c=In(l,n);return{name:o.name,title:o.title,id:o.id,type:"manager",hasReports:i.some(u=>u.manager_id===o.id),employees:l,...c}}).sort((o,l)=>l.employeeCount-o.employeeCount):i.map(o=>{const l=n.get(o.name)||[];return{name:o.name,title:o.title,id:o.id,type:"employee",hasReports:!1,employees:[o],adoption:l.length>0?1:0,density:l.length,agentCount:l.length,employeeCount:1,employeesWithAgents:l.length>0?1:0}})}return s.type==="manager"&&s.id?t.employees.filter(o=>o.manager_id===s.id).map(o=>{const l=rr(t.employees,o.id,r),c=t.employees.some(f=>f.manager_id===o.id),u=c?l:[o],d=In(u,n);return{name:o.name,title:o.title,id:o.id,type:c?"manager":"employee",hasReports:c,employees:u,...d}}).sort((o,l)=>l.employeeCount-o.employeeCount):[]}Kt([Mr,nr,Yl],([t,e,n])=>t?Cp(t,e,n):[]);function Ip(t,e,n=2){const r=t.employees,i=new Map;for(const o of r)i.has(o.department)||i.set(o.department,[]),i.get(o.department).push(o);const s=Array.from(i.entries()).map(([o,l])=>{const c=In(l,e),u=l.filter(f=>l.some(v=>v.manager_id===f.id));let d;return n>=1&&u.length>0&&(d=u.map(f=>{const v=rr(l,f.id,r),g=In(v,e);let _;if(n>=2){const p=l.filter(m=>m.manager_id===f.id);p.length>0&&(_=p.map(m=>{const A=rr(l,m.id,r),w=l.some(x=>x.manager_id===m.id),M=In(w?A:[m],e);return{name:m.name,title:m.title,id:m.id,type:w?"manager":"employee",hasReports:w,employees:w?A:[m],...M,children:void 0}}))}return{name:f.name,title:f.title,id:f.id,type:"manager",hasReports:!0,employees:v,...g,children:_}}).sort((f,v)=>v.employeeCount-f.employeeCount)),{name:o,type:"department",hasReports:!0,employees:l,...c,children:d}}).sort((o,l)=>l.employeeCount-o.employeeCount),a=In(r,e);return{name:"Organization",type:"department",hasReports:!0,employees:r,...a,children:s}}const Tp=Kt([Mr,Yl],([t,e])=>t?Ip(t,e,2):null);var Rp=Z('<span class="filter-chip org-filter svelte-1e87otd"> <button class="remove-filter svelte-1e87otd">Ã</button></span>'),Np=Z('<span class="filter-chip svelte-1e87otd"> <button class="remove-filter svelte-1e87otd">Ã</button></span>'),Fp=Z('<div class="filter-notice svelte-1e87otd"><strong class="svelte-1e87otd">Filtered by:</strong> <!> <!> <button class="clear-all svelte-1e87otd">Clear All</button></div>'),Op=Z('<div class="filter-bar svelte-1e87otd"><div class="toggle-controls svelte-1e87otd"><label class="toggle-label svelte-1e87otd"><input type="checkbox" class="svelte-1e87otd"/> <span>Show Connections</span></label> <label class="toggle-label svelte-1e87otd"><input type="checkbox" class="svelte-1e87otd"/> <span>Transitive Mode</span></label></div> <!></div>');function Pp(t,e){ae(e,!1);const n=()=>ft(dr,"$showConnections",a),r=()=>ft(Is,"$transitiveMode",a),i=()=>ft(hn,"$activeFilters",a),s=()=>ft(Fn,"$orgZoomFilter",a),[a,o]=qe();function l(x){hn.update(C=>C.filter((j,k)=>k!==x))}function c(){Fn.set(null),nr.set([])}function u(){hn.set([]),c()}function d(){dr.update(x=>!x)}function f(){Is.update(x=>!x)}me();var v=Op(),g=O(v),_=O(g),p=O(_),m=K(_,2),A=O(m),w=K(g,2);{var M=x=>{var C=Fp(),j=K(O(C),2);{var k=b=>{var I=Rp(),E=O(I),T=K(E);gt(()=>St(E,`Org = "${s().name??""}" `)),$t("click",T,c),V(b,I)};wt(j,b=>{s()&&b(k)})}var $=K(j,2);Ce($,1,i,Fe,(b,I,E)=>{var T=Np(),ht=O(T),xt=K(ht);gt(()=>St(ht,`${h(I).facetName??""} = "${h(I).facetValue??""}" `)),$t("click",xt,()=>l(E)),V(b,T)});var S=K($,2);$t("click",S,u),V(x,C)};wt(w,x=>{(i().length>0||s())&&x(M)})}gt(()=>{mi(p,n()),mi(A,r())}),$t("change",p,d),$t("change",A,f),V(t,v),oe(),o()}var zp=Z('<label class="size-toggle-option svelte-1kjcpjp"><input type="radio" name="sizeMetric" class="svelte-1kjcpjp"/> <span class="svelte-1kjcpjp"> </span></label>'),Dp=Z('<div class="size-toggle svelte-1kjcpjp"><label class="size-toggle-label svelte-1kjcpjp">SIZE BY:</label> <div class="size-toggle-options svelte-1kjcpjp"></div></div>');function Lp(t,e){ae(e,!1);const n=()=>ft(Fi,"$sizeMetric",r),[r,i]=qe(),s=ot();let a=_t(e,"schema",8,null);function o(u){Fi.set(u)}mt(()=>R(a()),()=>{P(s,a()&&a().metrics?[{value:"count",label:"Agent Count"},...a().metrics.map(u=>({value:u,label:u.replace(/_/g," ").replace(/\b\w/g,d=>d.toUpperCase())}))]:[{value:"count",label:"Agent Count"},{value:"spend_30d",label:"Total Spend (30d)"},{value:"users_1d",label:"Total Users (1d)"},{value:"users_7d",label:"Total Users (7d)"},{value:"users_30d",label:"Total Users (30d)"}])}),Le(),me();var l=Dp(),c=K(O(l),2);Ce(c,5,()=>h(s),Fe,(u,d)=>{var f=zp(),v=O(f),g=K(v,2),_=O(g);gt(()=>{bu(v,(h(d),H(()=>h(d).value))),mi(v,(n(),h(d),H(()=>n()===h(d).value))),St(_,(h(d),H(()=>h(d).label)))}),$t("change",v,()=>o(h(d).value)),V(u,f)}),V(t,l),oe(),i()}var qp=Z('<div class="layout-toggle svelte-18h3sna"><span class="label svelte-18h3sna">Layout:</span> <button>Treemap</button> <button>Packed</button> <button>Loose</button> <button>Donut</button></div>');function Hp(t,e){ae(e,!1);const n=()=>ft(Oi,"$layoutMode",r),[r,i]=qe();function s(_){Oi.set(_)}me();var a=qp(),o=K(O(a),2);let l;var c=K(o,2);let u;var d=K(c,2);let f;var v=K(d,2);let g;gt(()=>{l=ve(o,1,"svelte-18h3sna",null,l,{active:n()==="treemap"}),u=ve(c,1,"svelte-18h3sna",null,u,{active:n()==="packed"}),f=ve(d,1,"svelte-18h3sna",null,f,{active:n()==="loose"}),g=ve(v,1,"svelte-18h3sna",null,g,{active:n()==="donut"})}),$t("click",o,()=>s("treemap")),$t("click",c,()=>s("packed")),$t("click",d,()=>s("loose")),$t("click",v,()=>s("donut")),V(t,a),oe(),i()}var Vp=Z('<span class="hint svelte-kgdoqn">(switch to Treemap/Packed)</span>'),jp=Z('<span class="hint svelte-kgdoqn">(string facets only)</span>'),Bp=Z('<div><label class="svelte-kgdoqn"><input type="checkbox" class="svelte-kgdoqn"/> <span class="label-text svelte-kgdoqn">Show Agents</span></label> <!></div>');function Wp(t,e){ae(e,!1);const n=()=>ft(Yi,"$currentFacetType",s),r=()=>ft(Oi,"$layoutMode",s),i=()=>ft(Qn,"$showIndividualAgents",s),[s,a]=qe(),o=ot();function l(){h(o)&&Qn.update(p=>!p)}mt(()=>(n(),r()),()=>{P(o,n()==="string"&&r()!=="donut")}),mt(()=>(h(o),i(),Qn),()=>{!h(o)&&i()&&Qn.set(!1)}),Le(),me();var c=Bp();let u;var d=O(c),f=O(d),v=K(d,2);{var g=p=>{var m=Vp();V(p,m)},_=p=>{var m=Ye(),A=he(m);{var w=M=>{var x=jp();V(M,x)};wt(A,M=>{h(o)||M(w)},!0)}V(p,m)};wt(v,p=>{!h(o)&&n()==="string"?p(g):p(_,!1)})}gt(()=>{u=ve(c,1,"agent-dots-toggle svelte-kgdoqn",null,u,{disabled:!h(o)}),mi(f,i()),f.disabled=!h(o)}),$t("change",f,l),V(t,c),oe(),a()}var Up=Z('<button role="tab"> </button>'),Gp=Z('<button role="tab">org_chart</button>'),Yp=Z('<div class="facet-tabs svelte-1xxeg1p" tabindex="0" role="tablist"><!> <!></div>');function Xp(t,e){ae(e,!1);const n=()=>ft(Gi,"$visibleFacets",i),r=()=>ft(xe,"$currentFacetIndex",i),[i,s]=qe(),a=ot();let o=_t(e,"hasOrgData",8,!1);function l(g){xe.set(g)}function c(g){if(g.key==="ArrowRight"&&h(a)>0){g.preventDefault();const _=(r()+1)%h(a);xe.set(_)}else if(g.key==="ArrowLeft"&&h(a)>0){g.preventDefault();const _=(r()-1+h(a))%h(a);xe.set(_)}else(g.key==="c"||g.key==="C")&&(g.preventDefault(),dr.update(_=>!_))}mt(()=>(R(o()),n()),()=>{P(a,o()?n().length+1:n().length)}),mt(()=>(h(a),r(),xe),()=>{h(a)>0&&r()>=h(a)&&xe.set(0)}),Le(),me();var u=Yp(),d=O(u);Ce(d,1,n,Fe,(g,_,p)=>{var m=Up();let A;var w=O(m);gt(()=>{A=ve(m,1,"tab svelte-1xxeg1p",null,A,{active:r()===p}),ne(m,"aria-selected",r()===p),St(w,h(_))}),$t("click",m,()=>l(p)),V(g,m)});var f=K(d,2);{var v=g=>{var _=Gp();let p;gt(()=>{p=ve(_,1,"tab org-tab svelte-1xxeg1p",null,p,{active:r()===n().length}),ne(_,"aria-selected",(r(),n(),H(()=>r()===n().length)))}),$t("click",_,()=>l(n().length)),V(g,_)};wt(f,g=>{o()&&g(v)})}$t("keydown",u,c),V(t,u),oe(),s()}var Kp=Zo('<svg class="edge-bundling svelte-16is0x2" style="position: absolute; top: 0; left: 0; pointer-events: none;"></svg>');function Zp(t,e){ae(e,!1);let n=_t(e,"connections",8),r=_t(e,"rectanglePositions",8),i=_t(e,"width",8,800),s=_t(e,"height",8,500),a=_t(e,"bundleCenter",8,null),o=_t(e,"bundleStrength",8,dp),l=ot();function c(){if(!h(l)||!n()||n().length===0||!r())return;const d=Ie(h(l));d.selectAll("*").remove();const f=n().map(p=>{const m=r().get(p.source),A=r().get(p.target);if(!m||!A)return null;const w=m.x+m.width/2,M=m.y+m.height/2,x=A.x+A.width/2,C=A.y+A.height/2;if(p.source===p.target)if(a()){const $=a().x,S=a().y,b=w+($-w)*o()*.7,I=M+(S-M)*o()*.7,E=Math.atan2(M-S,w-$),T=20,ht=b+Math.cos(E+.3)*T,xt=I+Math.sin(E+.3)*T;return{path:`M${w},${M} C${b},${I} ${ht},${xt} ${w},${M}`,weight:p.weight,source:p.source,target:p.target,isSelfLoop:!0}}else{const $=Math.min(m.width,m.height)*.4,S=w-$,b=M-$*1.5,I=w+$,E=M-$*1.5;return{path:`M${w},${M} C${S},${b} ${I},${E} ${w},${M}`,weight:p.weight,source:p.source,target:p.target,isSelfLoop:!0}}let j,k;if(a()){const $=(w+x)/2,S=(M+C)/2;j=$+(a().x-$)*o(),k=S+(a().y-S)*o()}else{const $=(w+x)/2,S=(M+C)/2,b=x-w,I=C-M,E=Math.sqrt(b*b+I*I);if(E===0)return null;const T=E*.2;j=$-I*T/E,k=S+b*T/E}return{path:`M${w},${M} Q${j},${k} ${x},${C}`,weight:p.weight,source:p.source,target:p.target,isSelfLoop:!1}}).filter(p=>p!==null),v=nl(f,p=>p.weight)||1,g=Hl().domain([1,v]).range([1,8]);d.append("defs").append("marker").attr("id","arrowhead").attr("markerWidth",10).attr("markerHeight",10).attr("refX",8).attr("refY",3).attr("orient","auto").append("polygon").attr("points","0 0, 6 3, 0 6").attr("fill","#1976d2").attr("opacity",.5),d.selectAll("path.connection").data(f).join("path").attr("class","connection").attr("d",p=>p.path).attr("stroke","#1976d2").attr("stroke-width",p=>g(p.weight)).attr("fill","none").attr("opacity",.4).attr("marker-end",p=>p.isSelfLoop?null:"url(#arrowhead)").append("title").text(p=>p.isSelfLoop?`${p.source}: ${p.weight} internal connections`:`${p.source} â ${p.target}: ${p.weight} connections`)}Hn(()=>{c()}),mt(()=>(R(n()),R(r())),()=>{n()&&r()&&c()}),Le(),me();var u=Kp();xr(u,d=>P(l,d),()=>h(l)),gt(()=>{ne(u,"width",i()),ne(u,"height",s())}),V(t,u),oe()}function Qp(t,e){if(e<=0||t.width<=0||t.height<=0)return[];if(t.width<2||t.height<2)return[];const{x:n,y:r,width:i,height:s}=t,a=i*s/e,o=Math.sqrt(a/Math.PI)*.85,l=Math.max(1,Math.min(6,o)),c=l*2,u=l*Math.sqrt(3),d=Math.floor((i-2*l)/c)+1,f=Math.floor((i-3*l)/c)+1,v=d<=6?f>=d:f/d>=.9,_=Math.ceil(e/d),p=Math.floor((s-l*2)/u)+1,A=(Math.min(_,p)-1)*u+l*2,w=(s-A)/2,M=[];let x=0;for(;M.length<e;){const C=v?x%2*l:0;let j=0;const k=r+w+x*u+l;if(k+l>r+s)return M;for(;M.length<e;){const $=n+C+j*c+l;if($+l>n+i)break;M.push({x:$,y:k,radius:l}),j++}x++}return M}function Jp(t,e,n,r){if(r<=0||n<=0)return[];const s=Math.PI*n*n/r,a=Math.sqrt(s/Math.PI)*.85,o=Math.max(1,Math.min(6,a)),l=o*2,c=o*Math.sqrt(3),u=[],d=Math.ceil(n*2/c)+1,f=e-d/2*c;for(let v=0;v<d&&u.length<r;v++){const g=f+v*c,_=v%2*o,p=Math.abs(g-e);if(p>n-o)continue;const m=Math.sqrt(Math.max(0,(n-o)**2-p**2)),A=t-m,w=t+m,M=Math.floor((w-A)/l)+1;for(let x=0;x<M&&u.length<r;x++){const C=A+_+x*l;Math.sqrt((C-t)**2+(g-e)**2)+o<=n&&u.push({x:C,y:g,radius:o})}}return u}class t0{constructor(){this.tree=ui().x(e=>e.x).y(e=>e.y)}build(e,n){this.tree=ui().x(i=>i.x).y(i=>i.y);const r=e.map((i,s)=>({x:n[s]?.x??0,y:n[s]?.y??0,agent:i}));this.tree.addAll(r)}findNearest(e,n,r=15){return this.tree.find(e,n,r)?.agent??null}clear(){this.tree=ui().x(e=>e.x).y(e=>e.y)}}var e0=Z('<div class="truncation-indicator"> </div>'),n0=Z("<canvas></canvas> <!>",1);function no(t,e){ae(e,!1);const n=()=>ft(Ke,"$highlightedRecordId",r),[r,i]=qe(),s=Tu();let a=_t(e,"agentsByFacetValue",8),o=_t(e,"rectanglePositions",8),l=_t(e,"color",8),c=_t(e,"width",8),u=_t(e,"height",8),d=_t(e,"useCircularPacking",8,!1),f=_t(e,"renderFilter",8,"all"),v=_t(e,"captureEvents",8,!0),g=ot(),_=ot(null),p=null,m=new t0,A=[],w=[],M=null,x=null,C=null,j=ot([]),k=_t(e,"agentPositions",28,()=>new Map),$=_t(e,"hoveredAgentId",12,null),S=_t(e,"hoveredRegionValue",12,null);function b(N){const X=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(N);return X?[parseInt(X[1],16)/255,parseInt(X[2],16)/255,parseInt(X[3],16)/255]:[.5,.5,.5]}function I(){h(g)&&(P(_,ec({canvas:h(g),attributes:{antialias:!0,alpha:!0,premultipliedAlpha:!1}})),p=h(_)({vert:`
        precision mediump float;
        attribute vec2 position;
        attribute vec4 color;
        attribute float size;
        attribute float hasConnections;
        attribute float isHighlighted;
        varying vec4 vColor;
        varying float vHasConnections;
        varying float vIsHighlighted;
        uniform vec2 canvasSize;

        void main() {
          vec2 clipSpace = (position / canvasSize) * 2.0 - 1.0;
          clipSpace.y = -clipSpace.y;
          gl_Position = vec4(clipSpace, 0.0, 1.0);
          gl_PointSize = size * 2.0;
          vColor = color;
          vHasConnections = hasConnections;
          vIsHighlighted = isHighlighted;
        }
      `,frag:`
        precision mediump float;
        varying vec4 vColor;
        varying float vHasConnections;
        varying float vIsHighlighted;

        void main() {
          vec2 coord = gl_PointCoord - 0.5;
          float dist = length(coord);
          if (dist > 0.5) discard;

          float alpha = 1.0 - smoothstep(0.4, 0.5, dist);

          // Darken color slightly for agents with connections
          vec3 finalColor = vColor.rgb;
          if (vHasConnections > 0.5) {
            finalColor = vColor.rgb * 0.7; // 30% darker
          }

          // Draw dark outline for highlighted agents
          if (vIsHighlighted > 0.5) {
            // Outline ring between 0.35 and 0.45 radius
            float outlineOuter = 0.48;
            float outlineInner = 0.38;
            if (dist > outlineInner && dist < outlineOuter) {
              // Dark outline with smooth edges
              float outlineAlpha = smoothstep(outlineInner - 0.02, outlineInner, dist)
                                 * (1.0 - smoothstep(outlineOuter, outlineOuter + 0.02, dist));
              vec3 outlineColor = vec3(0.0, 0.0, 0.0); // Black outline
              finalColor = mix(finalColor, outlineColor, outlineAlpha * 0.8);
            }
          }

          gl_FragColor = vec4(finalColor, vColor.a * alpha);
        }
      `,attributes:{position:h(_).prop("positions"),color:h(_).prop("colors"),size:h(_).prop("sizes"),hasConnections:h(_).prop("hasConnections"),isHighlighted:h(_).prop("isHighlighted")},uniforms:{canvasSize:()=>[h(g).width,h(g).height]},count:h(_).prop("count"),primitive:"points",blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1}}}))}function E(){if(!h(_)||!p||!a()||a().size===0)return;A=[],w=[],P(j,[]);const N=new Set;for(const[,y]of a())for(const q of y)q.connections&&q.connections.forEach(B=>N.add(B));const X=new Set;for(const[,y]of a())for(const q of y){const B=q.connections&&q.connections.length>0,kt=N.has(q.id);(B||kt)&&X.add(q.id)}const Q=[],st=[],D=[],L=[],G=[],Et=[];for(const[y,q]of a()){const B=o().get(y);if(!B||B.width<=0||B.height<=0)continue;const kt=b(l());let Dt;if(d()){const Lt=B.x+B.width/2,tt=B.y+B.height/2,nt=Math.min(B.width,B.height)/2;Dt=Jp(Lt,tt,nt,q.length)}else Dt=Qp(B,q.length);if(f()==="all"){const Lt=q.length-Dt.length;Lt>0&&h(j).push({facetValue:y,notShown:Lt,bounds:B})}q.forEach((Lt,tt)=>{if(tt>=Dt.length)return;const nt=Dt[tt];A.push(Lt),w.push({x:nt.x,y:nt.y});const Tt=X.has(Lt.id);if(!(f()==="all"||f()==="connected"&&Tt||f()==="non-connected"&&!Tt))return;Et.push(Lt),G.push({x:nt.x,y:nt.y});const Mt=M&&M.id===Lt.id||$()===Lt.id,rt=n()===Lt.id,F=Mt||rt,Y=F?1:vp;Lt.status==="warning"?Q.push(.83,.18,.18,Y):Q.push(kt[0],kt[1],kt[2],Y),st.push(F?nt.radius*1.5:nt.radius),D.push(Tt?1:0),L.push(F?1:0)})}if(A.length===0)return;if(v()){const y=k().size;k().clear(),A.forEach((q,B)=>{k().set(q.id,w[B])}),k().size!==y&&k(k())}if(m.build(A,w),Et.length===0){h(_).clear({color:[0,0,0,0],depth:1});return}const ct=new Float32Array(G.length*2);G.forEach((y,q)=>{ct[q*2]=y.x,ct[q*2+1]=y.y}),h(_).clear({color:[0,0,0,0],depth:1}),p({positions:ct,colors:new Float32Array(Q),sizes:new Float32Array(st),hasConnections:new Float32Array(D),isHighlighted:new Float32Array(L),count:Et.length})}function T(N){if(!h(g))return;const X=N.offsetX,Q=N.offsetY,st=m.findNearest(X,Q,15);let D=null;for(const[L,G]of o())if(X>=G.x&&X<=G.x+G.width&&Q>=G.y&&Q<=G.y+G.height){D=L;break}if(D!==x&&(x=D,S(x),s("regionhover",{region:x})),st!==M){if(M=st,$(st?.id??null),s("agenthover",{agentId:$()}),C&&(C.remove(),C=null),st){const L=h(g).getBoundingClientRect();C=document.createElement("div"),C.className="agent-dot-tooltip",C.style.cssText=`
          position: fixed;
          background: rgba(0,0,0,0.85);
          color: white;
          padding: 8px 16px;
          border-radius: 4px;
          font-size: 12px;
          pointer-events: none;
          z-index: 1000;
          left: ${L.left+L.width/2}px;
          bottom: ${window.innerHeight-L.bottom+8}px;
          transform: translateX(-50%);
          white-space: nowrap;
        `,C.innerHTML=`
          <strong>${st.agent}</strong> Â· ${st.platform} Â· ${st.status==="warning"?'<span style="color:#ff6b6b">Warning</span>':"Normal"}
        `,document.body.appendChild(C)}E()}}function ht(){C&&(C.remove(),C=null),M&&(M=null,$(null),s("agenthover",{agentId:null}),E()),x&&(x=null,S(null),s("regionhover",{region:null}))}function xt(N){if(!h(g))return;const X=N.offsetX,Q=N.offsetY,st=30;for(const[L,G]of o())if(X>=G.x&&X<=G.x+G.width&&Q>=G.y&&Q<=G.y+st){s("filter",{facetValue:L});return}const D=m.findNearest(X,Q,15);if(D)Ke.set(D.id);else for(const[L,G]of o())if(X>=G.x&&X<=G.x+G.width&&Q>=G.y&&Q<=G.y+G.height){s("filter",{facetValue:L});break}}Hn(()=>{I(),E()}),Cu(()=>{C&&C.remove(),h(_)&&h(_).destroy()}),Jo(()=>{E()}),mt(()=>(h(_),R(a())),()=>{h(_)&&a()&&E()}),mt(()=>(h(_),n()),()=>{h(_)&&(n(),E())}),mt(()=>(h(_),R($())),()=>{h(_)&&$()!==void 0&&E()}),Le(),me();var It=n0(),lt=he(It);xr(lt,N=>P(g,N),()=>h(g));var bt=K(lt,2);Ce(bt,1,()=>h(j),Fe,(N,X)=>{let Q=()=>h(X).notShown,st=()=>h(X).bounds;var D=e0(),L=O(D);gt(G=>{zr(D,`
      position: absolute;
      left: ${st(),H(()=>st().x+st().width/2)??""}px;
      top: ${st(),H(()=>st().y+st().height-16)??""}px;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.6);
      color: white;
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 10px;
      pointer-events: none;
      white-space: nowrap;
    `),St(L,`+${G??""} more`)},[()=>(Q(),H(()=>Q().toLocaleString()))]),V(N,D)}),gt(()=>{ne(lt,"width",c()),ne(lt,"height",u()),zr(lt,`position: absolute; top: 0; left: 0; pointer-events: ${v()?"auto":"none"};`)}),$t("mousemove",lt,function(...N){(v()?T:void 0)?.apply(this,N)}),$t("mouseleave",lt,function(...N){(v()?ht:void 0)?.apply(this,N)}),$t("click",lt,function(...N){(v()?xt:void 0)?.apply(this,N)}),V(t,It),oe(),i()}var r0=Z('<canvas style="position: absolute; top: 0; left: 0; pointer-events: none; z-index: 5;"></canvas>');function ro(t,e){ae(e,!1);const n=ot();let r=_t(e,"agentPositions",8),i=_t(e,"agents",8),s=_t(e,"width",8),a=_t(e,"height",8),o=_t(e,"bundleCenter",8,null),l=_t(e,"hoveredAgentId",8,null),c=_t(e,"hoveredRegion",8,null),u=_t(e,"agentsByRegion",8,null),d=_t(e,"renderMode",8,"all"),f=ot(),v=ot(null),g=ot(new Map),_=ot(new Map),p=ot(new Map),m=ot(""),A=ot(new Set),w=ot(new Map);function M(k,$,S,b,I,E){if(!h(v))return;const T=o()||{x:s()/2,y:a()/2},ht=I?h(w).get(I):null,xt=E?h(w).get(E):null,It=(k+S)/2,lt=($+b)/2;let bt=It,N=lt;if(ht&&xt&&I!==E){const Q=(ht.x+xt.x)/2,st=(ht.y+xt.y)/2;bt=Q*.6+T.x*.4,N=st*.6+T.y*.4}else bt=It*.8+T.x*.2,N=lt*.8+T.y*.2;const X=h(v).createLinearGradient(k,$,S,b);X.addColorStop(0,"rgba(90, 90, 90, 0.4)"),X.addColorStop(.3,"rgba(100, 100, 100, 0.4)"),X.addColorStop(1,"rgba(200, 200, 200, 0.4)"),h(v).beginPath(),An(v,h(v).strokeStyle=X),An(v,h(v).lineWidth=1.5),h(v).moveTo(k,$),h(v).quadraticCurveTo(bt,N,S,b),h(v).stroke(),h(v).beginPath(),An(v,h(v).fillStyle="rgba(0, 0, 0, 0.4)"),h(v).arc(k,$,2,0,Math.PI*2),h(v).fill()}function x(k,$,S,b){if(!h(v))return;const I=8,E=Math.PI/6,T=(k+S)/2,ht=($+b)/2,xt=S-k,It=b-$,lt=Math.sqrt(xt*xt+It*It);if(lt===0)return;const bt=.15,N=-It/lt*lt*bt,X=xt/lt*lt*bt,Q=T+N,st=ht+X,D=h(v).createLinearGradient(k,$,S,b);D.addColorStop(0,"rgba(13, 71, 161, 1.0)"),D.addColorStop(.3,"rgba(118, 25, 210, 1.0)"),D.addColorStop(1,"rgba(181, 100, 246, 1.0)"),h(v).beginPath(),An(v,h(v).strokeStyle=D),An(v,h(v).lineWidth=2.5),h(v).moveTo(k,$),h(v).quadraticCurveTo(Q,st,S,b);const L=Math.atan2(b-st,S-Q);h(v).moveTo(S,b),h(v).lineTo(S-I*Math.cos(L-E),b-I*Math.sin(L-E)),h(v).moveTo(S,b),h(v).lineTo(S-I*Math.cos(L+E),b-I*Math.sin(L+E)),h(v).stroke(),h(v).beginPath(),An(v,h(v).fillStyle="rgba(13, 71, 161, 0.9)"),h(v).arc(k,$,3,0,Math.PI*2),h(v).fill()}function C(){if(!(!h(f)||!h(v))&&!(!r()||r().size===0)){if(h(v).clearRect(0,0,s(),a()),An(v,h(v).lineWidth=1),(d()==="all"||d()==="region")&&c()&&h(A).size>0)for(const k of h(A)){if(k===l())continue;const $=h(g).get(k);if(!$)continue;const S=r().get(k);if(!S)continue;const b=h(_).get(k);if($.connections)for(const E of $.connections){const T=r().get(E);if(!T)continue;const ht=h(_).get(E);M(S.x,S.y,T.x,T.y,b,ht)}const I=h(p).get(k);if(I)for(const E of I){if(E===l())continue;const T=r().get(E);if(!T)continue;const ht=h(_).get(E);M(T.x,T.y,S.x,S.y,ht,b)}}if((d()==="all"||d()==="agent")&&l()!==null){const k=h(g).get(l());if(!k)return;const $=r().get(l());if(!$)return;if(k.connections)for(const b of k.connections){const I=r().get(b);I&&x($.x,$.y,I.x,I.y)}const S=h(p).get(l());if(S)for(const b of S){const I=r().get(b);I&&x(I.x,I.y,$.x,$.y)}}}}Hn(()=>{P(v,h(f).getContext("2d")),C()}),mt(()=>(R(i()),R(u()),h(m),h(g),h(_),h(p)),()=>{const k=`${i().length}-${u()?.size??0}`;if(k!==h(m)){if(P(m,k),P(g,new Map),i().forEach($=>h(g).set($.id,$)),P(_,new Map),u())for(const[$,S]of u())S.forEach(b=>h(_).set(b.id,$));P(p,new Map),i().forEach($=>{$.connections&&$.connections.forEach(S=>{h(p).has(S)||h(p).set(S,[]),h(p).get(S).push($.id)})})}}),mt(()=>(h(A),R(c()),R(u())),()=>{if(P(A,new Set),c()&&u()){const k=u().get(c());k&&k.forEach($=>h(A).add($.id))}}),mt(()=>(h(w),R(u()),R(r())),()=>{if(P(w,new Map),u()&&r().size>0)for(const[k,$]of u()){let S=0,b=0,I=0;for(const E of $){const T=r().get(E.id);T&&(S+=T.x,b+=T.y,I++)}I>0&&h(w).set(k,{x:S/I,y:b/I})}}),mt(()=>(R(r()),R(i()),R(l()),R(c()),R(s()),R(a()),R(d())),()=>{P(n,`${r()?.size??0}-${i().length}-${l()}-${c()}-${s()}-${a()}-${d()}`)}),mt(()=>(h(v),h(n)),()=>{h(v)&&h(n)&&C()}),Le(),me();var j=r0();xr(j,k=>P(f,k),()=>h(f)),gt(()=>{ne(j,"width",s()),ne(j,"height",a())}),V(t,j),oe()}var i0=Z('<span class="filter-caption svelte-1tagvx2"> </span>'),s0=Zo('<svg class="treemap-svg svelte-1tagvx2"></svg>'),a0=Z('<div style="position: absolute; top: 0; left: 0; z-index: 2;"><!></div>'),o0=Z('<div style="position: absolute; top: 0; left: 0; z-index: 4;"><!></div>'),l0=Z('<div class="agent-dots-webgl-container"><div style="position: absolute; top: 0; left: 0; z-index: 1;"><!></div> <!> <div style="position: absolute; top: 0; left: 0; z-index: 3;"><!></div> <!></div>'),c0=Z('<div class="facet-group svelte-1tagvx2"><div class="facet-title svelte-1tagvx2"> <!></div>  <div class="facet-container svelte-1tagvx2" style="position: relative;" tabindex="0"><!> <!> <!></div></div>');function u0(t,e){ae(e,!1);const n=()=>ft(hn,"$activeFilters",d),r=()=>ft(kp,"$agentsByFacetValue",d),i=()=>ft(Oi,"$layoutMode",d),s=()=>ft(Qn,"$showIndividualAgents",d),a=()=>ft(Gi,"$visibleFacets",d),o=()=>ft(xe,"$currentFacetIndex",d),l=()=>ft(Rs,"$highlightedValues",d),c=()=>ft(dr,"$showConnections",d),u=()=>ft(Ep,"$connectionData",d),[d,f]=qe(),v=ot(),g=ot(),_=ot(),p=ot(),m=ot();let A=_t(e,"facetName",8),w=_t(e,"facetStats",8),M=_t(e,"facetType",8),x=_t(e,"color",8),C=_t(e,"sizeMetric",8,"count"),j=ot(),k=ot(!1),$=ot(new Map),S=ot(null),b=ot(new Map),I=ot(null),E=ot(null),T=ot([]);function ht(tt){Ul(A(),tt,M())}function xt(tt){let nt=tt.target;if(nt.tagName==="rect"||nt.tagName==="circle"||nt.tagName==="path"){const Tt=nt.getAttribute("data-facet-value");Tt&&ht(Tt)}}function It(tt){if(a().length!==0)if(tt.key==="ArrowRight"){tt.preventDefault();const nt=(o()+1)%a().length;xe.set(nt)}else if(tt.key==="ArrowLeft"){tt.preventDefault();const nt=(o()-1+a().length)%a().length;xe.set(nt)}else(tt.key==="c"||tt.key==="C")&&(tt.preventDefault(),dr.update(nt=>!nt))}function lt(){M()==="hierarchical"?st():i()==="packed"?N():i()==="loose"?X():i()==="donut"?bt():Q()}function bt(){if(!h(j)||!w())return;const tt=Ie(h(j)),nt=Object.entries(w()).map(([ut,at])=>({name:ut,value:at[C()]||0,count:at.count,problematic:at.problematic,spend_30d:at.spend_30d,users_1d:at.users_1d,users_7d:at.users_7d,users_30d:at.users_30d})).filter(ut=>ut.value>0);if(nt.length===0){tt.selectAll("*").remove(),P(k,!1);return}const Tt=!h(k);P(k,!0);const Ht=Bt,Mt=jt,rt=Ht/2,F=Mt/2,Y=Math.min(Ht,Mt)/2-20,it=Y*op,Rt=it*lp,{isDirect:Ot,isTransitive:W}=Er(l(),A()),U=ap().value(ut=>ut.value).sort(null),z=np().innerRadius(it).outerRadius(Y),dt=ut=>{const at=(ut.startAngle+ut.endAngle)/2,vt=Math.sin(at)*Rt,Nt=-Math.cos(at)*Rt;let Pt=at*180/Math.PI-90;return at>Math.PI/2&&at<3*Math.PI/2&&(Pt+=180),`translate(${vt},${Nt}) rotate(${Pt})`},pt=ut=>{const at=(ut.startAngle+ut.endAngle)/2;return at>Math.PI/2&&at<3*Math.PI/2?"end":"start"},J=U(nt);let et=tt.select("g.donut-group");et.empty()&&(et=tt.append("g").attr("class","donut-group").attr("transform",`translate(${rt},${F})`));const yt=et.selectAll("g.arc").data(J,ut=>ut.data.name).join(ut=>{const at=ut.append("g").attr("class","arc").style("opacity",Tt?1:0);return at.append("path").attr("class",vt=>{const Nt=["donut-segment"];return Ot(vt.data.name)?Nt.push("highlighted-direct"):W(vt.data.name)&&Nt.push("highlighted-transitive"),Nt.join(" ")}).attr("d",z).attr("fill",vt=>{const Nt=Ue(vt.data.count,vt.data.problematic);return We(x(),Nt)}).attr("fill-opacity",.7).attr("stroke","white").attr("stroke-width",2).attr("data-facet-value",vt=>vt.data.name).style("cursor","pointer"),at.append("text").attr("class","donut-label").attr("transform",vt=>dt(vt)).attr("text-anchor",vt=>pt(vt)).attr("dominant-baseline","middle"),at.append("title"),Tt||at.transition().duration(500).style("opacity",1),at},ut=>(ut.select("path").attr("class",at=>{const vt=["donut-segment"];return Ot(at.data.name)?vt.push("highlighted-direct"):W(at.data.name)&&vt.push("highlighted-transitive"),vt.join(" ")}).transition().duration(500).attr("d",z).attr("fill",at=>{const vt=Ue(at.data.count,at.data.problematic);return We(x(),vt)}),ut.select(".donut-label").transition().duration(500).attr("transform",at=>dt(at)).attr("text-anchor",at=>pt(at)),ut),ut=>ut.transition().duration(500).style("opacity",0).remove());yt.select(".donut-label").text(ut=>{const at=ut.endAngle-ut.startAngle;if(at<=cp)return"";const vt=ut.data[C()]||0,Nt=C()==="spend_30d"?`$${Wt(Math.round(vt))}`:Wt(vt);return at>up?`${ut.data.name} (${Nt})`:at>fp?Nt:""}),yt.select("title").text(ut=>Un(ut.data)),h($).clear(),J.forEach(ut=>{const at=z.centroid(ut),vt=Math.sqrt(at[0]**2+at[1]**2),Nt=[rt+it*(at[0]/vt),F+it*(at[1]/vt)];h($).set(ut.data.name,{x:Nt[0]-5,y:Nt[1]-5,width:10,height:10})}),P($,h($)),P(S,{x:rt,y:F})}function N(){if(!h(j)||!w())return;const tt=Ie(h(j)),nt=Object.entries(w()).map(([W,U])=>({name:W,value:U[C()]||0,count:U.count,spend_30d:U.spend_30d,users_1d:U.users_1d,users_7d:U.users_7d,users_30d:U.users_30d,problematic:U.problematic}));if(nt.length===0){tt.selectAll("*").remove(),P(k,!1);return}const Ht=wr({name:"root",children:nt}).sum(W=>W.value||1).sort((W,U)=>(U.value||0)-(W.value||0)),Mt=Math.min(Bt,jt);bg().size([Mt,Mt]).padding(hp)(Ht);const F=!h(k);nt.length>0&&P(k,!0);const{isDirect:Y,isTransitive:it}=Er(l(),A()),Rt=Ht.leaves(),Ot=tt.selectAll("g.circle-node").data(Rt,W=>W.data.name).join(W=>{const U=W.append("g").attr("class","circle-node").attr("transform",z=>`translate(${z.x},${z.y})`).style("opacity",F?1:0);return U.append("title"),U.append("circle").attr("class",z=>Y(z.data.name)?"highlighted-direct":it(z.data.name)?"highlighted-transitive":"").attr("r",z=>z.r).attr("fill",z=>{const dt=Ue(z.data.count,z.data.problematic);return We(x(),dt)}).attr("fill-opacity",.7).attr("stroke","rgba(0,0,0,0.2)").attr("stroke-width",1).attr("data-facet-value",z=>z.data.name).style("cursor","pointer"),U.append("text").attr("class","packed-label").attr("text-anchor","middle").attr("dy","-0.3em"),U.append("text").attr("class","packed-count").attr("text-anchor","middle").attr("dy","0.9em"),F||U.transition().duration(500).style("opacity",1),U},W=>(W.transition().duration(500).attr("transform",U=>`translate(${U.x},${U.y})`),W.select("circle").attr("class",U=>Y(U.data.name)?"highlighted-direct":it(U.data.name)?"highlighted-transitive":"").transition().duration(500).attr("r",U=>U.r).attr("fill",U=>{const z=Ue(U.data.count,U.data.problematic);return We(x(),z)}),W),W=>W.transition().duration(500).style("opacity",0).remove());Ot.select("title").text(W=>Un(W.data)),Ot.select(".packed-label").text(W=>W.r<=to?"":h(m)?`${W.data.name} (${Wt(W.data.count)})`:W.data.name),Ot.select(".packed-count").text(W=>{if(h(m)||W.r<=eo)return"";const U=W.data[C()]||0;return C()==="spend_30d"?`$${Wt(Math.round(U))}`:Wt(U)}),h($).clear(),Rt.forEach(W=>{h($).set(W.data.name,{x:W.x-W.r,y:W.y-W.r,width:W.r*2,height:W.r*2})}),P($,h($)),P(S,null)}function X(){if(!h(j)||!w())return;const tt=Ie(h(j)),nt=Object.entries(w()).map(([J,et])=>({name:J,value:et[C()]||0,count:et.count,spend_30d:et.spend_30d,users_1d:et.users_1d,users_7d:et.users_7d,users_30d:et.users_30d,problematic:et.problematic})).sort((J,et)=>et.value-J.value);if(nt.length===0){tt.selectAll("*").remove(),P(k,!1);return}const Tt=!h(k);nt.length>0&&P(k,!0);const{isDirect:Ht,isTransitive:Mt}=Er(l(),A()),rt=Bt/2,F=jt/2,Y=Math.min(Bt,jt)/2;ju(nt,J=>J.value);const it=Y*.25,Ot=qg().domain([0,nl(nt,J=>J.value)||1]).range([20,it]),W=Y*.6,U=2*Math.PI/nt.length,z=-Math.PI/2,dt=nt.map((J,et)=>({...J,r:Ot(J.value),x:rt+W*Math.cos(z+et*U),y:F+W*Math.sin(z+et*U)})),pt=tt.selectAll("g.circle-node").data(dt,J=>J.name).join(J=>{const et=J.append("g").attr("class","circle-node").attr("transform",yt=>`translate(${yt.x},${yt.y})`).style("opacity",Tt?1:0);return et.append("title"),et.append("circle").attr("class",yt=>Ht(yt.name)?"highlighted-direct":Mt(yt.name)?"highlighted-transitive":"").attr("r",yt=>yt.r).attr("fill",yt=>{const ut=Ue(yt.count,yt.problematic);return We(x(),ut)}).attr("fill-opacity",.7).attr("stroke","rgba(0,0,0,0.2)").attr("stroke-width",1).attr("data-facet-value",yt=>yt.name).style("cursor","pointer"),et.append("text").attr("class","packed-label").attr("text-anchor","middle").attr("dy","-0.3em"),et.append("text").attr("class","packed-count").attr("text-anchor","middle").attr("dy","0.9em"),Tt||et.transition().duration(500).style("opacity",1),et},J=>(J.transition().duration(500).attr("transform",et=>`translate(${et.x},${et.y})`),J.select("circle").attr("class",et=>Ht(et.name)?"highlighted-direct":Mt(et.name)?"highlighted-transitive":"").transition().duration(500).attr("r",et=>et.r).attr("fill",et=>{const yt=Ue(et.count,et.problematic);return We(x(),yt)}),J),J=>J.transition().duration(500).style("opacity",0).remove());pt.select("title").text(J=>Un(J)),pt.select(".packed-label").text(J=>J.r<=to?"":J.name),pt.select(".packed-count").text(J=>{if(J.r<=eo)return"";const et=J[C()]||0;return C()==="spend_30d"?`$${Wt(Math.round(et))}`:Wt(et)}),h($).clear(),dt.forEach(J=>{h($).set(J.name,{x:J.x-J.r,y:J.y-J.r,width:J.r*2,height:J.r*2})}),P($,h($)),P(S,null)}function Q(){if(!h(j)||!w())return;const tt=mp(w(),Bt,jt,C()),nt=Ie(h(j)),Tt=!h(k)||tt.length===0;tt.length>0&&P(k,!0);const{isDirect:Ht,isTransitive:Mt}=Er(l(),A()),rt=nt.selectAll("g").data(tt,F=>F.data.name).join(F=>{const Y=F.append("g").attr("transform",it=>`translate(${it.x0},${it.y0})`).style("opacity",Tt?1:0);return Y.append("title"),Y.append("rect").attr("class",it=>Ht(it.data.name)?"highlighted-direct":Mt(it.data.name)?"highlighted-transitive":"").attr("width",it=>it.x1-it.x0).attr("height",it=>it.y1-it.y0).attr("fill",it=>{const Rt=Ue(it.data.count,it.data.problematic);return We(x(),Rt)}).attr("fill-opacity",.7).attr("stroke","rgba(0,0,0,0.2)").attr("stroke-width",1).attr("data-facet-value",it=>it.data.name).style("cursor","pointer"),Y.append("text").attr("class","treemap-label").attr("x",5).attr("y",15),Y.append("text").attr("class","treemap-count").attr("text-anchor","middle"),Y.append("text").attr("class","treemap-problematic").attr("text-anchor","middle"),Tt?Y:Y.transition().duration(500).style("opacity",1)},F=>(F.transition().duration(500).attr("transform",Y=>`translate(${Y.x0},${Y.y0})`),F.select("rect").attr("class",Y=>Ht(Y.data.name)?"highlighted-direct":Mt(Y.data.name)?"highlighted-transitive":"").transition().duration(500).attr("width",Y=>Y.x1-Y.x0).attr("height",Y=>Y.y1-Y.y0).attr("fill",Y=>{const it=Ue(Y.data.count,Y.data.problematic);return We(x(),it)}),F),F=>F.transition().duration(500).style("opacity",0).remove());rt.select("title").text(F=>Un(F.data)),rt.select(".treemap-label").text(F=>F.x1-F.x0<=os||F.y1-F.y0<=ls?"":h(m)?`${F.data.name} (${Wt(F.data.count)})`:F.data.name).attr("x",5).attr("y",15),rt.select(".treemap-count").text(F=>{if(h(m)||F.x1-F.x0<=Ka||F.y1-F.y0<=Za)return"";const Y=F.data[C()]||0;return C()==="spend_30d"?`$${Wt(Math.round(Y))}`:Wt(Y)}).attr("x",F=>(F.x1-F.x0)/2).attr("y",F=>(F.y1-F.y0)/2),rt.select(".treemap-problematic").text(F=>h(m)?"":F.data.problematic>0&&F.x1-F.x0>Qa&&F.y1-F.y0>Ja?`â  ${Wt(F.data.problematic)}`:"").attr("x",F=>(F.x1-F.x0)/2).attr("y",F=>(F.y1-F.y0)/2+20),h($).clear(),tt.forEach(F=>{h($).set(F.data.name,{x:F.x0,y:F.y0,width:F.x1-F.x0,height:F.y1-F.y0})}),P($,h($)),P(S,null)}function st(){if(!h(j)||!w())return;if(Object.keys(w()).length===0){Ie(h(j)).selectAll("*").remove(),P(k,!1);return}const tt=yp(w(),Bt,jt,C()),nt=Ie(h(j)),Tt=tt.children||[],Ht=!h(k)||Tt.length===0;Tt.length>0&&P(k,!0);const{isDirect:Mt,isTransitive:rt}=Er(l(),A()),F=nt.selectAll("g.category-group").data(Tt,Y=>Y.data.name).join(Y=>{const it=Y.append("g").attr("class","category-group").attr("transform",Rt=>`translate(${Rt.x0},${Rt.y0})`).style("opacity",Ht?1:0);return it.append("rect").attr("class","category-rect").attr("width",Rt=>Rt.x1-Rt.x0).attr("height",Rt=>Rt.y1-Rt.y0).attr("fill","transparent").attr("stroke",x()).attr("stroke-width",2).attr("data-facet-value",Rt=>Rt.data.name).style("cursor","pointer"),it.append("text").attr("class","treemap-category-label").attr("x",5).attr("y",15),it.append("title"),Ht||it.transition().duration(500).style("opacity",1),it},Y=>(Y.transition().duration(500).attr("transform",it=>`translate(${it.x0},${it.y0})`),Y.select("rect.category-rect").transition().duration(500).attr("width",it=>it.x1-it.x0).attr("height",it=>it.y1-it.y0),Y),Y=>Y.transition().duration(500).style("opacity",0).remove());F.select(".treemap-category-label").text(Y=>{const it=Y.x1-Y.x0,Rt=Y.y1-Y.y0;return it>os&&Rt>ls?Y.data.name:""}),F.select("title").text(Y=>Un(Y.data,"Category")),F.each(function(Y){const it=Ie(this),Rt=Y.children||[],Ot=Y.x0,W=Y.y0,U=it.selectAll("g.leaf-node").data(Rt,z=>z.data.name).join(z=>{const dt=z.append("g").attr("class","leaf-node").attr("transform",pt=>`translate(${pt.x0-Ot},${pt.y0-W})`).style("opacity",Ht?1:0);return dt.append("rect").attr("class",pt=>{const J=["leaf-rect"];return Mt(pt.data.name)?J.push("highlighted-direct"):rt(pt.data.name)&&J.push("highlighted-transitive"),J.join(" ")}).attr("width",pt=>pt.x1-pt.x0).attr("height",pt=>pt.y1-pt.y0).attr("fill",pt=>{const J=Ue(pt.data.count,pt.data.problematic);return We(x(),J)}).attr("fill-opacity",.7).attr("stroke","rgba(0,0,0,0.2)").attr("stroke-width",1).attr("data-facet-value",pt=>pt.data.name).style("cursor","pointer"),dt.append("text").attr("class","treemap-label").attr("x",5).attr("y",15),dt.append("text").attr("class","treemap-count").attr("text-anchor","middle"),dt.append("text").attr("class","treemap-problematic").attr("text-anchor","middle"),dt.append("title"),Ht||dt.transition().duration(500).style("opacity",1),dt},z=>(z.transition().duration(500).attr("transform",dt=>`translate(${dt.x0-Ot},${dt.y0-W})`),z.select("rect").attr("class",dt=>{const pt=["leaf-rect"];return Mt(dt.data.name)?pt.push("highlighted-direct"):rt(dt.data.name)&&pt.push("highlighted-transitive"),pt.join(" ")}).transition().duration(500).attr("width",dt=>dt.x1-dt.x0).attr("height",dt=>dt.y1-dt.y0).attr("fill",dt=>{const pt=Ue(dt.data.count,dt.data.problematic);return We(x(),pt)}),z),z=>z.transition().duration(500).style("opacity",0).remove());U.select(".treemap-label").text(z=>{const dt=z.x1-z.x0,pt=z.y1-z.y0;return dt>os&&pt>ls?z.data.name:""}),U.select(".treemap-count").text(z=>{if(z.x1-z.x0<=Ka||z.y1-z.y0<=Za)return"";const dt=z.data[C()]||0;return C()==="spend_30d"?`$${Wt(Math.round(dt))}`:Wt(dt)}).attr("x",z=>(z.x1-z.x0)/2).attr("y",z=>(z.y1-z.y0)/2),U.select(".treemap-problematic").text(z=>z.data.problematic>0&&z.x1-z.x0>Qa&&z.y1-z.y0>Ja?`â  ${Wt(z.data.problematic)}`:"").attr("x",z=>(z.x1-z.x0)/2).attr("y",z=>(z.y1-z.y0)/2+20),U.select("title").text(z=>Un(z.data,"Permission"))})}Hn(lt),Jo(lt),mt(()=>(n(),R(A())),()=>{P(v,n().filter(tt=>tt.facetName===A()))}),mt(()=>h(v),()=>{P(g,h(v).length>0?`: ${h(v).map(tt=>`"${tt.facetValue}"`).join(", ")}`:"")}),mt(()=>r(),()=>{r()&&P(T,Array.from(r().values()).flat())}),mt(()=>(R(A()),i()),()=>{P(_,`${A()}-${i()}`)}),mt(()=>h(_),()=>{h(_)&&(P(k,!1),P($,new Map),P(S,null))}),mt(()=>(s(),R(M()),i()),()=>{P(p,s()&&M()==="string"&&i()!=="donut")}),mt(()=>h(p),()=>{P(m,h(p))}),mt(()=>(l(),s()),()=>{(l()||s()!==void 0)&&lt()}),mt(()=>(i(),Pr),()=>{i()&&Pr().then(()=>lt())}),Le(),me();var D=c0(),L=O(D),G=O(L),Et=K(G);{var ct=tt=>{var nt=i0(),Tt=O(nt);gt(()=>St(Tt,h(g))),V(tt,nt)};wt(Et,tt=>{h(g)&&tt(ct)})}var y=K(L,2),q=O(y);du(q,()=>h(_),tt=>{var nt=s0();xr(nt,Tt=>P(j,Tt),()=>h(j)),gt(()=>{ne(nt,"width",Bt),ne(nt,"height",jt)}),$t("click",nt,xt),V(tt,nt)});var B=K(q,2);{var kt=tt=>{Zp(tt,{get connections(){return u()},get rectanglePositions(){return h($)},get width(){return Bt},get height(){return jt},get bundleCenter(){return h(S)}})};wt(B,tt=>{c(),s(),u(),R(M()),h($),H(()=>c()&&!s()&&u()&&u().length>0&&M()==="string"&&h($).size>0)&&tt(kt)})}var Dt=K(B,2);{var Lt=tt=>{var nt=l0(),Tt=O(nt),Ht=O(Tt);{let Ot=ee(()=>i()==="packed"||i()==="loose");no(Ht,{get agentsByFacetValue(){return r()},get rectanglePositions(){return h($)},get color(){return x()},get width(){return Bt},get height(){return jt},get useCircularPacking(){return h(Ot)},renderFilter:"non-connected",captureEvents:!1,get hoveredAgentId(){return h(I)}})}var Mt=K(Tt,2);{var rt=Ot=>{var W=a0(),U=O(W);{let z=ee(()=>({x:Bt/2,y:jt/2}));ro(U,{get agentPositions(){return h(b)},get agents(){return h(T)},get width(){return Bt},get height(){return jt},get bundleCenter(){return h(z)},get hoveredAgentId(){return h(I)},get hoveredRegion(){return h(E)},get agentsByRegion(){return r()},renderMode:"region"})}V(Ot,W)};wt(Mt,Ot=>{c(),h(b),H(()=>c()&&h(b).size>0)&&Ot(rt)})}var F=K(Mt,2),Y=O(F);{let Ot=ee(()=>i()==="packed"||i()==="loose");no(Y,{get agentsByFacetValue(){return r()},get rectanglePositions(){return h($)},get color(){return x()},get width(){return Bt},get height(){return jt},get useCircularPacking(){return h(Ot)},renderFilter:"connected",captureEvents:!0,get agentPositions(){return h(b)},set agentPositions(W){P(b,W)},get hoveredAgentId(){return h(I)},set hoveredAgentId(W){P(I,W)},get hoveredRegionValue(){return h(E)},set hoveredRegionValue(W){P(E,W)},$$events:{filter:W=>ht(W.detail.facetValue)},$$legacy:!0})}var it=K(F,2);{var Rt=Ot=>{var W=o0(),U=O(W);{let z=ee(()=>({x:Bt/2,y:jt/2}));ro(U,{get agentPositions(){return h(b)},get agents(){return h(T)},get width(){return Bt},get height(){return jt},get bundleCenter(){return h(z)},get hoveredAgentId(){return h(I)},get hoveredRegion(){return h(E)},get agentsByRegion(){return r()},renderMode:"agent"})}V(Ot,W)};wt(it,Ot=>{c(),h(b),H(()=>c()&&h(b).size>0)&&Ot(Rt)})}gt(()=>zr(nt,`position: absolute; top: 0; left: 0; width: ${Bt}px; height: ${jt}px;`)),V(tt,nt)};wt(Dt,tt=>{s()&&M()==="string"&&i()!=="donut"&&tt(Lt)})}gt(tt=>St(G,tt),[()=>(R(A()),H(()=>A().toUpperCase()))]),$t("keydown",y,It),$t("mouseenter",y,tt=>tt.currentTarget.focus()),V(t,D),oe(),f()}var f0=Z('<span class="breadcrumb-sep svelte-1u2gwib">âº</span> <button> </button>',1),h0=Z('<nav class="org-breadcrumb svelte-1u2gwib"><button class="breadcrumb-item svelte-1u2gwib">Organization</button> <!></nav>'),d0=Z('<span class="legend-label svelte-1u2gwib">Adoption:</span> <div class="legend-gradient adoption svelte-1u2gwib"></div> <span class="legend-range svelte-1u2gwib">0% - 100%</span>',1),v0=Z('<span class="legend-label svelte-1u2gwib">Density:</span> <div class="legend-gradient density svelte-1u2gwib"></div> <span class="legend-range svelte-1u2gwib">0 - 10+ agents/person</span>',1),g0=Z('<div class="org-facet-group svelte-1u2gwib"><div class="org-header svelte-1u2gwib"><div class="facet-title svelte-1u2gwib">ORG CHART <span class="subtitle svelte-1u2gwib"> </span></div> <div class="color-toggle svelte-1u2gwib"><button>Adoption</button> <button>Density</button></div></div> <!> <div class="org-container svelte-1u2gwib"><svg class="org-svg svelte-1u2gwib"></svg></div> <div class="org-legend svelte-1u2gwib"><!> <span class="legend-hint svelte-1u2gwib">Click department to zoom</span></div></div>');function p0(t,e){ae(e,!1);const n=()=>ft(cs,"$orgColorMetric",a),r=()=>ft(Tp,"$orgHierarchy",a),i=()=>ft(nr,"$orgPath",a),s=()=>ft(hn,"$activeFilters",a),[a,o]=qe();let l=ot();const c=Cs(Bg).domain([0,1]),u=Cs(Ug).domain([0,10]);function d(N,X){if(n()==="adoption"){const Q=ze(c(N.adoption||0));if(Q){const st=Fr(Q);return st.l=Math.min(.95,st.l+(1-(1-X*.15))*.2),st.formatHex()}return c(N.adoption||0)}else{const Q=ze(u(Math.min(N.density||0,10)));if(Q){const st=Fr(Q);return st.l=Math.min(.95,st.l+(1-(1-X*.15))*.2),st.formatHex()}return u(Math.min(N.density||0,10))}}function f(N){return n()==="adoption"?`${Math.round((N.adoption||0)*100)}%`:`${(N.density||0).toFixed(1)}x`}function v(N,X){const Q=ze(d(N,X));return Q&&Fr(Q).l>.55?"#333":"#fff"}function g(N){if(N.type==="employee"||!N.children)return;const X=N.employees.map(st=>st.id),Q={name:N.name,type:N.type==="department"?"department":"manager",id:N.id,employeeIds:X};nr.update(st=>[...st,Q]),Fn.set({name:N.name,employeeIds:new Set(X)})}function _(N){nr.update(X=>{const Q=X.slice(0,N);if(Q.length===0)Fn.set(null);else{const st=Q[Q.length-1];st.employeeIds&&Fn.set({name:st.name,employeeIds:new Set(st.employeeIds)})}return Q})}function p(){if(!r())return null;if(i().length===0)return r();let N=r();for(const X of i()){if(!N.children)return N;if(N=N.children.find(Q=>Q.name===X.name),!N)return r()}return{...N,name:"root",children:N.children}}function m(){if(!h(l))return;const N=p();if(!N||!N.children||N.children.length===0){const y=Ie(h(l));y.selectAll("*").remove(),y.append("text").attr("x",Bt/2).attr("y",jt/2).attr("text-anchor","middle").attr("fill","#888").text("No hierarchy to display");return}const X=Ie(h(l));X.selectAll("*").remove();const Q=wr(N).sum(y=>y.children?0:y.employeeCount||1).sort((y,q)=>(q.value||0)-(y.value||0));ea().size([Bt,jt]).paddingTop(24).paddingRight(3).paddingBottom(3).paddingLeft(3).paddingInner(2).round(!0)(Q);const D=Q.descendants(),L=D.filter(y=>y.depth===1),G=X.selectAll("g.container").data(L).join("g").attr("class","container").attr("transform",y=>`translate(${y.x0},${y.y0})`).style("cursor",y=>y.data.children?"pointer":"default").on("click",(y,q)=>{y.stopPropagation(),g(q.data)});G.append("rect").attr("class","container-bg").attr("width",y=>y.x1-y.x0).attr("height",y=>y.y1-y.y0).attr("fill","#f5f5f5").attr("stroke","#ccc").attr("stroke-width",1).attr("rx",4),G.append("rect").attr("class","container-header").attr("width",y=>y.x1-y.x0).attr("height",22).attr("fill",y=>d(y.data,1)).attr("rx",4),G.append("rect").attr("class","container-header-fix").attr("width",y=>y.x1-y.x0).attr("height",6).attr("y",18).attr("fill",y=>d(y.data,1)),G.append("text").attr("class","container-label").attr("x",8).attr("y",15).text(y=>{const q=y.x1-y.x0;if(q<50)return"";const B=y.data.name,kt=Math.floor((q-70)/7);return B.length>kt?B.slice(0,kt-1)+"..":B}).attr("fill",y=>v(y.data,1)).attr("font-size","12px").attr("font-weight","600"),G.append("text").attr("class","container-metric").attr("x",y=>y.x1-y.x0-8).attr("y",15).attr("text-anchor","end").text(y=>y.x1-y.x0<60?"":`${y.data.employeeCount} Â· ${f(y.data)}`).attr("fill",y=>v(y.data,1)).attr("font-size","11px").attr("font-weight","500").attr("opacity",.9),G.append("text").attr("class","zoom-indicator").attr("x",y=>y.x1-y.x0-8).attr("y",y=>y.y1-y.y0-8).attr("text-anchor","end").text(y=>y.data.children?"â":"").attr("fill","#666").attr("font-size","14px").style("pointer-events","none"),G.append("title").text(y=>{const q=y.data;let B=`${q.name}`;return B+=`
${q.employeeCount} employees`,B+=`
${q.agentCount} agents (filtered)`,B+=`
Adoption: ${Math.round(q.adoption*100)}%`,B+=`
Density: ${q.density.toFixed(2)} agents/person`,q.children&&(B+=`

Click to zoom in`),B});const Et=D.filter(y=>y.depth>=2),ct=X.selectAll("g.cell").data(Et).join("g").attr("class","cell").attr("transform",y=>`translate(${y.x0},${y.y0})`).style("cursor",y=>y.data.children?"pointer":"default").on("click",(y,q)=>{y.stopPropagation();const B=q.parent;B&&B.depth===1&&g(B.data)});ct.append("rect").attr("width",y=>Math.max(0,y.x1-y.x0)).attr("height",y=>Math.max(0,y.y1-y.y0)).attr("fill",y=>d(y.data,y.depth)).attr("stroke","#fff").attr("stroke-width",1).attr("rx",2).on("mouseover",function(){Ie(this).attr("stroke","#333").attr("stroke-width",2)}).on("mouseout",function(){Ie(this).attr("stroke","#fff").attr("stroke-width",1)}),ct.append("title").text(y=>{const q=y.data;let B=`${q.name}`;return q.title&&(B+=`
${q.title}`),B+=`
${q.employeeCount} ${q.employeeCount===1?"person":"people"}`,B+=`
${q.agentCount} agents (filtered)`,B+=`
Adoption: ${Math.round(q.adoption*100)}%`,B+=`
Density: ${q.density.toFixed(2)} agents/person`,B}),ct.append("text").attr("class","cell-label").attr("x",y=>(y.x1-y.x0)/2).attr("y",y=>(y.y1-y.y0)/2-6).attr("text-anchor","middle").attr("dominant-baseline","middle").text(y=>{const q=y.x1-y.x0,B=y.y1-y.y0;if(q<45||B<35)return"";const kt=y.data.name.split(" ")[0],Dt=Math.floor((q-8)/6);return kt.length>Dt?kt.slice(0,Dt-1)+"..":kt}).attr("fill",y=>v(y.data,y.depth)).attr("font-size","10px").attr("font-weight","500").style("pointer-events","none"),ct.append("text").attr("class","cell-metric").attr("x",y=>(y.x1-y.x0)/2).attr("y",y=>(y.y1-y.y0)/2+8).attr("text-anchor","middle").attr("dominant-baseline","middle").text(y=>{const q=y.x1-y.x0,B=y.y1-y.y0;return q<35||B<35?"":f(y.data)}).attr("fill",y=>v(y.data,y.depth)).attr("font-size","11px").attr("font-weight","600").style("pointer-events","none")}Hn(m),mt(()=>(r(),n(),s(),i()),()=>{(r()||n()||s()||i())&&m()}),Le(),me();var A=g0(),w=O(A),M=O(w),x=K(O(M)),C=O(x),j=K(M,2),k=O(j);let $;var S=K(k,2);let b;var I=K(w,2);{var E=N=>{var X=h0(),Q=O(X),st=K(Q,2);Ce(st,1,i,Fe,(D,L,G)=>{var Et=f0(),ct=K(he(Et),2);let y;var q=O(ct);gt(()=>{y=ve(ct,1,"breadcrumb-item svelte-1u2gwib",null,y,{active:G===i().length-1}),St(q,(h(L),H(()=>h(L).name)))}),$t("click",ct,()=>_(G+1)),V(D,Et)}),$t("click",Q,()=>_(0)),V(N,X)};wt(I,N=>{i(),H(()=>i().length>0)&&N(E)})}var T=K(I,2),ht=O(T);xr(ht,N=>P(l,N),()=>h(l));var xt=K(T,2),It=O(xt);{var lt=N=>{var X=d0();V(N,X)},bt=N=>{var X=v0();V(N,X)};wt(It,N=>{n()==="adoption"?N(lt):N(bt,!1)})}gt(()=>{St(C,`colored by ${n()==="adoption"?"adoption %":"agent density"}`),$=ve(k,1,"toggle-btn svelte-1u2gwib",null,$,{active:n()==="adoption"}),b=ve(S,1,"toggle-btn svelte-1u2gwib",null,b,{active:n()==="density"}),ne(ht,"width",Bt),ne(ht,"height",jt)}),$t("click",k,()=>cs.set("adoption")),$t("click",S,()=>cs.set("density")),V(t,A),oe(),o()}function Gn(t,e,n){let r=n.initialDeps??[],i;function s(){var a,o,l,c;let u;n.key&&((a=n.debug)!=null&&a.call(n))&&(u=Date.now());const d=t();if(!(d.length!==r.length||d.some((g,_)=>r[_]!==g)))return i;r=d;let v;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(v=Date.now()),i=e(...d),n.key&&((l=n.debug)!=null&&l.call(n))){const g=Math.round((Date.now()-u)*100)/100,_=Math.round((Date.now()-v)*100)/100,p=_/16,m=(A,w)=>{for(A=String(A);A.length<w;)A=" "+A;return A};console.info(`%câ± ${m(_,5)} /${m(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*p,120))}deg 100% 31%);`,n?.key)}return(c=n?.onChange)==null||c.call(n,i),i}return s.updateDeps=a=>{r=a},s}function io(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const _0=(t,e)=>Math.abs(t-e)<1.01,m0=(t,e,n)=>{let r;return function(...i){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,i),n)}},so=t=>{const{offsetWidth:e,offsetHeight:n}=t;return{width:e,height:n}},y0=t=>t,x0=t=>{const e=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let i=e;i<=n;i++)r.push(i);return r},w0=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;const i=a=>{const{width:o,height:l}=a;e({width:Math.round(o),height:Math.round(l)})};if(i(so(n)),!r.ResizeObserver)return()=>{};const s=new r.ResizeObserver(a=>{const o=()=>{const l=a[0];if(l?.borderBoxSize){const c=l.borderBoxSize[0];if(c){i({width:c.inlineSize,height:c.blockSize});return}}i(so(n))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},ao={passive:!0},oo=typeof window>"u"?!0:"onscrollend"in window,b0=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;let i=0;const s=t.options.useScrollendEvent&&oo?()=>{}:m0(r,()=>{e(i,!1)},t.options.isScrollingResetDelay),a=u=>()=>{const{horizontal:d,isRtl:f}=t.options;i=d?n.scrollLeft*(f&&-1||1):n.scrollTop,s(),e(i,u)},o=a(!0),l=a(!1);l(),n.addEventListener("scroll",o,ao);const c=t.options.useScrollendEvent&&oo;return c&&n.addEventListener("scrollend",l,ao),()=>{n.removeEventListener("scroll",o),c&&n.removeEventListener("scrollend",l)}},M0=(t,e,n)=>{if(e?.borderBoxSize){const r=e.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return t[n.options.horizontal?"offsetWidth":"offsetHeight"]},A0=(t,{adjustments:e=0,behavior:n},r)=>{var i,s;const a=t+e;(s=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[r.options.horizontal?"left":"top"]:a,behavior:n})};class $0{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{const a=()=>{this._measureElement(s.target,s)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=r())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:y0,rangeExtractor:x0,onChange:()=>{},measureElement:M0,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=Gn(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,s=new Map;for(let a=r-1;a>=0;a--){const o=n[a];if(i.has(o.lane))continue;const l=s.get(o.lane);if(l==null||o.end>l.end?s.set(o.lane,o):o.end<l.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((a,o)=>a.end===o.end?a.index-o.index:a.end-o.end)[0]:void 0},this.getMeasurementOptions=Gn(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,s,a)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a}),{key:!1}),this.getMeasurements=Gn(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a},o)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(u=>{this.itemSizeCache.set(u.key,u.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const c=this.measurementsCache.slice(0,l);for(let u=l;u<n;u++){const d=s(u),f=this.options.lanes===1?c[u-1]:this.getFurthestMeasurement(c,u),v=f?f.end+this.options.gap:r+i,g=o.get(d),_=typeof g=="number"?g:this.options.estimateSize(u),p=v+_,m=f?f.lane:u%this.options.lanes;c[u]={index:u,start:v,size:_,end:p,key:d,lane:m}}return this.measurementsCache=c,c},{key:!1,debug:()=>this.options.debug}),this.calculateRange=Gn(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,s)=>this.range=n.length>0&&r>0?E0({measurements:n,outerSize:r,scrollOffset:i,lanes:s}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=Gn(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,s,a)=>s===null||a===null?[]:n({startIndex:s,endIndex:a,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),s=this.measurementsCache[i];if(!s)return;const a=s.key,o=this.elementsCache.get(a);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(a,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const s=this.itemSizeCache.get(i.key)??i.size,a=r-s;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,a,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=Gn(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let s=0,a=n.length;s<a;s++){const o=n[s],l=r[o];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return io(r[Xl(0,r.length-1,i=>io(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const s=this.getSize(),a=this.getScrollOffset();r==="auto"&&(r=n>=a+s?"end":"start"),r==="center"?n+=(i-s)/2:r==="end"&&(n-=s);const o=this.getTotalSize()+this.options.scrollMargin-s;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const s=this.getSize(),a=this.getScrollOffset();if(r==="auto")if(i.end>=a+s-this.options.scrollPaddingEnd)r="end";else if(i.start<=a+this.options.scrollPaddingStart)r="start";else return[a,r];const o=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let s=0;const a=10,o=c=>{if(!this.targetWindow)return;const u=this.getOffsetForIndex(n,c);if(!u){console.warn("Failed to get offset for index:",n);return}const[d,f]=u;this._scrollToOffset(d,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const v=this.getScrollOffset(),g=this.getOffsetForIndex(n,f);if(!g){console.warn("Failed to get offset for index:",n);return}_0(g[0],v)||l(f)})},l=c=>{this.targetWindow&&(s++,s<a?this.targetWindow.requestAnimationFrame(()=>o(c)):console.warn(`Failed to scroll to index ${n} after ${a} attempts.`))};o(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{const s=Array(this.options.lanes).fill(null);let a=r.length-1;for(;a>=0&&s.some(o=>o===null);){const o=r[a];s[o.lane]===null&&(s[o.lane]=o.end),a--}i=Math.max(...s.filter(o=>o!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const Xl=(t,e,n,r)=>{for(;t<=e;){const i=(t+e)/2|0,s=n(i);if(s<r)t=i+1;else if(s>r)e=i-1;else return i}return t>0?t-1:0};function E0({measurements:t,outerSize:e,scrollOffset:n,lanes:r}){const i=t.length-1,s=l=>t[l].start;if(t.length<=r)return{startIndex:0,endIndex:i};let a=Xl(0,i,s,n),o=a;if(r===1)for(;o<i&&t[o].end<n+e;)o++;else if(r>1){const l=Array(r).fill(0);for(;o<i&&l.some(u=>u<n+e);){const u=t[o];l[u.lane]=u.end,o++}const c=Array(r).fill(n+e);for(;a>=0&&c.some(u=>u>=n);){const u=t[a];c[u.lane]=u.start,a--}a=Math.max(0,a-a%r),o=Math.min(i,o+(r-1-o%r))}return{startIndex:a,endIndex:o}}function k0(t){const e=new $0(t),n=e.setOptions;let r;const i=s=>{const a={...e.options,...s,onChange:s.onChange};n({...a,onChange:(o,l)=>{r.set(o),a.onChange?.(o,l)}}),e._willUpdate()};return r=Ut(e,()=>(i(t),e._didMount())),Kt(r,s=>Object.assign(s,{setOptions:i}))}function S0(t){return k0({observeElementRect:w0,observeElementOffset:b0,scrollToFn:A0,...t})}async function C0(){try{const t=await ks("../data.config.json");return console.log("â Loaded config from data.config.json"),t}catch{return console.warn("No config file found, using auto-detection"),null}}function I0(t,e){if(e)return console.log("â Using explicit config from data.config.json"),e;console.warn("â  No config file found - using auto-detection heuristics"),console.warn("  For better control, create a data.config.json file");const n=t[0]||{},r=Object.keys(n),i={version:"1.0-auto",roles:{titleField:T0(n),idField:R0(r),warningField:N0(r),warningValue:"warning",connectionField:F0(n),connectionSecondaryField:null},fieldOrder:r.filter(s=>O0(s,n)),excludeFromDisplay:[]};return console.log("Auto-detected schema:",{titleField:i.roles.titleField,idField:i.roles.idField,warningField:i.roles.warningField,connectionField:i.roles.connectionField}),i}function T0(t){const e=["name","title","agent","label"];for(const r of e)if(r in t)return r;for(const[r,i]of Object.entries(t))if(typeof i=="string")return console.warn(`  Using "${r}" as title field (first string field found)`),r;const n=Object.keys(t)[0];return console.warn(`  Using "${n}" as title field (first field in record)`),n}function R0(t){return t.includes("id")?"id":t[0]}function N0(t){return t.includes("status")?"status":null}function F0(t){for(const[e,n]of Object.entries(t))if(Array.isArray(n)&&n.length>0&&typeof n[0]=="number")return e;return console.warn("  No connection field found (expected array of numbers)"),null}function O0(t,e){const n=e[t];return t!=="_internal"&&n!==void 0}function Ge(t){return t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function $e(t,e){return t[e]}function mn(t,e){return e.roles.warningField?t[e.roles.warningField]===e.roles.warningValue:!1}function us(t,e){const n=e.roles.connectionField;return!n||!t[n]?null:{ids:t[n],secondaryField:e.roles.connectionSecondaryField}}function lo(t){return t.fieldOrder.filter(e=>!t.excludeFromDisplay.includes(e))}function co(t,e){return Array.isArray(t[e])}function uo(t,e){const n=t[e];return n!==null&&typeof n=="object"&&!Array.isArray(n)}var P0=Z("<span> </span>");function ii(t,e){ae(e,!1);const n=()=>ft(br,"$facetTypes",r),[r,i]=qe(),s=ot(),a=ot();let o=_t(e,"fieldName",8),l=_t(e,"fieldValue",8);function c(){h(s)&&Ul(o(),l(),h(s))}mt(()=>(n(),R(o())),()=>{P(s,n()[o()])}),mt(()=>h(s),()=>{P(a,h(s)!==void 0)}),Le(),me();var u=P0();let d;var f=O(u);gt(()=>{d=ve(u,1,"field-value svelte-mahwrk",null,d,{clickable:h(a)}),ne(u,"role",h(a)?"button":void 0),ne(u,"tabindex",h(a)?0:void 0),St(f,l())}),$t("click",u,c),$t("keypress",u,v=>(v.key==="Enter"||v.key===" ")&&c()),V(t,u),oe(),i()}var z0=Z('<button class="clear-btn svelte-n8ztcz" aria-label="Clear search">Ã</button>'),D0=Z('<div class="search-box svelte-n8ztcz"><span class="search-icon svelte-n8ztcz">ð</span> <input type="text" placeholder="Search by agent, user, or ID..." aria-label="Search agents" class="svelte-n8ztcz"/> <!></div>');function L0(t,e){ae(e,!1);let n=ot(""),r;function i(){clearTimeout(r),r=setTimeout(()=>{Ts.set(h(n))},300)}function s(){P(n,""),Ts.set("")}me();var a=D0(),o=K(O(a),2),l=K(o,2);{var c=u=>{var d=z0();$t("click",d,s),V(u,d)};wt(l,u=>{h(n)&&u(c)})}Au(o,()=>h(n),u=>P(n,u)),$t("input",o,i),V(t,a),oe()}var q0=Z('<div class="no-results svelte-ti8i33"><p class="svelte-ti8i33"> </p></div>'),H0=Z('<span class="detail-item-warning svelte-ti8i33">â  WARNING</span>'),V0=Z('<span class="connection-platform svelte-ti8i33"> </span>'),j0=Z('<span class="connection-warning svelte-ti8i33">â </span>'),B0=Z('<button title="Click to highlight and scroll to this record"><div class="connection-agent svelte-ti8i33"> </div> <div class="connection-details svelte-ti8i33"><!> <!></div></button>'),W0=Z('<span class="connection-item-missing svelte-ti8i33" title="Record not found"> </span>'),U0=Z('<div class="detail-item-field svelte-ti8i33"><strong class="svelte-ti8i33"> </strong> <div class="connections-list svelte-ti8i33"></div></div>'),G0=Z('<span class="users-in-org svelte-ti8i33"> </span> <span class="users-total svelte-ti8i33"> </span>',1),Y0=Z('<span class="svelte-ti8i33"> </span>'),X0=Z('<div class="detail-item-field svelte-ti8i33"><strong class="svelte-ti8i33">Users:</strong> <!></div>'),K0=Z('<span class="permission-badge svelte-ti8i33"><!></span>'),Z0=Z('<div class="detail-item-field svelte-ti8i33"><strong class="svelte-ti8i33"> </strong> <div class="detail-item-permissions svelte-ti8i33"></div></div>'),Q0=Z('<span class="permission-badge small svelte-ti8i33"><!></span>'),J0=Z('<div class="object-field-value svelte-ti8i33"></div>'),t_=Z('<span class="object-field-value svelte-ti8i33"> </span>'),e_=Z('<div class="object-field-item svelte-ti8i33"><span class="object-field-key svelte-ti8i33"><!>:</span> <!></div>'),n_=Z('<div class="detail-item-field svelte-ti8i33"><strong class="svelte-ti8i33"> </strong> <div class="object-field svelte-ti8i33"></div></div>'),r_=Z('<div class="detail-item-field svelte-ti8i33"><strong class="svelte-ti8i33"> </strong> <span class="svelte-ti8i33"> </span></div>'),i_=Z('<div class="detail-item-field svelte-ti8i33"><strong class="svelte-ti8i33"> </strong> <!></div>'),s_=Z('<span class="connection-platform svelte-ti8i33"> </span>'),a_=Z('<span class="connection-warning svelte-ti8i33">â </span>'),o_=Z('<button title="Click to highlight and scroll to this record"><div class="connection-agent svelte-ti8i33"> </div> <div class="connection-details svelte-ti8i33"><!> <!></div></button>'),l_=Z('<span class="connection-item-missing svelte-ti8i33" title="Record not found"> </span>'),c_=Z('<div class="detail-item-field svelte-ti8i33"><strong class="svelte-ti8i33"> </strong> <div class="connections-list svelte-ti8i33"></div></div>'),u_=Z('<div><div class="detail-item-header svelte-ti8i33"><span class="svelte-ti8i33"> </span> <!></div> <!> <!></div>'),f_=Z('<div class="svelte-ti8i33"></div>'),h_=Z('<div class="detail-panel svelte-ti8i33"><h2 class="svelte-ti8i33"> </h2> <!> <!> <div class="detail-list svelte-ti8i33"><!></div></div>');function d_(t,e){ae(e,!1);const n=()=>ft(Sp,"$employeeById",u),r=()=>ft(Fn,"$orgZoomFilter",u),i=()=>ft(Ts,"$searchQuery",u),s=()=>ft(h(g),"$virtualizer",u),a=()=>ft(Ke,"$highlightedRecordId",u),o=()=>ft(br,"$facetTypes",u),l=()=>ft(Mp,"$recordLookup",u),c=()=>ft(Ap,"$backlinksMap",u),[u,d]=qe(),f=ot(),v=ot(),g=ot(),_=ot(),p=ot(),m=ot();function A(D){const L=n().get(D);return L?L.name:String(D)}function w(D){if(!r())return null;const L=r().employeeIds;return{inFilter:D.filter(Et=>L.has(Et)).length,total:D.length}}let M=_t(e,"data",8),x=_t(e,"schema",8),C=ot(),j=new Map,k=ot(""),$=ot(!1),S=ot(null);function b(D,L){const{recordId:G,virtualItem:Et}=L;return j.set(G,D),h(g)&&requestAnimationFrame(()=>{D.isConnected&&s().measureElement(D)}),{destroy(){j.delete(G)}}}function I(D){const L={},G=o();Object.keys(G).forEach(q=>{L[q]={direct:[],transitive:[]}});const Et=new Set([D.id]),ct=[D.id],y=[];for(;ct.length>0;){const q=ct.shift(),B=l().get(q);if(B){const kt=us(B,x());kt&&kt.ids&&kt.ids.forEach(Dt=>{if(!Et.has(Dt)){Et.add(Dt),ct.push(Dt);const Lt=l().get(Dt);Lt&&y.push(Lt)}})}}Object.keys(G).forEach(q=>{const B=G[q];if(B==="string"){const kt=D[q];kt&&L[q].direct.push(kt)}else if(B==="array"||B==="hierarchical"){const kt=D[q]||[];L[q].direct.push(...kt)}}),y.forEach(q=>{Object.keys(G).forEach(B=>{const kt=G[B];if(kt==="string"){const Dt=q[B];Dt&&!L[B].transitive.includes(Dt)&&!L[B].direct.includes(Dt)&&L[B].transitive.push(Dt)}else(kt==="array"||kt==="hierarchical")&&(q[B]||[]).forEach(Lt=>{!L[B].transitive.includes(Lt)&&!L[B].direct.includes(Lt)&&L[B].transitive.push(Lt)})})}),Rs.set(L),P($,!0),Ke.set(D.id)}function E(){Rs.set({}),P($,!1),Ke.set(null)}async function T(D){Ke.set(D);const L=M().findIndex(G=>G.id===D);L>=0?(h(g)&&s().scrollToIndex(L,{align:"center",behavior:"auto"}),await Pr(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{setTimeout(()=>{Ke.set(null)},2e3)})})):(alert("Connected record is not in the current filtered view. Try adjusting your filters."),Ke.set(null))}mt(()=>(i(),R(M())),()=>{P(f,i()?M().filter(D=>{const L=i().toLowerCase(),G=A(D.owner);return D.agent.toLowerCase().includes(L)||G.toLowerCase().includes(L)||String(D.id).includes(L)}):M())}),mt(()=>(h(f),h(C)),()=>{P(v,{count:h(f).length,getScrollElement:()=>h(C),estimateSize:()=>280,overscan:5,measureElement:D=>D?.getBoundingClientRect().height})}),mt(()=>(h(C),h(v)),()=>{ku(P(g,h(C)?S0(h(v)):null),"$virtualizer",u)}),mt(()=>(h(g),R(M()),s()),()=>{h(g)&&M()&&Pr().then(()=>{requestAnimationFrame(()=>{j.forEach(D=>{D?.isConnected&&s().measureElement(D)})})})}),mt(()=>(R(x()),lo),()=>{P(_,x()?lo(x()):[])}),mt(()=>R(x()),()=>{P(p,x()?x().roles.titleField:"agent")}),mt(()=>h(f),()=>{P(m,h(f).length>0?h(f)[0].id:null)}),mt(()=>(i(),h(k),h(m),h(f),h(g),s()),()=>{i()!==h(k)&&h(m)!==null&&(P(k,i()),setTimeout(()=>{const D=h(f).findIndex(L=>L.id===h(m));D>=0&&h(g)&&s().scrollToIndex(D,{align:"start",behavior:"auto"})},100))}),mt(()=>(a(),h(S),h($),h(f),h(g),s(),Ke),()=>{if(a()!==null&&a()!==h(S)&&!h($)){P(S,a());const D=a();setTimeout(()=>{const L=h(f).findIndex(G=>G.id===D);L>=0&&h(g)&&(s().scrollToIndex(L,{align:"center",behavior:"auto"}),setTimeout(()=>{Ke.set(null),P(S,null)},2e3))},100)}}),Le(),me();var ht=h_(),xt=O(ht),It=O(xt),lt=K(xt,2);L0(lt,{});var bt=K(lt,2);{var N=D=>{var L=q0(),G=O(L),Et=O(G);gt(()=>St(Et,`No agents found matching "${i()??""}"`)),V(D,L)};wt(bt,D=>{i(),h(f),H(()=>i()&&h(f).length===0)&&D(N)})}var X=K(bt,2),Q=O(X);{var st=D=>{var L=f_();Ce(L,5,()=>(s(),H(()=>s().getVirtualItems())),G=>G.key,(G,Et)=>{const ct=ee(()=>(h(f),h(Et),H(()=>h(f)[h(Et).index])));var y=u_();let q;var B=O(y),kt=O(B),Dt=O(kt),Lt=K(kt,2);{var tt=Mt=>{var rt=H0();V(Mt,rt)};wt(Lt,Mt=>{R(mn),R(h(ct)),R(x()),H(()=>mn(h(ct),x()))&&Mt(tt)})}var nt=K(B,2);Ce(nt,1,()=>h(_),Fe,(Mt,rt)=>{const F=ee(()=>(R($e),R(h(ct)),h(rt),H(()=>$e(h(ct),h(rt)))));var Y=Ye(),it=he(Y);{var Rt=W=>{const U=ee(()=>(R(us),R(h(ct)),R(x()),H(()=>us(h(ct),x()))));var z=Ye(),dt=he(z);{var pt=J=>{var et=U0(),yt=O(et),ut=O(yt),at=K(yt,2);Ce(at,5,()=>(R(h(U)),H(()=>h(U).ids)),Fe,(vt,Nt)=>{const Pt=ee(()=>(l(),h(Nt),H(()=>l().get(h(Nt)))));var ce=Ye(),Ae=he(ce);{var Zt=qt=>{var Qt=B0();let Ve;var Re=O(Qt),Ne=O(Re),sn=K(Re,2),an=O(sn);{var Mn=ue=>{var pn=V0(),Xi=O(pn);gt(Ki=>St(Xi,Ki),[()=>(R($e),R(h(Pt)),R(h(U)),H(()=>$e(h(Pt),h(U).secondaryField)))]),V(ue,pn)};wt(an,ue=>{R(h(U)),H(()=>h(U).secondaryField)&&ue(Mn)})}var je=K(an,2);{var Vn=ue=>{var pn=j0();V(ue,pn)};wt(je,ue=>{R(mn),R(h(Pt)),R(x()),H(()=>mn(h(Pt),x()))&&ue(Vn)})}gt((ue,pn)=>{Ve=ve(Qt,1,"connection-item svelte-ti8i33",null,Ve,ue),St(Ne,pn)},[()=>({warning:mn(h(Pt),x())}),()=>(R($e),R(h(Pt)),h(p),H(()=>$e(h(Pt),h(p))))]),$t("click",Qt,()=>T(h(Nt))),V(qt,Qt)},Vt=qt=>{var Qt=W0(),Ve=O(Qt);gt(()=>St(Ve,`ID ${h(Nt)??""} (not found)`)),V(qt,Qt)};wt(Ae,qt=>{h(Pt)?qt(Zt):qt(Vt,!1)})}V(vt,ce)}),gt(vt=>St(ut,`${vt??""} (${R(h(U)),H(()=>h(U).ids.length)??""}):`),[()=>(R(Ge),h(rt),H(()=>Ge(h(rt))))]),V(J,et)};wt(dt,J=>{R(h(U)),H(()=>h(U)&&h(U).ids.length>0)&&J(pt)})}V(W,z)},Ot=W=>{var U=Ye(),z=he(U);{var dt=J=>{const et=ee(()=>h(F)||[]),yt=ee(()=>(R(h(et)),H(()=>w(h(et)))));var ut=X0(),at=K(O(ut),2);{var vt=Pt=>{var ce=G0(),Ae=he(ce),Zt=O(Ae),Vt=K(Ae,2),qt=O(Vt);gt(()=>{St(Zt,`${R(h(yt)),H(()=>h(yt).inFilter)??""} in ${r(),H(()=>r()?.name)??""}`),St(qt,`(${R(h(yt)),H(()=>h(yt).total)??""} total)`)}),V(Pt,ce)},Nt=Pt=>{var ce=Y0(),Ae=O(ce);gt(()=>St(Ae,(R(h(et)),H(()=>h(et).length)))),V(Pt,ce)};wt(at,Pt=>{h(yt)?Pt(vt):Pt(Nt,!1)})}V(J,ut)},pt=J=>{var et=Ye(),yt=he(et);{var ut=vt=>{var Nt=Z0(),Pt=O(Nt),ce=O(Pt),Ae=K(Pt,2);Ce(Ae,5,()=>h(F),Fe,(Zt,Vt)=>{var qt=K0(),Qt=O(qt);ii(Qt,{get fieldName(){return h(rt)},get fieldValue(){return h(Vt)}}),V(Zt,qt)}),gt(Zt=>St(ce,`${Zt??""}:`),[()=>(R(Ge),h(rt),H(()=>Ge(h(rt))))]),V(vt,Nt)},at=vt=>{var Nt=Ye(),Pt=he(Nt);{var ce=Zt=>{const Vt=ee(()=>(h(rt),H(()=>h(rt).endsWith("_categories")?h(rt).replace("_categories","s"):h(rt))));var qt=n_(),Qt=O(qt),Ve=O(Qt),Re=K(Qt,2);Ce(Re,5,()=>(R(h(F)),H(()=>Object.entries(h(F)))),Fe,(Ne,sn)=>{var an=jc(()=>ac(h(sn),2));let Mn=()=>h(an)[0],je=()=>h(an)[1];var Vn=e_(),ue=O(Vn),pn=O(ue);ii(pn,{get fieldName(){return h(Vt)},get fieldValue(){return Mn()}});var Xi=K(ue,2);{var Ki=jn=>{var Ar=J0();Ce(Ar,5,je,Fe,(Zi,Zl)=>{var ia=Q0(),Ql=O(ia);ii(Ql,{get fieldName(){return h(Vt)},get fieldValue(){return h(Zl)}}),V(Zi,ia)}),V(jn,Ar)},Kl=jn=>{var Ar=t_(),Zi=O(Ar);gt(()=>St(Zi,je())),V(jn,Ar)};wt(Xi,jn=>{je(),H(()=>Array.isArray(je()))?jn(Ki):jn(Kl,!1)})}V(Ne,Vn)}),gt(Ne=>St(Ve,`${Ne??""}:`),[()=>(R(Ge),h(rt),H(()=>Ge(h(rt))))]),V(Zt,qt)},Ae=Zt=>{var Vt=Ye(),qt=he(Vt);{var Qt=Re=>{var Ne=r_(),sn=O(Ne),an=O(sn),Mn=K(sn,2),je=O(Mn);gt((Vn,ue)=>{St(an,`${Vn??""}:`),St(je,ue)},[()=>(R(Ge),h(rt),H(()=>Ge(h(rt)))),()=>(R(h(F)),H(()=>A(h(F))))]),V(Re,Ne)},Ve=Re=>{var Ne=i_(),sn=O(Ne),an=O(sn),Mn=K(sn,2);ii(Mn,{get fieldName(){return h(rt)},get fieldValue(){return h(F)}}),gt(je=>St(an,`${je??""}:`),[()=>(R(Ge),h(rt),H(()=>Ge(h(rt))))]),V(Re,Ne)};wt(qt,Re=>{h(rt)==="owner"?Re(Qt):Re(Ve,!1)},!0)}V(Zt,Vt)};wt(Pt,Zt=>{R(uo),R(h(ct)),h(rt),H(()=>uo(h(ct),h(rt)))?Zt(ce):Zt(Ae,!1)},!0)}V(vt,Nt)};wt(yt,vt=>{R(co),R(h(ct)),h(rt),H(()=>co(h(ct),h(rt)))?vt(ut):vt(at,!1)},!0)}V(J,et)};wt(z,J=>{h(rt)==="user_ids"?J(dt):J(pt,!1)},!0)}V(W,U)};wt(it,W=>{h(rt),R(x()),H(()=>h(rt)===x().roles.connectionField)?W(Rt):W(Ot,!1)})}V(Mt,Y)});var Tt=K(nt,2);{var Ht=Mt=>{const rt=ee(()=>(c(),R(h(ct)),H(()=>c().get(h(ct).id)||[])));var F=c_(),Y=O(F),it=O(Y),Rt=K(Y,2);Ce(Rt,5,()=>h(rt),Fe,(Ot,W)=>{const U=ee(()=>(l(),h(W),H(()=>l().get(h(W)))));var z=Ye(),dt=he(z);{var pt=et=>{var yt=o_();let ut;var at=O(yt),vt=O(at),Nt=K(at,2),Pt=O(Nt);{var ce=Vt=>{var qt=s_(),Qt=O(qt);gt(Ve=>St(Qt,Ve),[()=>(R($e),R(h(U)),R(x()),H(()=>$e(h(U),x().roles.connectionSecondaryField)))]),V(Vt,qt)};wt(Pt,Vt=>{R(x()),H(()=>x().roles.connectionSecondaryField)&&Vt(ce)})}var Ae=K(Pt,2);{var Zt=Vt=>{var qt=a_();V(Vt,qt)};wt(Ae,Vt=>{R(mn),R(h(U)),R(x()),H(()=>mn(h(U),x()))&&Vt(Zt)})}gt((Vt,qt)=>{ut=ve(yt,1,"connection-item svelte-ti8i33",null,ut,Vt),St(vt,qt)},[()=>({warning:mn(h(U),x())}),()=>(R($e),R(h(U)),h(p),H(()=>$e(h(U),h(p))))]),$t("click",yt,()=>T(h(W))),V(et,yt)},J=et=>{var yt=l_(),ut=O(yt);gt(()=>St(ut,`ID ${h(W)??""} (not found)`)),V(et,yt)};wt(dt,et=>{h(U)?et(pt):et(J,!1)})}V(Ot,z)}),gt(()=>St(it,`Connects to this (${R(h(rt)),H(()=>h(rt).length)??""}):`)),V(Mt,F)};wt(Tt,Mt=>{c(),R(h(ct)),H(()=>(c().get(h(ct).id)||[]).length>0)&&Mt(Ht)})}_u(y,(Mt,rt)=>b?.(Mt,rt),()=>({recordId:h(ct).id,virtualItem:h(Et)})),vi(()=>$t("mouseenter",y,()=>I(h(ct)))),vi(()=>$t("mouseleave",y,E)),gt(Mt=>{q=ve(y,1,"detail-item svelte-ti8i33",null,q,{highlighted:a()===h(ct).id||i()&&h(ct).id===h(m)}),zr(y,`position: absolute; top: 0; left: 0; width: 100%; transform: translateY(${h(Et),H(()=>h(Et).start)??""}px);`),ne(y,"data-index",(h(Et),H(()=>h(Et).index))),ne(y,"data-agent-id",(R(h(ct)),H(()=>h(ct).id))),St(Dt,Mt)},[()=>(R($e),R(h(ct)),h(p),H(()=>$e(h(ct),h(p))))]),V(G,y)}),gt(G=>zr(L,`height: ${G??""}px; width: 100%; position: relative;`),[()=>(s(),H(()=>s().getTotalSize()))]),V(D,L)};wt(Q,D=>{h(g),h(f),H(()=>h(g)&&h(f).length>0)&&D(st)})}xr(X,D=>P(C,D),()=>h(C)),gt(D=>St(It,`Matching Records (${D??""})`),[()=>(R(Wt),h(f),H(()=>Wt(h(f).length)))]),V(t,ht),oe(),d()}var v_=Z('<div id="visualization" class="svelte-2jhczl"><!> <!></div> <!>',1),g_=Z("<p>Loading...</p>"),p_=Z('<div id="container" class="svelte-2jhczl"><h1 class="svelte-2jhczl">Hierarchical Faceted Browser</h1> <!> <div class="controls-row svelte-2jhczl"><!> <!> <!></div> <div id="main-content" class="svelte-2jhczl"><!></div></div>');function __(t,e){ae(e,!1);const n=()=>ft(xe,"$currentFacetIndex",u),r=()=>ft(Gi,"$visibleFacets",u),i=()=>ft(hn,"$activeFilters",u),s=()=>ft(Yr,"$currentFacetName",u),a=()=>ft(Yi,"$currentFacetType",u),o=()=>ft($p,"$currentFacetStats",u),l=()=>ft(Fi,"$sizeMetric",u),c=()=>ft(Gr,"$filteredData",u),[u,d]=qe(),f=ot();let v=ot(!1),g=ot(null),_=ot(0);Hn(async()=>{try{const S=await C0(),[b,I]=await Promise.all([ks("../data.json"),ks("../org.json").catch(()=>null)]);b.forEach(T=>{T.connections&&T.connections.length>0?T.connection_status="Connected":T.connection_status="Isolated"}),Ur.set(b),I&&I.employees&&(Mr.set(I),P(v,!0),console.log("Org data loaded:",I.employees.length,"employees")),P(g,I0(b,S)),console.log("Schema loaded:",h(g));const E=gp(b);br.set(E)}catch(S){console.error("Error loading data:",S)}}),mt(()=>(h(v),n(),r()),()=>{P(f,h(v)&&n()===r().length)}),mt(()=>(i(),h(_),r(),s(),n(),xe),()=>{if(i().length>h(_)&&r().length>0){const S=i()[i().length-1];if(S.facetType==="string"&&S.facetName===s()){const b=(n()+1)%r().length;xe.set(b)}}P(_,i().length)}),Le(),me();var p=p_(),m=K(O(p),2);Pp(m,{});var A=K(m,2),w=O(A);Lp(w,{get schema(){return h(g)}});var M=K(w,2);Hp(M,{});var x=K(M,2);Wp(x,{});var C=K(A,2),j=O(C);{var k=S=>{var b=v_(),I=he(b),E=O(I);Xp(E,{get hasOrgData(){return h(v)}});var T=K(E,2);{var ht=lt=>{p0(lt,{})},xt=lt=>{var bt=Ye(),N=he(bt);{var X=Q=>{u0(Q,{get facetName(){return s()},get facetStats(){return o()},get facetType(){return a()},get color(){return R(as),n(),H(()=>as[n()%as.length])},get sizeMetric(){return l()}})};wt(N,Q=>{s()&&a()&&Q(X)},!0)}V(lt,bt)};wt(T,lt=>{h(f)?lt(ht):lt(xt,!1)})}var It=K(I,2);d_(It,{get data(){return c()},get schema(){return h(g)}}),V(S,b)},$=S=>{var b=g_();V(S,b)};wt(j,S=>{h(g)?S(k):S($,!1)})}V(t,p),oe(),d()}uu(__,{target:document.getElementById("app")});
