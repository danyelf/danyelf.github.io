import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as ol}from"./data-utils-HFH0zg-E.js";const Ni=!1;var Sa=Array.isArray,ll=Array.prototype.indexOf,es=Array.from,Ta=Object.defineProperty,Cn=Object.getOwnPropertyDescriptor,Ca=Object.getOwnPropertyDescriptors,ul=Object.prototype,cl=Array.prototype,ns=Object.getPrototypeOf,ks=Object.isExtensible;const Ne=()=>{};function fl(t){return t()}function Or(t){for(var e=0;e<t.length;e++)t[e]()}function Na(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}function hl(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const n=[];for(const r of t)if(n.push(r),n.length===e)break;return n}const Nt=2,rs=4,ni=8,De=16,Pe=32,gn=64,ri=128,ue=512,Tt=1024,Yt=2048,$e=4096,Qt=8192,Fe=16384,is=32768,Rn=65536,Ss=1<<17,Fa=1<<18,Hn=1<<19,Ra=1<<20,hn=32768,Fi=1<<21,ss=1<<22,Ue=1<<23,un=Symbol("$state"),dl=Symbol("legacy props"),vl=Symbol(""),An=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function Ia(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function pl(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function gl(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function _l(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function ml(t){throw new Error("https://svelte.dev/e/effect_orphan")}function yl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function wl(t){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function xl(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function bl(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function $l(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function El(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ml(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Oa=1,za=2,Da=4,Al=8,kl=16,Sl=2,Tl=4,Cl=8,Nl=1,Fl=2,zt=Symbol(),Rl="http://www.w3.org/1999/xhtml";function Il(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Pa(t){return t===this.v}function as(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function La(t){return!as(t,this.v)}let Bn=!1,Ol=!1;function zl(){Bn=!0}let dt=null;function In(t){dt=t}function ce(t,e=!1,n){dt={p:dt,i:!1,c:null,e:null,s:t,x:null,l:Bn&&!e?{s:null,u:null,$:[]}:null}}function fe(t){var e=dt,n=e.e;if(n!==null){e.e=null;for(var r of n)to(r)}return e.i=!0,dt=e.p,{}}function Un(){return!Bn||dt!==null&&dt.l===null}let on=[];function Va(){var t=on;on=[],Or(t)}function Wn(t){if(on.length===0&&!rr){var e=on;queueMicrotask(()=>{e===on&&Va()})}on.push(t)}function Dl(){for(;on.length>0;)Va()}function ja(t){var e=at;if(e===null)return it.f|=Ue,t;if((e.f&is)===0){if((e.f&ri)===0)throw t;e.b.error(t)}else On(t,e)}function On(t,e){for(;e!==null;){if((e.f&ri)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t}const _r=new Set;let ht=null,Tr=null,Kt=null,ie=[],ii=null,Ri=!1,rr=!1;class ye{committed=!1;current=new Map;previous=new Map;#t=new Set;#e=new Set;#r=0;#n=0;#l=null;#s=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){ie=[],Tr=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of e)this.#a(r,n);this.is_fork||this.#c(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(Tr=this,ht=null,Ts(n.render_effects),Ts(n.effects),Tr=null,this.#l?.resolve()),Kt=null}#a(e,n){e.f^=Tt;for(var r=e.first;r!==null;){var i=r.f,s=(i&(Pe|gn))!==0,a=s&&(i&Tt)!==0,o=a||(i&Qt)!==0||this.skipped_effects.has(r);if((r.f&ri)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!o&&r.fn!==null){s?r.f^=Tt:(i&rs)!==0?n.effects.push(r):Xn(r)&&((r.f&De)!==0&&n.block_effects.push(r),Pn(r));var l=r.first;if(l!==null){r=l;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=u.next,u=u.parent}}#o(e){for(const n of e)((n.f&Yt)!==0?this.#s:this.#i).push(n),this.#u(n.deps),Ct(n,Tt)}#u(e){if(e!==null)for(const n of e)(n.f&Nt)===0||(n.f&hn)===0||(n.f^=hn,this.#u(n.deps))}capture(e,n){this.previous.has(e)||this.previous.set(e,n),(e.f&Ue)===0&&(this.current.set(e,e.v),Kt?.set(e,e.v))}activate(){ht=this,this.apply()}deactivate(){ht===this&&(ht=null,Kt=null)}flush(){if(this.activate(),ie.length>0){if(qa(),ht!==null&&ht!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#e)e(this);this.#e.clear()}#c(){if(this.#n===0){for(const e of this.#t)e();this.#t.clear()}this.#r===0&&this.#f()}#f(){if(_r.size>1){this.previous.clear();var e=Kt,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of _r){if(s===this){n=!1;continue}const a=[];for(const[l,u]of this.current){if(s.current.has(l))if(n&&u!==s.current.get(l))s.current.set(l,u);else continue;a.push(l)}if(a.length===0)continue;const o=[...s.current.keys()].filter(l=>!this.current.has(l));if(o.length>0){var i=ie;ie=[];const l=new Set,u=new Map;for(const c of a)Ha(c,o,l,u);if(ie.length>0){ht=s,s.apply();for(const c of ie)s.#a(c,r);s.deactivate()}ie=i}}ht=null,Kt=e}this.committed=!0,_r.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#s)Ct(e,Yt),dn(e);for(const e of this.#i)Ct(e,$e),dn(e);this.#s=[],this.#i=[],this.flush()}oncommit(e){this.#t.add(e)}ondiscard(e){this.#e.add(e)}settled(){return(this.#l??=Na()).promise}static ensure(){if(ht===null){const e=ht=new ye;_r.add(ht),rr||ye.enqueue(()=>{ht===e&&e.flush()})}return ht}static enqueue(e){Wn(e)}apply(){}}function Pl(t){var e=rr;rr=!0;try{for(var n;;){if(Dl(),ie.length===0&&(ht?.flush(),ie.length===0))return ii=null,n;qa()}}finally{rr=e}}function qa(){var t=Ye;Ri=!0;var e=null;try{var n=0;for(Pr(!0);ie.length>0;){var r=ye.ensure();if(n++>1e3){var i,s;Ll()}r.process(ie),We.clear()}}finally{Ri=!1,Pr(t),ii=null}}function Ll(){try{yl()}catch(t){On(t,ii)}}let Te=null;function Ts(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(Fe|Qt))===0&&Xn(r)&&(Te=new Set,Pn(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?ro(r):r.fn=null),Te?.size>0)){We.clear();for(const i of Te){if((i.f&(Fe|Qt))!==0)continue;const s=[i];let a=i.parent;for(;a!==null;)Te.has(a)&&(Te.delete(a),s.push(a)),a=a.parent;for(let o=s.length-1;o>=0;o--){const l=s[o];(l.f&(Fe|Qt))===0&&Pn(l)}}Te.clear()}}Te=null}}function Ha(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const i of t.reactions){const s=i.f;(s&Nt)!==0?Ha(i,e,n,r):(s&(ss|De))!==0&&(s&Yt)===0&&Ba(i,e,r)&&(Ct(i,Yt),dn(i))}}function Ba(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const i of t.deps){if(e.includes(i))return!0;if((i.f&Nt)!==0&&Ba(i,e,n))return n.set(i,!0),!0}return n.set(t,!1),!1}function dn(t){for(var e=ii=t;e.parent!==null;){e=e.parent;var n=e.f;if(Ri&&e===at&&(n&De)!==0&&(n&Fa)===0)return;if((n&(gn|Pe))!==0){if((n&Tt)===0)return;e.f^=Tt}}ie.push(e)}function Vl(t){let e=0,n=vn(0),r;return()=>{oi()&&(v(n),Yn(()=>(e===0&&(r=O(()=>t(()=>ir(n)))),e+=1,()=>{Wn(()=>{e-=1,e===0&&(r?.(),r=void 0,ir(n))})})))}}var jl=Rn|Hn|ri;function ql(t,e,n){new Hl(t,e,n)}class Hl{parent;#t=!1;#e;#r=null;#n;#l;#s;#i=null;#a=null;#o=null;#u=null;#c=null;#f=0;#h=0;#v=!1;#d=null;#y=Vl(()=>(this.#d=vn(this.#f),()=>{this.#d=null}));constructor(e,n,r){this.#e=e,this.#n=n,this.#l=r,this.parent=at.b,this.#t=!!this.#n.pending,this.#s=li(()=>{at.b=this;{var i=this.#_();try{this.#i=se(()=>r(i))}catch(s){this.error(s)}this.#h>0?this.#g():this.#t=!1}return()=>{this.#c?.remove()}},jl)}#w(){try{this.#i=se(()=>this.#l(this.#e))}catch(e){this.error(e)}this.#t=!1}#x(){const e=this.#n.pending;e&&(this.#a=se(()=>e(this.#e)),ye.enqueue(()=>{var n=this.#_();this.#i=this.#p(()=>(ye.ensure(),se(()=>this.#l(n)))),this.#h>0?this.#g():(Nn(this.#a,()=>{this.#a=null}),this.#t=!1)}))}#_(){var e=this.#e;return this.#t&&(this.#c=Ge(),this.#e.before(this.#c),e=this.#c),e}is_pending(){return this.#t||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(e){var n=at,r=it,i=dt;be(this.#s),Bt(this.#s),In(this.#s.ctx);try{return e()}catch(s){return ja(s),null}finally{be(n),Bt(r),In(i)}}#g(){const e=this.#n.pending;this.#i!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#c),ao(this.#i,this.#u)),this.#a===null&&(this.#a=se(()=>e(this.#e)))}#m(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(e);return}this.#h+=e,this.#h===0&&(this.#t=!1,this.#a&&Nn(this.#a,()=>{this.#a=null}),this.#u&&(this.#e.before(this.#u),this.#u=null))}update_pending_count(e){this.#m(e),this.#f+=e,this.#d&&zn(this.#d,this.#f)}get_effect_pending(){return this.#y(),v(this.#d)}error(e){var n=this.#n.onerror;let r=this.#n.failed;if(this.#v||!n&&!r)throw e;this.#i&&(Wt(this.#i),this.#i=null),this.#a&&(Wt(this.#a),this.#a=null),this.#o&&(Wt(this.#o),this.#o=null);var i=!1,s=!1;const a=()=>{if(i){Il();return}i=!0,s&&Ml(),ye.ensure(),this.#f=0,this.#o!==null&&Nn(this.#o,()=>{this.#o=null}),this.#t=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,se(()=>this.#l(this.#e)))),this.#h>0?this.#g():this.#t=!1};var o=it;try{Bt(null),s=!0,n?.(e,a),s=!1}catch(l){On(l,this.#s&&this.#s.parent)}finally{Bt(o)}r&&Wn(()=>{this.#o=this.#p(()=>{ye.ensure(),this.#v=!0;try{return se(()=>{r(this.#e,()=>e,()=>a)})}catch(l){return On(l,this.#s.parent),null}finally{this.#v=!1}})})}}function Bl(t,e,n,r){const i=Un()?si:_e;if(n.length===0&&t.length===0){r(e.map(i));return}var s=ht,a=at,o=Ul();function l(){Promise.all(n.map(u=>Wl(u))).then(u=>{o();try{r([...e.map(i),...u])}catch(c){(a.f&Fe)===0&&On(c,a)}s?.deactivate(),zr()}).catch(u=>{On(u,a)})}t.length>0?Promise.all(t).then(()=>{o();try{return l()}finally{s?.deactivate(),zr()}}):l()}function Ul(){var t=at,e=it,n=dt,r=ht;return function(s=!0){be(t),Bt(e),In(n),s&&r?.activate()}}function zr(){be(null),Bt(null),In(null)}function si(t){var e=Nt|Yt,n=it!==null&&(it.f&Nt)!==0?it:null;return at!==null&&(at.f|=Hn),{ctx:dt,deps:null,effects:null,equals:Pa,f:e,fn:t,reactions:null,rv:0,v:zt,wv:0,parent:n??at,ac:null}}function Wl(t,e){let n=at;n===null&&pl();var r=n.b,i=void 0,s=vn(zt),a=!it,o=new Map;return ru(()=>{var l=Na();i=l.promise;try{Promise.resolve(t()).then(l.resolve,l.reject).then(()=>{u===ht&&u.committed&&u.deactivate(),zr()})}catch(f){l.reject(f),zr()}var u=ht;if(a){var c=!r.is_pending();r.update_pending_count(1),u.increment(c),o.get(u)?.reject(An),o.delete(u),o.set(u,l)}const h=(f,d=void 0)=>{if(u.activate(),d)d!==An&&(s.f|=Ue,zn(s,d));else{(s.f&Ue)!==0&&(s.f^=Ue),zn(s,f);for(const[g,_]of o){if(o.delete(g),g===u)break;_.reject(An)}}a&&(r.update_pending_count(-1),u.decrement(c))};l.promise.then(h,f=>h(null,f||"unknown"))}),ls(()=>{for(const l of o.values())l.reject(An)}),new Promise(l=>{function u(c){function h(){c===i?l(s):u(i)}c.then(h,h)}u(i)})}function Yl(t){const e=si(t);return oo(e),e}function _e(t){const e=si(t);return e.equals=La,e}function Ua(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)Wt(e[n])}}function Xl(t){for(var e=t.parent;e!==null;){if((e.f&Nt)===0)return(e.f&Fe)===0?e:null;e=e.parent}return null}function os(t){var e,n=at;be(Xl(t));try{t.f&=~hn,Ua(t),e=fo(t)}finally{be(n)}return e}function Wa(t){var e=os(t);if(t.equals(e)||(t.v=e,t.wv=uo()),!mn)if(Kt!==null)oi()&&Kt.set(t,t.v);else{var n=(t.f&ue)===0?$e:Tt;Ct(t,n)}}let Ii=new Set;const We=new Map;let Ya=!1;function vn(t,e){var n={f:0,v:t,reactions:null,equals:Pa,rv:0,wv:0};return n}function je(t,e){const n=vn(t);return oo(n),n}function pt(t,e=!1,n=!0){const r=vn(t);return e||(r.equals=La),Bn&&n&&dt!==null&&dt.l!==null&&(dt.l.s??=[]).push(r),r}function W(t,e,n=!1){it!==null&&(!we||(it.f&Ss)!==0)&&Un()&&(it.f&(Nt|De|ss|Ss))!==0&&!Re?.includes(t)&&El();let r=n?kn(e):e;return zn(t,r)}function zn(t,e){if(!t.equals(e)){var n=t.v;mn?We.set(t,e):We.set(t,n),t.v=e;var r=ye.ensure();r.capture(t,n),(t.f&Nt)!==0&&((t.f&Yt)!==0&&os(t),Ct(t,(t.f&ue)!==0?Tt:$e)),t.wv=uo(),Xa(t,Yt),Un()&&at!==null&&(at.f&Tt)!==0&&(at.f&(Pe|gn))===0&&(re===null?au([t]):re.push(t)),!r.is_fork&&Ii.size>0&&!Ya&&Gl()}return e}function Gl(){Ya=!1;var t=Ye;Pr(!0);const e=Array.from(Ii);try{for(const n of e)(n.f&Tt)!==0&&Ct(n,$e),Xn(n)&&Pn(n)}finally{Pr(t)}Ii.clear()}function ir(t){W(t,t.v+1)}function Xa(t,e){var n=t.reactions;if(n!==null)for(var r=Un(),i=n.length,s=0;s<i;s++){var a=n[s],o=a.f;if(!(!r&&a===at)){var l=(o&Yt)===0;if(l&&Ct(a,e),(o&Nt)!==0){var u=a;Kt?.delete(u),(o&hn)===0&&(o&ue&&(a.f|=hn),Xa(u,$e))}else l&&((o&De)!==0&&Te!==null&&Te.add(a),dn(a))}}}function kn(t){if(typeof t!="object"||t===null||un in t)return t;const e=ns(t);if(e!==ul&&e!==cl)return t;var n=new Map,r=Sa(t),i=je(0),s=cn,a=o=>{if(cn===s)return o();var l=it,u=cn;Bt(null),Rs(s);var c=o();return Bt(l),Rs(u),c};return r&&n.set("length",je(t.length)),new Proxy(t,{defineProperty(o,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&bl();var c=n.get(l);return c===void 0?c=a(()=>{var h=je(u.value);return n.set(l,h),h}):W(c,u.value,!0),!0},deleteProperty(o,l){var u=n.get(l);if(u===void 0){if(l in o){const c=a(()=>je(zt));n.set(l,c),ir(i)}}else W(u,zt),ir(i);return!0},get(o,l,u){if(l===un)return t;var c=n.get(l),h=l in o;if(c===void 0&&(!h||Cn(o,l)?.writable)&&(c=a(()=>{var d=kn(h?o[l]:zt),g=je(d);return g}),n.set(l,c)),c!==void 0){var f=v(c);return f===zt?void 0:f}return Reflect.get(o,l,u)},getOwnPropertyDescriptor(o,l){var u=Reflect.getOwnPropertyDescriptor(o,l);if(u&&"value"in u){var c=n.get(l);c&&(u.value=v(c))}else if(u===void 0){var h=n.get(l),f=h?.v;if(h!==void 0&&f!==zt)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return u},has(o,l){if(l===un)return!0;var u=n.get(l),c=u!==void 0&&u.v!==zt||Reflect.has(o,l);if(u!==void 0||at!==null&&(!c||Cn(o,l)?.writable)){u===void 0&&(u=a(()=>{var f=c?kn(o[l]):zt,d=je(f);return d}),n.set(l,u));var h=v(u);if(h===zt)return!1}return c},set(o,l,u,c){var h=n.get(l),f=l in o;if(r&&l==="length")for(var d=u;d<h.v;d+=1){var g=n.get(d+"");g!==void 0?W(g,zt):d in o&&(g=a(()=>je(zt)),n.set(d+"",g))}if(h===void 0)(!f||Cn(o,l)?.writable)&&(h=a(()=>je(void 0)),W(h,kn(u)),n.set(l,h));else{f=h.v!==zt;var _=a(()=>kn(u));W(h,_)}var p=Reflect.getOwnPropertyDescriptor(o,l);if(p?.set&&p.set.call(c,u),!f){if(r&&typeof l=="string"){var m=n.get("length"),y=Number(l);Number.isInteger(y)&&y>=m.v&&W(m,y+1)}ir(i)}return!0},ownKeys(o){v(i);var l=Reflect.ownKeys(o).filter(h=>{var f=n.get(h);return f===void 0||f.v!==zt});for(var[u,c]of n)c.v!==zt&&!(u in o)&&l.push(u);return l},setPrototypeOf(){$l()}})}var Cs,Ga,Ka,Qa;function Kl(){if(Cs===void 0){Cs=window,Ga=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;Ka=Cn(e,"firstChild").get,Qa=Cn(e,"nextSibling").get,ks(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),ks(n)&&(n.__t=void 0)}}function Ge(t=""){return document.createTextNode(t)}function Dn(t){return Ka.call(t)}function cr(t){return Qa.call(t)}function F(t,e){return Dn(t)}function nn(t,e=!1){{var n=Dn(t);return n instanceof Comment&&n.data===""?cr(n):n}}function tt(t,e=1,n=!1){let r=t;for(;e--;)r=cr(r);return r}function Ql(t){t.textContent=""}function Za(){return!1}let Ns=!1;function Zl(){Ns||(Ns=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function ai(t){var e=it,n=at;Bt(null),be(null);try{return t()}finally{Bt(e),be(n)}}function Jl(t,e,n,r=n){t.addEventListener(e,()=>ai(n));const i=t.__on_r;i?t.__on_r=()=>{i(),r(!0)}:t.__on_r=()=>r(!0),Zl()}function Ja(t){at===null&&(it===null&&ml(),_l()),mn&&gl()}function tu(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Ee(t,e,n){var r=at;r!==null&&(r.f&Qt)!==0&&(t|=Qt);var i={ctx:dt,deps:null,nodes_start:null,nodes_end:null,f:t|Yt|ue,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Pn(i),i.f|=is}catch(o){throw Wt(i),o}else e!==null&&dn(i);var s=i;if(n&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&Hn)===0&&(s=s.first,(t&De)!==0&&(t&Rn)!==0&&s!==null&&(s.f|=Rn)),s!==null&&(s.parent=r,r!==null&&tu(s,r),it!==null&&(it.f&Nt)!==0&&(t&gn)===0)){var a=it;(a.effects??=[]).push(s)}return i}function oi(){return it!==null&&!we}function ls(t){const e=Ee(ni,null,!1);return Ct(e,Tt),e.teardown=t,e}function Oi(t){Ja();var e=at.f,n=!it&&(e&Pe)!==0&&(e&is)===0;if(n){var r=dt;(r.e??=[]).push(t)}else return to(t)}function to(t){return Ee(rs|Ra,t,!1)}function eu(t){return Ja(),Ee(ni|Ra,t,!0)}function nu(t){ye.ensure();const e=Ee(gn|Hn,t,!0);return(n={})=>new Promise(r=>{n.outro?Nn(e,()=>{Wt(e),r(void 0)}):(Wt(e),r(void 0))})}function Dr(t){return Ee(rs,t,!1)}function Et(t,e){var n=dt,r={effect:null,ran:!1,deps:t};n.l.$.push(r),r.effect=Yn(()=>{t(),!r.ran&&(r.ran=!0,O(e))})}function _n(){var t=dt;Yn(()=>{for(var e of t.l.$){e.deps();var n=e.effect;(n.f&Tt)!==0&&Ct(n,$e),Xn(n)&&Pn(n),e.ran=!1}})}function ru(t){return Ee(ss|Hn,t,!0)}function Yn(t,e=0){return Ee(ni|e,t,!0)}function ft(t,e=[],n=[],r=[]){Bl(r,e,n,i=>{Ee(ni,()=>t(...i.map(v)),!0)})}function li(t,e=0){var n=Ee(De|e,t,!0);return n}function se(t){return Ee(Pe|Hn,t,!0)}function eo(t){var e=t.teardown;if(e!==null){const n=mn,r=it;Fs(!0),Bt(null);try{e.call(null)}finally{Fs(n),Bt(r)}}}function no(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const i=n.ac;i!==null&&ai(()=>{i.abort(An)});var r=n.next;(n.f&gn)!==0?n.parent=null:Wt(n,e),n=r}}function iu(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&Pe)===0&&Wt(e),e=n}}function Wt(t,e=!0){var n=!1;(e||(t.f&Fa)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(su(t.nodes_start,t.nodes_end),n=!0),no(t,e&&!n),Lr(t,0),Ct(t,Fe);var r=t.transitions;if(r!==null)for(const s of r)s.stop();eo(t);var i=t.parent;i!==null&&i.first!==null&&ro(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function su(t,e){for(;t!==null;){var n=t===e?null:cr(t);t.remove(),t=n}}function ro(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Nn(t,e,n=!0){var r=[];us(t,r,!0),io(r,()=>{n&&Wt(t),e&&e()})}function io(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var i of t)i.out(r)}else e()}function us(t,e,n){if((t.f&Qt)===0){if(t.f^=Qt,t.transitions!==null)for(const a of t.transitions)(a.is_global||n)&&e.push(a);for(var r=t.first;r!==null;){var i=r.next,s=(r.f&Rn)!==0||(r.f&Pe)!==0&&(t.f&De)!==0;us(r,e,s?n:!1),r=i}}}function cs(t){so(t,!0)}function so(t,e){if((t.f&Qt)!==0){t.f^=Qt,(t.f&Tt)===0&&(Ct(t,Yt),dn(t));for(var n=t.first;n!==null;){var r=n.next,i=(n.f&Rn)!==0||(n.f&Pe)!==0;so(n,i?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}function ao(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var i=n===r?null:cr(n);e.append(n),n=i}}let Ye=!1;function Pr(t){Ye=t}let mn=!1;function Fs(t){mn=t}let it=null,we=!1;function Bt(t){it=t}let at=null;function be(t){at=t}let Re=null;function oo(t){it!==null&&(Re===null?Re=[t]:Re.push(t))}let Vt=null,Xt=0,re=null;function au(t){re=t}let lo=1,sr=0,cn=sr;function Rs(t){cn=t}function uo(){return++lo}function Xn(t){var e=t.f;if((e&Yt)!==0)return!0;if(e&Nt&&(t.f&=~hn),(e&$e)!==0){var n=t.deps;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i];if(Xn(s)&&Wa(s),s.wv>t.wv)return!0}(e&ue)!==0&&Kt===null&&Ct(t,Tt)}return!1}function co(t,e,n=!0){var r=t.reactions;if(r!==null&&!Re?.includes(t))for(var i=0;i<r.length;i++){var s=r[i];(s.f&Nt)!==0?co(s,e,!1):e===s&&(n?Ct(s,Yt):(s.f&Tt)!==0&&Ct(s,$e),dn(s))}}function fo(t){var e=Vt,n=Xt,r=re,i=it,s=Re,a=dt,o=we,l=cn,u=t.f;Vt=null,Xt=0,re=null,it=(u&(Pe|gn))===0?t:null,Re=null,In(t.ctx),we=!1,cn=++sr,t.ac!==null&&(ai(()=>{t.ac.abort(An)}),t.ac=null);try{t.f|=Fi;var c=t.fn,h=c(),f=t.deps;if(Vt!==null){var d;if(Lr(t,Xt),f!==null&&Xt>0)for(f.length=Xt+Vt.length,d=0;d<Vt.length;d++)f[Xt+d]=Vt[d];else t.deps=f=Vt;if(Ye&&oi()&&(t.f&ue)!==0)for(d=Xt;d<f.length;d++)(f[d].reactions??=[]).push(t)}else f!==null&&Xt<f.length&&(Lr(t,Xt),f.length=Xt);if(Un()&&re!==null&&!we&&f!==null&&(t.f&(Nt|$e|Yt))===0)for(d=0;d<re.length;d++)co(re[d],t);return i!==null&&i!==t&&(sr++,re!==null&&(r===null?r=re:r.push(...re))),(t.f&Ue)!==0&&(t.f^=Ue),h}catch(g){return ja(g)}finally{t.f^=Fi,Vt=e,Xt=n,re=r,it=i,Re=s,In(a),we=o,cn=l}}function ou(t,e){let n=e.reactions;if(n!==null){var r=ll.call(n,t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(e.f&Nt)!==0&&(Vt===null||!Vt.includes(e))&&(Ct(e,$e),(e.f&ue)!==0&&(e.f^=ue,e.f&=~hn),Ua(e),Lr(e,0))}function Lr(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)ou(t,n[r])}function Pn(t){var e=t.f;if((e&Fe)===0){Ct(t,Tt);var n=at,r=Ye;at=t,Ye=!0;try{(e&De)!==0?iu(t):no(t),eo(t);var i=fo(t);t.teardown=typeof i=="function"?i:null,t.wv=lo;var s;Ni&&Ol&&(t.f&Yt)!==0&&t.deps}finally{Ye=r,at=n}}}async function zi(){await Promise.resolve(),Pl()}function v(t){var e=t.f,n=(e&Nt)!==0;if(it!==null&&!we){var r=at!==null&&(at.f&Fe)!==0;if(!r&&!Re?.includes(t)){var i=it.deps;if((it.f&Fi)!==0)t.rv<sr&&(t.rv=sr,Vt===null&&i!==null&&i[Xt]===t?Xt++:Vt===null?Vt=[t]:Vt.includes(t)||Vt.push(t));else{(it.deps??=[]).push(t);var s=t.reactions;s===null?t.reactions=[it]:s.includes(it)||s.push(it)}}}if(mn){if(We.has(t))return We.get(t);if(n){var a=t,o=a.v;return((a.f&Tt)===0&&a.reactions!==null||vo(a))&&(o=os(a)),We.set(a,o),o}}else if(n){if(a=t,Kt?.has(a))return Kt.get(a);Xn(a)&&Wa(a),Ye&&oi()&&(a.f&ue)===0&&ho(a)}else if(Kt?.has(t))return Kt.get(t);if((t.f&Ue)!==0)throw t.v;return t.v}function ho(t){if(t.deps!==null){t.f^=ue;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&Nt)!==0&&(e.f&ue)===0&&ho(e)}}function vo(t){if(t.v===zt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(We.has(e)||(e.f&Nt)!==0&&vo(e))return!0;return!1}function O(t){var e=we;try{return we=!0,t()}finally{we=e}}const lu=-7169;function Ct(t,e){t.f=t.f&lu|e}function T(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(un in t)Di(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&un in n&&Di(n)}}}function Di(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Di(t[r],e)}catch{}const n=ns(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=Ca(n);for(let i in r){const s=r[i].get;if(s)try{s.call(t)}catch{}}}}}const uu=["touchstart","touchmove"];function cu(t){return uu.includes(t)}const fu=new Set,Is=new Set;function hu(t,e,n,r={}){function i(s){if(r.capture||Zn.call(e,s),!s.cancelBubble)return ai(()=>n?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Wn(()=>{e.addEventListener(t,i,r)}):e.addEventListener(t,i,r),i}function wt(t,e,n,r,i){var s={capture:r,passive:i},a=hu(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&ls(()=>{e.removeEventListener(t,a,s)})}let Os=null;function Zn(t){var e=this,n=e.ownerDocument,r=t.type,i=t.composedPath?.()||[],s=i[0]||t.target;Os=t;var a=0,o=Os===t&&t.__root;if(o){var l=i.indexOf(o);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var u=i.indexOf(e);if(u===-1)return;l<=u&&(a=l)}if(s=i[a]||t.target,s!==e){Ta(t,"currentTarget",{configurable:!0,get(){return s||n}});var c=it,h=at;Bt(null),be(null);try{for(var f,d=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var _=s["__"+r];_!=null&&(!s.disabled||t.target===s)&&_.call(s,t)}catch(p){f?d.push(p):f=p}if(t.cancelBubble||g===e||g===null)break;s=g}if(f){for(let p of d)queueMicrotask(()=>{throw p});throw f}}finally{t.__root=e,delete t.currentTarget,Bt(c),be(h)}}}function po(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Vr(t,e){var n=at;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function Q(t,e){var n=(e&Nl)!==0,r=(e&Fl)!==0,i,s=!t.startsWith("<!>");return()=>{i===void 0&&(i=po(s?t:"<!>"+t),n||(i=Dn(i)));var a=r||Ga?document.importNode(i,!0):i.cloneNode(!0);if(n){var o=Dn(a),l=a.lastChild;Vr(o,l)}else Vr(a,a);return a}}function du(t,e,n="svg"){var r=!t.startsWith("<!>"),i=`<${n}>${r?t:"<!>"+t}</${n}>`,s;return()=>{if(!s){var a=po(i),o=Dn(a);s=Dn(o)}var l=s.cloneNode(!0);return Vr(l,l),l}}function go(t,e){return du(t,e,"svg")}function yn(){var t=document.createDocumentFragment(),e=document.createComment(""),n=Ge();return t.append(e,n),Vr(e,n),t}function B(t,e){t!==null&&t.before(e)}function mt(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function vu(t,e){return pu(t,e)}const wn=new Map;function pu(t,{target:e,anchor:n,props:r={},events:i,context:s,intro:a=!0}){Kl();var o=new Set,l=h=>{for(var f=0;f<h.length;f++){var d=h[f];if(!o.has(d)){o.add(d);var g=cu(d);e.addEventListener(d,Zn,{passive:g});var _=wn.get(d);_===void 0?(document.addEventListener(d,Zn,{passive:g}),wn.set(d,1)):wn.set(d,_+1)}}};l(es(fu)),Is.add(l);var u=void 0,c=nu(()=>{var h=n??e.appendChild(Ge());return ql(h,{pending:()=>{}},f=>{if(s){ce({});var d=dt;d.c=s}i&&(r.$$events=i),u=t(f,r)||{},s&&fe()}),()=>{for(var f of o){e.removeEventListener(f,Zn);var d=wn.get(f);--d===0?(document.removeEventListener(f,Zn),wn.delete(f)):wn.set(f,d)}Is.delete(l),h!==n&&h.parentNode?.removeChild(h)}});return gu.set(u,c),u}let gu=new WeakMap;class _o{anchor;#t=new Map;#e=new Map;#r=new Map;#n=new Set;#l=!0;constructor(e,n=!0){this.anchor=e,this.#l=n}#s=()=>{var e=ht;if(this.#t.has(e)){var n=this.#t.get(e),r=this.#e.get(n);if(r)cs(r),this.#n.delete(n);else{var i=this.#r.get(n);i&&(this.#e.set(n,i.effect),this.#r.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,a]of this.#t){if(this.#t.delete(s),s===e)break;const o=this.#r.get(a);o&&(Wt(o.effect),this.#r.delete(a))}for(const[s,a]of this.#e){if(s===n||this.#n.has(s))continue;const o=()=>{if(Array.from(this.#t.values()).includes(s)){var u=document.createDocumentFragment();ao(a,u),u.append(Ge()),this.#r.set(s,{effect:a,fragment:u})}else Wt(a);this.#n.delete(s),this.#e.delete(s)};this.#l||!r?(this.#n.add(s),Nn(a,o,!1)):o()}}};#i=e=>{this.#t.delete(e);const n=Array.from(this.#t.values());for(const[r,i]of this.#r)n.includes(r)||(Wt(i.effect),this.#r.delete(r))};ensure(e,n){var r=ht,i=Za();if(n&&!this.#e.has(e)&&!this.#r.has(e))if(i){var s=document.createDocumentFragment(),a=Ge();s.append(a),this.#r.set(e,{effect:se(()=>n(a)),fragment:s})}else this.#e.set(e,se(()=>n(this.anchor)));if(this.#t.set(r,e),i){for(const[o,l]of this.#e)o===e?r.skipped_effects.delete(l):r.skipped_effects.add(l);for(const[o,l]of this.#r)o===e?r.skipped_effects.delete(l.effect):r.skipped_effects.add(l.effect);r.oncommit(this.#s),r.ondiscard(this.#i)}else this.#s()}}function yt(t,e,n=!1){var r=new _o(t),i=n?Rn:0;function s(a,o){r.ensure(a,o)}li(()=>{var a=!1;e((o,l=!0)=>{a=!0,s(l,o)}),a||s(!1,null)},i)}function _u(t,e,n){var r=new _o(t),i=!Un();li(()=>{var s=e();i&&s!==null&&typeof s=="object"&&(s={}),r.ensure(s,n)})}function Ce(t,e){return e}function mu(t,e,n){for(var r=[],i=e.length,s=0;s<i;s++)us(e[s].e,r,!0);io(r,()=>{var a=r.length===0&&n!==null;if(a){var o=n,l=o.parentNode;Ql(l),l.append(o),t.items.clear(),ge(t,e[0].prev,e[i-1].next)}for(var u=0;u<i;u++){var c=e[u];a||(t.items.delete(c.k),ge(t,c.prev,c.next)),Wt(c.e,!a)}t.first===e[0]&&(t.first=e[0].prev)})}function me(t,e,n,r,i,s=null){var a=t,o=new Map,l=null,u=(e&Da)!==0,c=(e&Oa)!==0,h=(e&za)!==0;if(u){var f=t;a=f.appendChild(Ge())}var d=null,g=_e(()=>{var x=n();return Sa(x)?x:x==null?[]:es(x)}),_,p=!0;function m(){yu(w,_,a,e,r),d!==null&&(_.length===0?(d.fragment?(a.before(d.fragment),d.fragment=null):cs(d.effect),y.first=d.effect):Nn(d.effect,()=>{d=null}))}var y=li(()=>{_=v(g);for(var x=_.length,b=new Set,N=ht,z=null,H=Za(),D=0;D<x;D+=1){var P=_[D],E=r(P,D),R=p?null:o.get(E);R?(c&&zn(R.v,P),h?zn(R.i,D):R.i=D,H&&N.skipped_effects.delete(R.e)):(R=wu(p?a:null,z,P,E,D,i,e,n),p&&(R.o=!0,z===null?l=R:z.next=R,z=R),o.set(E,R)),b.add(E)}if(x===0&&s&&!d)if(p)d={fragment:null,effect:se(()=>s(a))};else{var $=document.createDocumentFragment(),I=Ge();$.append(I),d={fragment:$,effect:se(()=>s(I))}}if(!p)if(H){for(const[xt,Mt]of o)b.has(xt)||N.skipped_effects.add(Mt.e);N.oncommit(m),N.ondiscard(()=>{})}else m();v(g)}),w={effect:y,items:o,first:l};p=!1}function yu(t,e,n,r,i){var s=(r&Al)!==0,a=e.length,o=t.items,l=t.first,u,c=null,h,f=[],d=[],g,_,p,m;if(s)for(m=0;m<a;m+=1)g=e[m],_=i(g,m),p=o.get(_),p.a?.measure(),(h??=new Set).add(p);for(m=0;m<a;m+=1){if(g=e[m],_=i(g,m),p=o.get(_),t.first??=p,!p.o){p.o=!0;var y=c?c.next:l;ge(t,c,p),ge(t,p,y),yi(p,y,n),c=p,f=[],d=[],l=c.next;continue}if((p.e.f&Qt)!==0&&(cs(p.e),s&&(p.a?.unfix(),(h??=new Set).delete(p))),p!==l){if(u!==void 0&&u.has(p)){if(f.length<d.length){var w=d[0],x;c=w.prev;var b=f[0],N=f[f.length-1];for(x=0;x<f.length;x+=1)yi(f[x],w,n);for(x=0;x<d.length;x+=1)u.delete(d[x]);ge(t,b.prev,N.next),ge(t,c,b),ge(t,N,w),l=w,c=N,m-=1,f=[],d=[]}else u.delete(p),yi(p,l,n),ge(t,p.prev,p.next),ge(t,p,c===null?t.first:c.next),ge(t,c,p),c=p;continue}for(f=[],d=[];l!==null&&l.k!==_;)(l.e.f&Qt)===0&&(u??=new Set).add(l),d.push(l),l=l.next;if(l===null)continue;p=l}f.push(p),c=p,l=p.next}if(l!==null||u!==void 0){for(var z=u===void 0?[]:es(u);l!==null;)(l.e.f&Qt)===0&&z.push(l),l=l.next;var H=z.length;if(H>0){var D=(r&Da)!==0&&a===0?n:null;if(s){for(m=0;m<H;m+=1)z[m].a?.measure();for(m=0;m<H;m+=1)z[m].a?.fix()}mu(t,z,D)}}s&&Wn(()=>{if(h!==void 0)for(p of h)p.a?.apply()})}function wu(t,e,n,r,i,s,a,o){var l=(a&Oa)!==0,u=(a&kl)===0,c=l?u?pt(n,!1,!1):vn(n):n,h=(a&za)===0?i:vn(i),f={i:h,v:c,k:r,a:null,e:null,o:!1,prev:e,next:null};try{if(t===null){var d=document.createDocumentFragment();d.append(t=Ge())}return f.e=se(()=>s(t,c,h,o)),e!==null&&(e.next=f),f}finally{}}function yi(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==null&&s!==r;){var a=cr(s);i.before(s),s=a}}function ge(t,e,n){e===null?(t.first=n,t.effect.first=n&&n.e):(e.e.next&&(e.e.next.prev=null),e.next=n,e.e.next=n&&n.e),n===null?t.effect.last=e&&e.e:(n.e.prev&&(n.e.prev.next=null),n.prev=e,n.e.prev=e&&e.e)}function xu(t,e,n){Dr(()=>{var r=O(()=>e(t,n?.())||{});if(n&&r?.update){var i=!1,s={};Yn(()=>{var a=n();T(a),i&&as(s,a)&&(s=a,r.update(a))}),i=!0}if(r?.destroy)return()=>r.destroy()})}const zs=[...` 	
\r\fÂ \v\uFEFF`];function bu(t,e,n){var r=t==null?"":""+t;if(n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,a=0;(a=r.indexOf(i,a))>=0;){var o=a+s;(a===0||zs.includes(r[a-1]))&&(o===r.length||zs.includes(r[o]))?r=(a===0?"":r.substring(0,a))+r.substring(o+1):a=o}}return r===""?null:r}function $u(t,e){return t==null?null:String(t)}function Xe(t,e,n,r,i,s){var a=t.__className;if(a!==n||a===void 0){var o=bu(n,r,s);o==null?t.removeAttribute("class"):t.className=o,t.__className=n}else if(s&&i!==s)for(var l in s){var u=!!s[l];(i==null||u!==!!i[l])&&t.classList.toggle(l,u)}return s}function Ds(t,e,n,r){var i=t.__style;if(i!==e){var s=$u(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const Eu=Symbol("is custom element"),Mu=Symbol("is html");function Au(t,e){var n=fs(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Pi(t,e){var n=fs(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function Oe(t,e,n,r){var i=fs(t);i[e]!==(i[e]=n)&&(e==="loading"&&(t[vl]=n),n==null?t.removeAttribute(e):typeof n!="string"&&ku(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function fs(t){return t.__attributes??={[Eu]:t.nodeName.includes("-"),[Mu]:t.namespaceURI===Rl}}var Ps=new Map;function ku(t){var e=t.getAttribute("is")||t.nodeName,n=Ps.get(e);if(n)return n;Ps.set(e,n=[]);for(var r,i=t,s=Element.prototype;s!==i;){r=Ca(i);for(var a in r)r[a].set&&n.push(a);i=ns(i)}return n}function Su(t,e,n=e){var r=new WeakSet;Jl(t,"input",async i=>{var s=i?t.defaultValue:t.value;if(s=wi(t)?xi(s):s,n(s),ht!==null&&r.add(ht),await zi(),s!==(s=e())){var a=t.selectionStart,o=t.selectionEnd,l=t.value.length;if(t.value=s??"",o!==null){var u=t.value.length;a===o&&o===l&&u>l?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=a,t.selectionEnd=Math.min(o,u))}}}),O(e)==null&&t.value&&(n(wi(t)?xi(t.value):t.value),ht!==null&&r.add(ht)),Yn(()=>{var i=e();if(t===document.activeElement){var s=Tr??ht;if(r.has(s))return}wi(t)&&i===xi(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function wi(t){var e=t.type;return e==="number"||e==="range"}function xi(t){return t===""?null:+t}function Ls(t,e){return t===e||t?.[un]===e}function hs(t={},e,n,r){return Dr(()=>{var i,s;return Yn(()=>{i=s,s=[],O(()=>{t!==n(...s)&&(e(t,...s),i&&Ls(n(...i),t)&&e(null,...i))})}),()=>{Wn(()=>{s&&Ls(n(...s),t)&&e(null,...s)})}}),t}function Me(t=!1){const e=dt,n=e.l.u;if(!n)return;let r=()=>T(e.s);if(t){let i=0,s={};const a=si(()=>{let o=!1;const l=e.s;for(const u in l)l[u]!==s[u]&&(s[u]=l[u],o=!0);return o&&i++,i});r=()=>v(a)}n.b.length&&eu(()=>{Vs(e,r),Or(n.b)}),Oi(()=>{const i=O(()=>n.m.map(fl));return()=>{for(const s of i)typeof s=="function"&&s()}}),n.a.length&&Oi(()=>{Vs(e,r),Or(n.a)})}function Vs(t,e){if(t.l.s)for(const n of t.l.s)v(n);e()}function ds(t,e,n){if(t==null)return e(void 0),n&&n(void 0),Ne;const r=O(()=>t.subscribe(e,n));return r.unsubscribe?()=>r.unsubscribe():r}const xn=[];function Tu(t,e){return{subscribe:Jt(t,e).subscribe}}function Jt(t,e=Ne){let n=null;const r=new Set;function i(o){if(as(t,o)&&(t=o,n)){const l=!xn.length;for(const u of r)u[1](),xn.push(u,t);if(l){for(let u=0;u<xn.length;u+=2)xn[u][0](xn[u+1]);xn.length=0}}}function s(o){i(o(t))}function a(o,l=Ne){const u=[o,l];return r.add(u),r.size===1&&(n=e(i,s)||Ne),o(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:a}}function Ae(t,e,n){const r=!Array.isArray(t),i=r?[t]:t;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return Tu(n,(a,o)=>{let l=!1;const u=[];let c=0,h=Ne;const f=()=>{if(c)return;h();const g=e(r?u[0]:u,a,o);s?a(g):h=typeof g=="function"?g:Ne},d=i.map((g,_)=>ds(g,p=>{u[_]=p,c&=~(1<<_),l&&f()},()=>{c|=1<<_}));return l=!0,f(),function(){Or(d),h(),l=!1}})}function Cu(t){let e;return ds(t,n=>e=n)(),e}let mr=!1,Li=Symbol();function lt(t,e,n){const r=n[e]??={store:null,source:pt(void 0),unsubscribe:Ne};if(r.store!==t&&!(Li in n))if(r.unsubscribe(),r.store=t??null,t==null)r.source.v=void 0,r.unsubscribe=Ne;else{var i=!0;r.unsubscribe=ds(t,s=>{i?r.source.v=s:W(r.source,s)}),i=!1}return t&&Li in n?Cu(t):v(r.source)}function Nu(t,e,n){let r=n[e];return r&&r.store!==t&&(r.unsubscribe(),r.unsubscribe=Ne),t}function Qe(){const t={};function e(){ls(()=>{for(var n in t)t[n].unsubscribe();Ta(t,Li,{enumerable:!1,value:!0})})}return[t,e]}function Fu(t){var e=mr;try{return mr=!1,[t(),mr]}finally{mr=e}}function Dt(t,e,n,r){var i=!Bn||(n&Sl)!==0,s=(n&Cl)!==0,a=r,o=!0,l=()=>(o&&(o=!1,a=r),a),u;{var c=un in t||dl in t;u=Cn(t,e)?.set??(c&&e in t?y=>t[e]=y:void 0)}var h,f=!1;[h,f]=Fu(()=>t[e]),h===void 0&&r!==void 0&&(h=l(),u&&(i&&xl(),u(h)));var d;if(i?d=()=>{var y=t[e];return y===void 0?l():(o=!0,y)}:d=()=>{var y=t[e];return y!==void 0&&(a=void 0),y===void 0?a:y},i&&(n&Tl)===0)return d;if(u){var g=t.$$legacy;return(function(y,w){return arguments.length>0?((!i||!w||g||f)&&u(w?d():y),y):d()})}var _=!1,p=_e(()=>(_=!1,d()));v(p);var m=at;return(function(y,w){if(arguments.length>0){const x=w?v(p):i&&s?kn(y):y;return W(p,x),_=!0,a!==void 0&&(a=x),y}return mn&&_||(m.f&Fe)!==0?p.v:v(p)})}function vs(t){dt===null&&Ia(),Bn&&dt.l!==null?mo(dt).m.push(t):Oi(()=>{const e=O(t);if(typeof e=="function")return e})}function Ru(t){dt===null&&Ia(),dt.l===null&&wl(),mo(dt).a.push(t)}function mo(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const Iu="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Iu);zl();function Cr(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Ou(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function yo(t){let e,n,r;t.length!==2?(e=Cr,n=(o,l)=>Cr(t(o),l),r=(o,l)=>t(o)-l):(e=t===Cr||t===Ou?t:zu,n=t,r=t);function i(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const h=u+c>>>1;n(o[h],l)<0?u=h+1:c=h}while(u<c)}return u}function s(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const h=u+c>>>1;n(o[h],l)<=0?u=h+1:c=h}while(u<c)}return u}function a(o,l,u=0,c=o.length){const h=i(o,l,u,c-1);return h>u&&r(o[h-1],l)>-r(o[h],l)?h-1:h}return{left:i,center:a,right:s}}function zu(){return 0}function Du(t){return t===null?NaN:+t}const Pu=yo(Cr),Lu=Pu.right;yo(Du).center;const Vu=Math.sqrt(50),ju=Math.sqrt(10),qu=Math.sqrt(2);function jr(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=Vu?10:s>=ju?5:s>=qu?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/a,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*a,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=n&&n<2?jr(t,e,n*2):[o,l,u]}function Hu(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?jr(e,t,n):jr(t,e,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let u=0;u<o;++u)l[u]=(s-u)/-a;else for(let u=0;u<o;++u)l[u]=(s-u)*a;else if(a<0)for(let u=0;u<o;++u)l[u]=(i+u)/-a;else for(let u=0;u<o;++u)l[u]=(i+u)*a;return l}function Vi(t,e,n){return e=+e,t=+t,n=+n,jr(t,e,n)[2]}function Bu(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Vi(e,t,n):Vi(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function Uu(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}var Wu={value:()=>{}};function wo(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Nr(n)}function Nr(t){this._=t}function Yu(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Nr.prototype=wo.prototype={constructor:Nr,on:function(t,e){var n=this._,r=Yu(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=Xu(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=js(n[i],t.name,e);else if(e==null)for(i in n)n[i]=js(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Nr(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function Xu(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function js(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=Wu,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var ji="http://www.w3.org/1999/xhtml";const qs={svg:"http://www.w3.org/2000/svg",xhtml:ji,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function ui(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),qs.hasOwnProperty(e)?{space:qs[e],local:t}:t}function Gu(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===ji&&e.documentElement.namespaceURI===ji?e.createElement(t):e.createElementNS(n,t)}}function Ku(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function xo(t){var e=ui(t);return(e.local?Ku:Gu)(e)}function Qu(){}function ps(t){return t==null?Qu:function(){return this.querySelector(t)}}function Zu(t){typeof t!="function"&&(t=ps(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=new Array(a),l,u,c=0;c<a;++c)(l=s[c])&&(u=t.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),o[c]=u);return new Zt(r,this._parents)}function Ju(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function tc(){return[]}function bo(t){return t==null?tc:function(){return this.querySelectorAll(t)}}function ec(t){return function(){return Ju(t.apply(this,arguments))}}function nc(t){typeof t=="function"?t=ec(t):t=bo(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],o=a.length,l,u=0;u<o;++u)(l=a[u])&&(r.push(t.call(l,l.__data__,u,a)),i.push(l));return new Zt(r,i)}function $o(t){return function(){return this.matches(t)}}function Eo(t){return function(e){return e.matches(t)}}var rc=Array.prototype.find;function ic(t){return function(){return rc.call(this.children,t)}}function sc(){return this.firstElementChild}function ac(t){return this.select(t==null?sc:ic(typeof t=="function"?t:Eo(t)))}var oc=Array.prototype.filter;function lc(){return Array.from(this.children)}function uc(t){return function(){return oc.call(this.children,t)}}function cc(t){return this.selectAll(t==null?lc:uc(typeof t=="function"?t:Eo(t)))}function fc(t){typeof t!="function"&&(t=$o(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,u=0;u<a;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&o.push(l);return new Zt(r,this._parents)}function Mo(t){return new Array(t.length)}function hc(){return new Zt(this._enter||this._groups.map(Mo),this._parents)}function qr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}qr.prototype={constructor:qr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function dc(t){return function(){return t}}function vc(t,e,n,r,i,s){for(var a=0,o,l=e.length,u=s.length;a<u;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new qr(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function pc(t,e,n,r,i,s,a){var o,l,u=new Map,c=e.length,h=s.length,f=new Array(c),d;for(o=0;o<c;++o)(l=e[o])&&(f[o]=d=a.call(l,l.__data__,o,e)+"",u.has(d)?i[o]=l:u.set(d,l));for(o=0;o<h;++o)d=a.call(t,s[o],o,s)+"",(l=u.get(d))?(r[o]=l,l.__data__=s[o],u.delete(d)):n[o]=new qr(t,s[o]);for(o=0;o<c;++o)(l=e[o])&&u.get(f[o])===l&&(i[o]=l)}function gc(t){return t.__data__}function _c(t,e){if(!arguments.length)return Array.from(this,gc);var n=e?pc:vc,r=this._parents,i=this._groups;typeof t!="function"&&(t=dc(t));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],h=i[u],f=h.length,d=mc(t.call(c,c&&c.__data__,u,r)),g=d.length,_=o[u]=new Array(g),p=a[u]=new Array(g),m=l[u]=new Array(f);n(c,h,_,p,m,d,e);for(var y=0,w=0,x,b;y<g;++y)if(x=_[y]){for(y>=w&&(w=y+1);!(b=p[w])&&++w<g;);x._next=b||null}}return a=new Zt(a,r),a._enter=o,a._exit=l,a}function mc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function yc(){return new Zt(this._exit||this._groups.map(Mo),this._parents)}function wc(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function xc(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var u=n[l],c=r[l],h=u.length,f=o[l]=new Array(h),d,g=0;g<h;++g)(d=u[g]||c[g])&&(f[g]=d);for(;l<i;++l)o[l]=n[l];return new Zt(o,this._parents)}function bc(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function $c(t){t||(t=Ec);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),u,c=0;c<o;++c)(u=a[c])&&(l[c]=u);l.sort(e)}return new Zt(i,this._parents).order()}function Ec(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Mc(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Ac(){return Array.from(this)}function kc(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function Sc(){let t=0;for(const e of this)++t;return t}function Tc(){return!this.node()}function Cc(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function Nc(t){return function(){this.removeAttribute(t)}}function Fc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Rc(t,e){return function(){this.setAttribute(t,e)}}function Ic(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Oc(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function zc(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Dc(t,e){var n=ui(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?Fc:Nc:typeof e=="function"?n.local?zc:Oc:n.local?Ic:Rc)(n,e))}function Ao(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Pc(t){return function(){this.style.removeProperty(t)}}function Lc(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Vc(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function jc(t,e,n){return arguments.length>1?this.each((e==null?Pc:typeof e=="function"?Vc:Lc)(t,e,n??"")):Ln(this.node(),t)}function Ln(t,e){return t.style.getPropertyValue(e)||Ao(t).getComputedStyle(t,null).getPropertyValue(e)}function qc(t){return function(){delete this[t]}}function Hc(t,e){return function(){this[t]=e}}function Bc(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function Uc(t,e){return arguments.length>1?this.each((e==null?qc:typeof e=="function"?Bc:Hc)(t,e)):this.node()[t]}function ko(t){return t.trim().split(/^|\s+/)}function gs(t){return t.classList||new So(t)}function So(t){this._node=t,this._names=ko(t.getAttribute("class")||"")}So.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function To(t,e){for(var n=gs(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Co(t,e){for(var n=gs(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function Wc(t){return function(){To(this,t)}}function Yc(t){return function(){Co(this,t)}}function Xc(t,e){return function(){(e.apply(this,arguments)?To:Co)(this,t)}}function Gc(t,e){var n=ko(t+"");if(arguments.length<2){for(var r=gs(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?Xc:e?Wc:Yc)(n,e))}function Kc(){this.textContent=""}function Qc(t){return function(){this.textContent=t}}function Zc(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Jc(t){return arguments.length?this.each(t==null?Kc:(typeof t=="function"?Zc:Qc)(t)):this.node().textContent}function tf(){this.innerHTML=""}function ef(t){return function(){this.innerHTML=t}}function nf(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function rf(t){return arguments.length?this.each(t==null?tf:(typeof t=="function"?nf:ef)(t)):this.node().innerHTML}function sf(){this.nextSibling&&this.parentNode.appendChild(this)}function af(){return this.each(sf)}function of(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function lf(){return this.each(of)}function uf(t){var e=typeof t=="function"?t:xo(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function cf(){return null}function ff(t,e){var n=typeof t=="function"?t:xo(t),r=e==null?cf:typeof e=="function"?e:ps(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function hf(){var t=this.parentNode;t&&t.removeChild(this)}function df(){return this.each(hf)}function vf(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function pf(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function gf(t){return this.select(t?pf:vf)}function _f(t){return arguments.length?this.property("__data__",t):this.node().__data__}function mf(t){return function(e){t.call(this,e,this.__data__)}}function yf(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function wf(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function xf(t,e,n){return function(){var r=this.__on,i,s=mf(e);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function bf(t,e,n){var r=yf(t+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,c;l<u;++l)for(i=0,c=o[l];i<s;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(o=e?xf:wf,i=0;i<s;++i)this.each(o(r[i],e,n));return this}function No(t,e,n){var r=Ao(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function $f(t,e){return function(){return No(this,t,e)}}function Ef(t,e){return function(){return No(this,t,e.apply(this,arguments))}}function Mf(t,e){return this.each((typeof e=="function"?Ef:$f)(t,e))}function*Af(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var Fo=[null];function Zt(t,e){this._groups=t,this._parents=e}function fr(){return new Zt([[document.documentElement]],Fo)}function kf(){return this}Zt.prototype=fr.prototype={constructor:Zt,select:Zu,selectAll:nc,selectChild:ac,selectChildren:cc,filter:fc,data:_c,enter:hc,exit:yc,join:wc,merge:xc,selection:kf,order:bc,sort:$c,call:Mc,nodes:Ac,node:kc,size:Sc,empty:Tc,each:Cc,attr:Dc,style:jc,property:Uc,classed:Gc,text:Jc,html:rf,raise:af,lower:lf,append:uf,insert:ff,remove:df,clone:gf,datum:_f,on:bf,dispatch:Mf,[Symbol.iterator]:Af};function rn(t){return typeof t=="string"?new Zt([[document.querySelector(t)]],[document.documentElement]):new Zt([[t]],Fo)}function _s(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Ro(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function hr(){}var ar=.7,Hr=1/ar,Fn="\\s*([+-]?\\d+)\\s*",or="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",xe="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Sf=/^#([0-9a-f]{3,8})$/,Tf=new RegExp(`^rgb\\(${Fn},${Fn},${Fn}\\)$`),Cf=new RegExp(`^rgb\\(${xe},${xe},${xe}\\)$`),Nf=new RegExp(`^rgba\\(${Fn},${Fn},${Fn},${or}\\)$`),Ff=new RegExp(`^rgba\\(${xe},${xe},${xe},${or}\\)$`),Rf=new RegExp(`^hsl\\(${or},${xe},${xe}\\)$`),If=new RegExp(`^hsla\\(${or},${xe},${xe},${or}\\)$`),Hs={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};_s(hr,Ke,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Bs,formatHex:Bs,formatHex8:Of,formatHsl:zf,formatRgb:Us,toString:Us});function Bs(){return this.rgb().formatHex()}function Of(){return this.rgb().formatHex8()}function zf(){return Io(this).formatHsl()}function Us(){return this.rgb().formatRgb()}function Ke(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Sf.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Ws(e):n===3?new Ut(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?yr(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?yr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Tf.exec(t))?new Ut(e[1],e[2],e[3],1):(e=Cf.exec(t))?new Ut(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Nf.exec(t))?yr(e[1],e[2],e[3],e[4]):(e=Ff.exec(t))?yr(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Rf.exec(t))?Gs(e[1],e[2]/100,e[3]/100,1):(e=If.exec(t))?Gs(e[1],e[2]/100,e[3]/100,e[4]):Hs.hasOwnProperty(t)?Ws(Hs[t]):t==="transparent"?new Ut(NaN,NaN,NaN,0):null}function Ws(t){return new Ut(t>>16&255,t>>8&255,t&255,1)}function yr(t,e,n,r){return r<=0&&(t=e=n=NaN),new Ut(t,e,n,r)}function Df(t){return t instanceof hr||(t=Ke(t)),t?(t=t.rgb(),new Ut(t.r,t.g,t.b,t.opacity)):new Ut}function qi(t,e,n,r){return arguments.length===1?Df(t):new Ut(t,e,n,r??1)}function Ut(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}_s(Ut,qi,Ro(hr,{brighter(t){return t=t==null?Hr:Math.pow(Hr,t),new Ut(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ar:Math.pow(ar,t),new Ut(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Ut(fn(this.r),fn(this.g),fn(this.b),Br(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:Ys,formatHex:Ys,formatHex8:Pf,formatRgb:Xs,toString:Xs}));function Ys(){return`#${ln(this.r)}${ln(this.g)}${ln(this.b)}`}function Pf(){return`#${ln(this.r)}${ln(this.g)}${ln(this.b)}${ln((isNaN(this.opacity)?1:this.opacity)*255)}`}function Xs(){const t=Br(this.opacity);return`${t===1?"rgb(":"rgba("}${fn(this.r)}, ${fn(this.g)}, ${fn(this.b)}${t===1?")":`, ${t})`}`}function Br(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function fn(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function ln(t){return t=fn(t),(t<16?"0":"")+t.toString(16)}function Gs(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new le(t,e,n,r)}function Io(t){if(t instanceof le)return new le(t.h,t.s,t.l,t.opacity);if(t instanceof hr||(t=Ke(t)),!t)return new le;if(t instanceof le)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new le(a,o,l,t.opacity)}function Oo(t,e,n,r){return arguments.length===1?Io(t):new le(t,e,n,r??1)}function le(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}_s(le,Oo,Ro(hr,{brighter(t){return t=t==null?Hr:Math.pow(Hr,t),new le(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ar:Math.pow(ar,t),new le(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Ut(bi(t>=240?t-240:t+120,i,r),bi(t,i,r),bi(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new le(Ks(this.h),wr(this.s),wr(this.l),Br(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Br(this.opacity);return`${t===1?"hsl(":"hsla("}${Ks(this.h)}, ${wr(this.s)*100}%, ${wr(this.l)*100}%${t===1?")":`, ${t})`}`}}));function Ks(t){return t=(t||0)%360,t<0?t+360:t}function wr(t){return Math.max(0,Math.min(1,t||0))}function bi(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const ms=t=>()=>t;function Lf(t,e){return function(n){return t+n*e}}function Vf(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function jf(t){return(t=+t)==1?zo:function(e,n){return n-e?Vf(e,n,t):ms(isNaN(e)?n:e)}}function zo(t,e){var n=e-t;return n?Lf(t,n):ms(isNaN(t)?e:t)}const Ur=(function t(e){var n=jf(e);function r(i,s){var a=n((i=qi(i)).r,(s=qi(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),u=zo(i.opacity,s.opacity);return function(c){return i.r=a(c),i.g=o(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r})(1);function qf(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Hf(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function Bf(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=ys(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function Uf(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function oe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function Wf(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=ys(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Hi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,$i=new RegExp(Hi.source,"g");function Yf(t){return function(){return t}}function Xf(t){return function(e){return t(e)+""}}function Do(t,e){var n=Hi.lastIndex=$i.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=Hi.exec(t))&&(i=$i.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:oe(r,i)})),n=$i.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?Xf(l[0].x):Yf(e):(e=l.length,function(u){for(var c=0,h;c<e;++c)o[(h=l[c]).i]=h.x(u);return o.join("")})}function ys(t,e){var n=typeof e,r;return e==null||n==="boolean"?ms(e):(n==="number"?oe:n==="string"?(r=Ke(e))?(e=r,Ur):Do:e instanceof Ke?Ur:e instanceof Date?Uf:Hf(e)?qf:Array.isArray(e)?Bf:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?Wf:oe)(t,e)}function Gf(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var Qs=180/Math.PI,Bi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Po(t,e,n,r,i,s){var a,o,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*Qs,skewX:Math.atan(l)*Qs,scaleX:a,scaleY:o}}var xr;function Kf(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?Bi:Po(e.a,e.b,e.c,e.d,e.e,e.f)}function Qf(t){return t==null||(xr||(xr=document.createElementNS("http://www.w3.org/2000/svg","g")),xr.setAttribute("transform",t),!(t=xr.transform.baseVal.consolidate()))?Bi:(t=t.matrix,Po(t.a,t.b,t.c,t.d,t.e,t.f))}function Lo(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,h,f,d,g){if(u!==h||c!==f){var _=d.push("translate(",null,e,null,n);g.push({i:_-4,x:oe(u,h)},{i:_-2,x:oe(c,f)})}else(h||f)&&d.push("translate("+h+e+f+n)}function a(u,c,h,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:oe(u,c)})):c&&h.push(i(h)+"rotate("+c+r)}function o(u,c,h,f){u!==c?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:oe(u,c)}):c&&h.push(i(h)+"skewX("+c+r)}function l(u,c,h,f,d,g){if(u!==h||c!==f){var _=d.push(i(d)+"scale(",null,",",null,")");g.push({i:_-4,x:oe(u,h)},{i:_-2,x:oe(c,f)})}else(h!==1||f!==1)&&d.push(i(d)+"scale("+h+","+f+")")}return function(u,c){var h=[],f=[];return u=t(u),c=t(c),s(u.translateX,u.translateY,c.translateX,c.translateY,h,f),a(u.rotate,c.rotate,h,f),o(u.skewX,c.skewX,h,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,f),u=c=null,function(d){for(var g=-1,_=f.length,p;++g<_;)h[(p=f[g]).i]=p.x(d);return h.join("")}}}var Zf=Lo(Kf,"px, ","px)","deg)"),Jf=Lo(Qf,", ",")",")"),Vn=0,Jn=0,Qn=0,Vo=1e3,Wr,tr,Yr=0,pn=0,ci=0,lr=typeof performance=="object"&&performance.now?performance:Date,jo=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function ws(){return pn||(jo(th),pn=lr.now()+ci)}function th(){pn=0}function Xr(){this._call=this._time=this._next=null}Xr.prototype=qo.prototype={constructor:Xr,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?ws():+n)+(e==null?0:+e),!this._next&&tr!==this&&(tr?tr._next=this:Wr=this,tr=this),this._call=t,this._time=n,Ui()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ui())}};function qo(t,e,n){var r=new Xr;return r.restart(t,e,n),r}function eh(){ws(),++Vn;for(var t=Wr,e;t;)(e=pn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Vn}function Zs(){pn=(Yr=lr.now())+ci,Vn=Jn=0;try{eh()}finally{Vn=0,rh(),pn=0}}function nh(){var t=lr.now(),e=t-Yr;e>Vo&&(ci-=e,Yr=t)}function rh(){for(var t,e=Wr,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:Wr=n);tr=t,Ui(r)}function Ui(t){if(!Vn){Jn&&(Jn=clearTimeout(Jn));var e=t-pn;e>24?(t<1/0&&(Jn=setTimeout(Zs,t-lr.now()-ci)),Qn&&(Qn=clearInterval(Qn))):(Qn||(Yr=lr.now(),Qn=setInterval(nh,Vo)),Vn=1,jo(Zs))}}function Js(t,e,n){var r=new Xr;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var ih=wo("start","end","cancel","interrupt"),sh=[],Ho=0,ta=1,Wi=2,Fr=3,ea=4,Yi=5,Rr=6;function fi(t,e,n,r,i,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;ah(t,n,{name:e,index:r,group:i,on:ih,tween:sh,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Ho})}function xs(t,e){var n=he(t,e);if(n.state>Ho)throw new Error("too late; already scheduled");return n}function ke(t,e){var n=he(t,e);if(n.state>Fr)throw new Error("too late; already running");return n}function he(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function ah(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=qo(s,0,n.time);function s(u){n.state=ta,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,h,f,d;if(n.state!==ta)return l();for(c in r)if(d=r[c],d.name===n.name){if(d.state===Fr)return Js(a);d.state===ea?(d.state=Rr,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[c]):+c<e&&(d.state=Rr,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[c])}if(Js(function(){n.state===Fr&&(n.state=ea,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=Wi,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Wi){for(n.state=Fr,i=new Array(f=n.tween.length),c=0,h=-1;c<f;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function o(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Yi,1),h=-1,f=i.length;++h<f;)i[h].call(t,c);n.state===Yi&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Rr,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function oh(t,e){var n=t.__transition,r,i,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){s=!1;continue}i=r.state>Wi&&r.state<Yi,r.state=Rr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}s&&delete t.__transition}}function lh(t){return this.each(function(){oh(this,t)})}function uh(t,e){var n,r;return function(){var i=ke(this,t),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function ch(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=ke(this,t),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=o;break}l===u&&i.push(o)}s.tween=i}}function fh(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=he(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?uh:ch)(n,t,e))}function bs(t,e,n){var r=t._id;return t.each(function(){var i=ke(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return he(i,r).value[e]}}function Bo(t,e){var n;return(typeof e=="number"?oe:e instanceof Ke?Ur:(n=Ke(e))?(e=n,Ur):Do)(t,e)}function hh(t){return function(){this.removeAttribute(t)}}function dh(t){return function(){this.removeAttributeNS(t.space,t.local)}}function vh(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===r?s:s=e(r=a,n)}}function ph(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?s:s=e(r=a,n)}}function gh(t,e,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o)))}}function _h(t,e,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o)))}}function mh(t,e){var n=ui(t),r=n==="transform"?Jf:Bo;return this.attrTween(t,typeof e=="function"?(n.local?_h:gh)(n,r,bs(this,"attr."+t,e)):e==null?(n.local?dh:hh)(n):(n.local?ph:vh)(n,r,e))}function yh(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function wh(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function xh(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&wh(t,s)),n}return i._value=e,i}function bh(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&yh(t,s)),n}return i._value=e,i}function $h(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=ui(t);return this.tween(n,(r.local?xh:bh)(r,e))}function Eh(t,e){return function(){xs(this,t).delay=+e.apply(this,arguments)}}function Mh(t,e){return e=+e,function(){xs(this,t).delay=e}}function Ah(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Eh:Mh)(e,t)):he(this.node(),e).delay}function kh(t,e){return function(){ke(this,t).duration=+e.apply(this,arguments)}}function Sh(t,e){return e=+e,function(){ke(this,t).duration=e}}function Th(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?kh:Sh)(e,t)):he(this.node(),e).duration}function Ch(t,e){if(typeof e!="function")throw new Error;return function(){ke(this,t).ease=e}}function Nh(t){var e=this._id;return arguments.length?this.each(Ch(e,t)):he(this.node(),e).ease}function Fh(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;ke(this,t).ease=n}}function Rh(t){if(typeof t!="function")throw new Error;return this.each(Fh(this._id,t))}function Ih(t){typeof t!="function"&&(t=$o(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,u=0;u<a;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&o.push(l);return new ze(r,this._parents,this._name,this._id)}function Oh(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=e[o],u=n[o],c=l.length,h=a[o]=new Array(c),f,d=0;d<c;++d)(f=l[d]||u[d])&&(h[d]=f);for(;o<r;++o)a[o]=e[o];return new ze(a,this._parents,this._name,this._id)}function zh(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Dh(t,e,n){var r,i,s=zh(e)?xs:ke;return function(){var a=s(this,t),o=a.on;o!==r&&(i=(r=o).copy()).on(e,n),a.on=i}}function Ph(t,e){var n=this._id;return arguments.length<2?he(this.node(),n).on.on(t):this.each(Dh(n,t,e))}function Lh(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Vh(){return this.on("end.remove",Lh(this._id))}function jh(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ps(t));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],l=o.length,u=s[a]=new Array(l),c,h,f=0;f<l;++f)(c=o[f])&&(h=t.call(c,c.__data__,f,o))&&("__data__"in c&&(h.__data__=c.__data__),u[f]=h,fi(u[f],e,n,f,u,he(c,n)));return new ze(s,this._parents,e,n)}function qh(t){var e=this._name,n=this._id;typeof t!="function"&&(t=bo(t));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var l=r[o],u=l.length,c,h=0;h<u;++h)if(c=l[h]){for(var f=t.call(c,c.__data__,h,l),d,g=he(c,n),_=0,p=f.length;_<p;++_)(d=f[_])&&fi(d,e,n,_,f,g);s.push(f),a.push(c)}return new ze(s,a,e,n)}var Hh=fr.prototype.constructor;function Bh(){return new Hh(this._groups,this._parents)}function Uh(t,e){var n,r,i;return function(){var s=Ln(this,t),a=(this.style.removeProperty(t),Ln(this,t));return s===a?null:s===n&&a===r?i:i=e(n=s,r=a)}}function Uo(t){return function(){this.style.removeProperty(t)}}function Wh(t,e,n){var r,i=n+"",s;return function(){var a=Ln(this,t);return a===i?null:a===r?s:s=e(r=a,n)}}function Yh(t,e,n){var r,i,s;return function(){var a=Ln(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),Ln(this,t))),a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o))}}function Xh(t,e){var n,r,i,s="style."+e,a="end."+s,o;return function(){var l=ke(this,t),u=l.on,c=l.value[s]==null?o||(o=Uo(e)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(a,i=c),l.on=r}}function Gh(t,e,n){var r=(t+="")=="transform"?Zf:Bo;return e==null?this.styleTween(t,Uh(t,r)).on("end.style."+t,Uo(t)):typeof e=="function"?this.styleTween(t,Yh(t,r,bs(this,"style."+t,e))).each(Xh(this._id,t)):this.styleTween(t,Wh(t,r,e),n).on("end.style."+t,null)}function Kh(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function Qh(t,e,n){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&Kh(t,a,n)),r}return s._value=e,s}function Zh(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,Qh(t,e,n??""))}function Jh(t){return function(){this.textContent=t}}function td(t){return function(){var e=t(this);this.textContent=e??""}}function ed(t){return this.tween("text",typeof t=="function"?td(bs(this,"text",t)):Jh(t==null?"":t+""))}function nd(t){return function(e){this.textContent=t.call(this,e)}}function rd(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&nd(i)),e}return r._value=t,r}function id(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,rd(t))}function sd(){for(var t=this._name,e=this._id,n=Wo(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,u=0;u<o;++u)if(l=a[u]){var c=he(l,e);fi(l,t,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new ze(r,this._parents,t,n)}function ad(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--i===0&&s()}};n.each(function(){var u=ke(this,r),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),u.on=e}),i===0&&s()})}var od=0;function ze(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function Wo(){return++od}var Se=fr.prototype;ze.prototype={constructor:ze,select:jh,selectAll:qh,selectChild:Se.selectChild,selectChildren:Se.selectChildren,filter:Ih,merge:Oh,selection:Bh,transition:sd,call:Se.call,nodes:Se.nodes,node:Se.node,size:Se.size,empty:Se.empty,each:Se.each,on:Ph,attr:mh,attrTween:$h,style:Gh,styleTween:Zh,text:ed,textTween:id,remove:Vh,tween:fh,delay:Ah,duration:Th,ease:Nh,easeVarying:Rh,end:ad,[Symbol.iterator]:Se[Symbol.iterator]};function ld(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var ud={time:null,delay:0,duration:250,ease:ld};function cd(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function fd(t){var e,n;t instanceof ze?(e=t._id,t=t._name):(e=Wo(),(n=ud).time=ws(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,u=0;u<o;++u)(l=a[u])&&fi(l,t,e,u,a,n||cd(l,e));return new ze(r,this._parents,t,e)}fr.prototype.interrupt=lh;fr.prototype.transition=fd;const Xi=Math.PI,Gi=2*Xi,sn=1e-6,hd=Gi-sn;function Yo(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function dd(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return Yo;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class vd{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?Yo:dd(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-e,u=i-n,c=a-e,h=o-n,f=c*c+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>sn)if(!(Math.abs(h*l-u*c)>sn)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-a,g=i-o,_=l*l+u*u,p=d*d+g*g,m=Math.sqrt(_),y=Math.sqrt(f),w=s*Math.tan((Xi-Math.acos((_+f-p)/(2*m*y)))/2),x=w/y,b=w/m;Math.abs(x-1)>sn&&this._append`L${e+x*c},${n+x*h}`,this._append`A${s},${s},0,0,${+(h*d>c*g)},${this._x1=e+b*l},${this._y1=n+b*u}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),u=e+o,c=n+l,h=1^a,f=a?i-s:s-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>sn||Math.abs(this._y1-c)>sn)&&this._append`L${u},${c}`,r&&(f<0&&(f=f%Gi+Gi),f>hd?this._append`A${r},${r},0,1,${h},${e-o},${n-l}A${r},${r},0,1,${h},${this._x1=u},${this._y1=c}`:f>sn&&this._append`A${r},${r},0,${+(f>=Xi)},${h},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function pd(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function Xo(t,e){return fetch(t,e).then(pd)}function gd(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function Gr(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function jn(t){return t=Gr(Math.abs(t)),t?t[1]:NaN}function _d(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function md(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var yd=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Kr(t){if(!(e=yd.exec(t)))throw new Error("invalid format: "+t);var e;return new $s({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}Kr.prototype=$s.prototype;function $s(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}$s.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function wd(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var Go;function xd(t,e){var n=Gr(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(Go=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+Gr(t,Math.max(0,e+s-1))[0]}function na(t,e){var n=Gr(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const ra={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:gd,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>na(t*100,e),r:na,s:xd,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ia(t){return t}var sa=Array.prototype.map,aa=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function bd(t){var e=t.grouping===void 0||t.thousands===void 0?ia:_d(sa.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?ia:md(sa.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"â":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(h){h=Kr(h);var f=h.fill,d=h.align,g=h.sign,_=h.symbol,p=h.zero,m=h.width,y=h.comma,w=h.precision,x=h.trim,b=h.type;b==="n"?(y=!0,b="g"):ra[b]||(w===void 0&&(w=12),x=!0,b="g"),(p||f==="0"&&d==="=")&&(p=!0,f="0",d="=");var N=_==="$"?n:_==="#"&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",z=_==="$"?r:/[%p]/.test(b)?a:"",H=ra[b],D=/[defgprs%]/.test(b);w=w===void 0?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,w)):Math.max(0,Math.min(20,w));function P(E){var R=N,$=z,I,xt,Mt;if(b==="c")$=H(E)+$,E="";else{E=+E;var Ft=E<0||1/E<0;if(E=isNaN(E)?l:H(Math.abs(E),w),x&&(E=wd(E)),Ft&&+E==0&&g!=="+"&&(Ft=!1),R=(Ft?g==="("?g:o:g==="-"||g==="("?"":g)+R,$=(b==="s"?aa[8+Go/3]:"")+$+(Ft&&g==="("?")":""),D){for(I=-1,xt=E.length;++I<xt;)if(Mt=E.charCodeAt(I),48>Mt||Mt>57){$=(Mt===46?i+E.slice(I+1):E.slice(I))+$,E=E.slice(0,I);break}}}y&&!p&&(E=e(E,1/0));var L=R.length+E.length+$.length,U=L<m?new Array(m-L+1).join(f):"";switch(y&&p&&(E=e(U+E,U.length?m-$.length:1/0),U=""),d){case"<":E=R+E+$+U;break;case"=":E=R+U+E+$;break;case"^":E=U.slice(0,L=U.length>>1)+R+E+$+U.slice(L);break;default:E=U+R+E+$;break}return s(E)}return P.toString=function(){return h+""},P}function c(h,f){var d=u((h=Kr(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(jn(f)/3)))*3,_=Math.pow(10,-g),p=aa[8+g/3];return function(m){return d(_*m)+p}}return{format:u,formatPrefix:c}}var br,Ko,Qo;$d({thousands:",",grouping:[3],currency:["$",""]});function $d(t){return br=bd(t),Ko=br.format,Qo=br.formatPrefix,br}function Ed(t){return Math.max(0,-jn(Math.abs(t)))}function Md(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(jn(e)/3)))*3-jn(Math.abs(t)))}function Ad(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,jn(e)-jn(t))+1}function kd(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function Sd(){return this.eachAfter(kd)}function Td(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function Cd(t,e){for(var n=this,r=[n],i,s,a=-1;n=r.pop();)if(t.call(e,n,++a,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function Nd(t,e){for(var n=this,r=[n],i=[],s,a,o,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(a=0,o=s.length;a<o;++a)r.push(s[a]);for(;n=i.pop();)t.call(e,n,++l,this);return this}function Fd(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function Rd(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function Id(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Od(t){for(var e=this,n=zd(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function zd(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function Dd(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Pd(){return Array.from(this)}function Ld(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function Vd(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*jd(){var t=this,e,n=[t],r,i,s;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function dr(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=Bd)):e===void 0&&(e=Hd);for(var n=new Qr(t),r,i=[n],s,a,o,l;r=i.pop();)if((a=e(r.data))&&(l=(a=Array.from(a)).length))for(r.children=a,o=l-1;o>=0;--o)i.push(s=a[o]=new Qr(a[o])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(Wd)}function qd(){return dr(this).eachBefore(Ud)}function Hd(t){return t.children}function Bd(t){return Array.isArray(t)?t[1]:null}function Ud(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function Wd(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function Qr(t){this.data=t,this.depth=this.height=0,this.parent=null}Qr.prototype=dr.prototype={constructor:Qr,count:Sd,each:Td,eachAfter:Nd,eachBefore:Cd,find:Fd,sum:Rd,sort:Id,path:Od,ancestors:Dd,descendants:Pd,leaves:Ld,links:Vd,copy:qd,[Symbol.iterator]:jd};function Yd(t){return t==null?null:Zo(t)}function Zo(t){if(typeof t!="function")throw new Error;return t}function an(){return 0}function Mn(t){return function(){return t}}const Xd=1664525,Gd=1013904223,oa=4294967296;function Kd(){let t=1;return()=>(t=(Xd*t+Gd)%oa)/oa}function Qd(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Zd(t,e){let n=t.length,r,i;for(;n;)i=e()*n--|0,r=t[n],t[n]=t[i],t[i]=r;return t}function Jd(t,e){for(var n=0,r=(t=Zd(Array.from(t),e)).length,i=[],s,a;n<r;)s=t[n],a&&Jo(a,s)?++n:(a=ev(i=tv(i,s)),n=0);return a}function tv(t,e){var n,r;if(Ei(e,t))return[e];for(n=0;n<t.length;++n)if($r(e,t[n])&&Ei(er(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if($r(er(t[n],t[r]),e)&&$r(er(t[n],e),t[r])&&$r(er(t[r],e),t[n])&&Ei(tl(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function $r(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function Jo(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Ei(t,e){for(var n=0;n<e.length;++n)if(!Jo(t,e[n]))return!1;return!0}function ev(t){switch(t.length){case 1:return nv(t[0]);case 2:return er(t[0],t[1]);case 3:return tl(t[0],t[1],t[2])}}function nv(t){return{x:t.x,y:t.y,r:t.r}}function er(t,e){var n=t.x,r=t.y,i=t.r,s=e.x,a=e.y,o=e.r,l=s-n,u=a-r,c=o-i,h=Math.sqrt(l*l+u*u);return{x:(n+s+l/h*c)/2,y:(r+a+u/h*c)/2,r:(h+i+o)/2}}function tl(t,e,n){var r=t.x,i=t.y,s=t.r,a=e.x,o=e.y,l=e.r,u=n.x,c=n.y,h=n.r,f=r-a,d=r-u,g=i-o,_=i-c,p=l-s,m=h-s,y=r*r+i*i-s*s,w=y-a*a-o*o+l*l,x=y-u*u-c*c+h*h,b=d*g-f*_,N=(g*x-_*w)/(b*2)-r,z=(_*p-g*m)/b,H=(d*w-f*x)/(b*2)-i,D=(f*m-d*p)/b,P=z*z+D*D-1,E=2*(s+N*z+H*D),R=N*N+H*H-s*s,$=-(Math.abs(P)>1e-6?(E+Math.sqrt(E*E-4*P*R))/(2*P):R/E);return{x:r+N+z*$,y:i+H+D*$,r:$}}function la(t,e,n){var r=t.x-e.x,i,s,a=t.y-e.y,o,l,u=r*r+a*a;u?(s=e.r+n.r,s*=s,l=t.r+n.r,l*=l,s>l?(i=(u+l-s)/(2*u),o=Math.sqrt(Math.max(0,l/u-i*i)),n.x=t.x-i*r-o*a,n.y=t.y-i*a+o*r):(i=(u+s-l)/(2*u),o=Math.sqrt(Math.max(0,s/u-i*i)),n.x=e.x+i*r-o*a,n.y=e.y+i*a+o*r)):(n.x=e.x+n.r,n.y=e.y)}function ua(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function ca(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,s=(e.y*n.r+n.y*e.r)/r;return i*i+s*s}function Er(t){this._=t,this.next=null,this.previous=null}function rv(t,e){if(!(s=(t=Qd(t)).length))return 0;var n,r,i,s,a,o,l,u,c,h,f;if(n=t[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;la(r,n,i=t[2]),n=new Er(n),r=new Er(r),i=new Er(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;t:for(l=3;l<s;++l){la(n._,r._,i=t[l]),i=new Er(i),u=r.next,c=n.previous,h=r._.r,f=n._.r;do if(h<=f){if(ua(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue t}h+=u._.r,u=u.next}else{if(ua(c._,i._)){n=c,n.next=r,r.previous=n,--l;continue t}f+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=ca(n);(i=i.next)!==r;)(o=ca(i))<a&&(n=i,a=o);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Jd(n,e),l=0;l<s;++l)n=t[l],n.x-=i.x,n.y-=i.y;return i.r}function iv(t){return Math.sqrt(t.value)}function sv(){var t=null,e=1,n=1,r=an;function i(s){const a=Kd();return s.x=e/2,s.y=n/2,t?s.eachBefore(fa(t)).eachAfter(Mi(r,.5,a)).eachBefore(ha(1)):s.eachBefore(fa(iv)).eachAfter(Mi(an,1,a)).eachAfter(Mi(r,s.r/Math.min(e,n),a)).eachBefore(ha(Math.min(e,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(t=Yd(s),i):t},i.size=function(s){return arguments.length?(e=+s[0],n=+s[1],i):[e,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:Mn(+s),i):r},i}function fa(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Mi(t,e,n){return function(r){if(i=r.children){var i,s,a=i.length,o=t(r)*e||0,l;if(o)for(s=0;s<a;++s)i[s].r+=o;if(l=rv(i,n),o)for(s=0;s<a;++s)i[s].r-=o;r.r=l+o}}}function ha(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function av(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function ov(t,e,n,r,i){for(var s=t.children,a,o=-1,l=s.length,u=t.value&&(r-e)/t.value;++o<l;)a=s[o],a.y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*u}function lv(t,e,n,r,i){for(var s=t.children,a,o=-1,l=s.length,u=t.value&&(i-n)/t.value;++o<l;)a=s[o],a.x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*u}var uv=(1+Math.sqrt(5))/2;function cv(t,e,n,r,i,s){for(var a=[],o=e.children,l,u,c=0,h=0,f=o.length,d,g,_=e.value,p,m,y,w,x,b,N;c<f;){d=i-n,g=s-r;do p=o[h++].value;while(!p&&h<f);for(m=y=p,b=Math.max(g/d,d/g)/(_*t),N=p*p*b,x=Math.max(y/N,N/m);h<f;++h){if(p+=u=o[h].value,u<m&&(m=u),u>y&&(y=u),N=p*p*b,w=Math.max(y/N,N/m),w>x){p-=u;break}x=w}a.push(l={value:p,dice:d<g,children:o.slice(c,h)}),l.dice?ov(l,n,r,i,_?r+=g*p/_:s):lv(l,n,r,_?n+=d*p/_:i,s),_-=p,c=h}return a}const fv=(function t(e){function n(r,i,s,a,o){cv(e,r,i,s,a,o)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(uv);function el(){var t=fv,e=!1,n=1,r=1,i=[0],s=an,a=an,o=an,l=an,u=an;function c(f){return f.x0=f.y0=0,f.x1=n,f.y1=r,f.eachBefore(h),i=[0],e&&f.eachBefore(av),f}function h(f){var d=i[f.depth],g=f.x0+d,_=f.y0+d,p=f.x1-d,m=f.y1-d;p<g&&(g=p=(g+p)/2),m<_&&(_=m=(_+m)/2),f.x0=g,f.y0=_,f.x1=p,f.y1=m,f.children&&(d=i[f.depth+1]=s(f)/2,g+=u(f)-d,_+=a(f)-d,p-=o(f)-d,m-=l(f)-d,p<g&&(g=p=(g+p)/2),m<_&&(_=m=(_+m)/2),t(f,g,_,p,m))}return c.round=function(f){return arguments.length?(e=!!f,c):e},c.size=function(f){return arguments.length?(n=+f[0],r=+f[1],c):[n,r]},c.tile=function(f){return arguments.length?(t=Zo(f),c):t},c.padding=function(f){return arguments.length?c.paddingInner(f).paddingOuter(f):c.paddingInner()},c.paddingInner=function(f){return arguments.length?(s=typeof f=="function"?f:Mn(+f),c):s},c.paddingOuter=function(f){return arguments.length?c.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):c.paddingTop()},c.paddingTop=function(f){return arguments.length?(a=typeof f=="function"?f:Mn(+f),c):a},c.paddingRight=function(f){return arguments.length?(o=typeof f=="function"?f:Mn(+f),c):o},c.paddingBottom=function(f){return arguments.length?(l=typeof f=="function"?f:Mn(+f),c):l},c.paddingLeft=function(f){return arguments.length?(u=typeof f=="function"?f:Mn(+f),c):u},c}function hv(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function dv(t){return function(){return t}}function vv(t){return+t}var da=[0,1];function Sn(t){return t}function Ki(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:dv(isNaN(e)?NaN:.5)}function pv(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function gv(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=Ki(i,r),s=n(a,s)):(r=Ki(r,i),s=n(s,a)),function(o){return s(r(o))}}function _v(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=Ki(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=Lu(t,o,1,r)-1;return s[l](i[l](o))}}function mv(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function yv(){var t=da,e=da,n=ys,r,i,s,a=Sn,o,l,u;function c(){var f=Math.min(t.length,e.length);return a!==Sn&&(a=pv(t[0],t[f-1])),o=f>2?_v:gv,l=u=null,h}function h(f){return f==null||isNaN(f=+f)?s:(l||(l=o(t.map(r),e,n)))(r(a(f)))}return h.invert=function(f){return a(i((u||(u=o(e,t.map(r),oe)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,vv),c()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),c()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=Gf,c()},h.clamp=function(f){return arguments.length?(a=f?!0:Sn,c()):a!==Sn},h.interpolate=function(f){return arguments.length?(n=f,c()):n},h.unknown=function(f){return arguments.length?(s=f,h):s},function(f,d){return r=f,i=d,c()}}function wv(){return yv()(Sn,Sn)}function xv(t,e,n,r){var i=Bu(t,e,n),s;switch(r=Kr(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Md(i,a))&&(r.precision=s),Qo(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Ad(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Ed(i))&&(r.precision=s-(r.type==="%")*2);break}}return Ko(r)}function bv(t){var e=t.domain;return t.ticks=function(n){var r=e();return Hu(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return xv(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l,u,c=10;for(o<a&&(u=a,a=o,o=u,u=i,i=s,s=u);c-- >0;){if(u=Vi(a,o,n),u===l)return r[i]=a,r[s]=o,e(r);if(u>0)a=Math.floor(a/u)*u,o=Math.ceil(o/u)*u;else if(u<0)a=Math.ceil(a*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function nl(){var t=wv();return t.copy=function(){return mv(t,nl())},hv.apply(t,arguments),bv(t)}function jt(t){return function(){return t}}const va=Math.abs,Ot=Math.atan2,en=Math.cos,$v=Math.max,Ai=Math.min,pe=Math.sin,Tn=Math.sqrt,Ht=1e-12,ur=Math.PI,Zr=ur/2,Ir=2*ur;function Ev(t){return t>1?0:t<-1?ur:Math.acos(t)}function pa(t){return t>=1?Zr:t<=-1?-Zr:Math.asin(t)}function Mv(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new vd(e)}function Av(t){return t.innerRadius}function kv(t){return t.outerRadius}function Sv(t){return t.startAngle}function Tv(t){return t.endAngle}function Cv(t){return t&&t.padAngle}function Nv(t,e,n,r,i,s,a,o){var l=n-t,u=r-e,c=a-i,h=o-s,f=h*l-c*u;if(!(f*f<Ht))return f=(c*(e-s)-h*(t-i))/f,[t+f*l,e+f*u]}function Mr(t,e,n,r,i,s,a){var o=t-n,l=e-r,u=(a?s:-s)/Tn(o*o+l*l),c=u*l,h=-u*o,f=t+c,d=e+h,g=n+c,_=r+h,p=(f+g)/2,m=(d+_)/2,y=g-f,w=_-d,x=y*y+w*w,b=i-s,N=f*_-g*d,z=(w<0?-1:1)*Tn($v(0,b*b*x-N*N)),H=(N*w-y*z)/x,D=(-N*y-w*z)/x,P=(N*w+y*z)/x,E=(-N*y+w*z)/x,R=H-p,$=D-m,I=P-p,xt=E-m;return R*R+$*$>I*I+xt*xt&&(H=P,D=E),{cx:H,cy:D,x01:-c,y01:-h,x11:H*(i/b-1),y11:D*(i/b-1)}}function Fv(){var t=Av,e=kv,n=jt(0),r=null,i=Sv,s=Tv,a=Cv,o=null,l=Mv(u);function u(){var c,h,f=+t.apply(this,arguments),d=+e.apply(this,arguments),g=i.apply(this,arguments)-Zr,_=s.apply(this,arguments)-Zr,p=va(_-g),m=_>g;if(o||(o=c=l()),d<f&&(h=d,d=f,f=h),!(d>Ht))o.moveTo(0,0);else if(p>Ir-Ht)o.moveTo(d*en(g),d*pe(g)),o.arc(0,0,d,g,_,!m),f>Ht&&(o.moveTo(f*en(_),f*pe(_)),o.arc(0,0,f,_,g,m));else{var y=g,w=_,x=g,b=_,N=p,z=p,H=a.apply(this,arguments)/2,D=H>Ht&&(r?+r.apply(this,arguments):Tn(f*f+d*d)),P=Ai(va(d-f)/2,+n.apply(this,arguments)),E=P,R=P,$,I;if(D>Ht){var xt=pa(D/f*pe(H)),Mt=pa(D/d*pe(H));(N-=xt*2)>Ht?(xt*=m?1:-1,x+=xt,b-=xt):(N=0,x=b=(g+_)/2),(z-=Mt*2)>Ht?(Mt*=m?1:-1,y+=Mt,w-=Mt):(z=0,y=w=(g+_)/2)}var Ft=d*en(y),L=d*pe(y),U=f*en(b),ut=f*pe(b);if(P>Ht){var gt=d*en(w),nt=d*pe(w),At=f*en(x),k=f*pe(x),S;if(p<ur)if(S=Nv(Ft,L,At,k,gt,nt,U,ut)){var Z=Ft-S[0],rt=L-S[1],vt=gt-S[0],kt=nt-S[1],M=1/pe(Ev((Z*vt+rt*kt)/(Tn(Z*Z+rt*rt)*Tn(vt*vt+kt*kt)))/2),C=Tn(S[0]*S[0]+S[1]*S[1]);E=Ai(P,(f-C)/(M-1)),R=Ai(P,(d-C)/(M+1))}else E=R=0}z>Ht?R>Ht?($=Mr(At,k,Ft,L,d,R,m),I=Mr(gt,nt,U,ut,d,R,m),o.moveTo($.cx+$.x01,$.cy+$.y01),R<P?o.arc($.cx,$.cy,R,Ot($.y01,$.x01),Ot(I.y01,I.x01),!m):(o.arc($.cx,$.cy,R,Ot($.y01,$.x01),Ot($.y11,$.x11),!m),o.arc(0,0,d,Ot($.cy+$.y11,$.cx+$.x11),Ot(I.cy+I.y11,I.cx+I.x11),!m),o.arc(I.cx,I.cy,R,Ot(I.y11,I.x11),Ot(I.y01,I.x01),!m))):(o.moveTo(Ft,L),o.arc(0,0,d,y,w,!m)):o.moveTo(Ft,L),!(f>Ht)||!(N>Ht)?o.lineTo(U,ut):E>Ht?($=Mr(U,ut,gt,nt,f,-E,m),I=Mr(Ft,L,At,k,f,-E,m),o.lineTo($.cx+$.x01,$.cy+$.y01),E<P?o.arc($.cx,$.cy,E,Ot($.y01,$.x01),Ot(I.y01,I.x01),!m):(o.arc($.cx,$.cy,E,Ot($.y01,$.x01),Ot($.y11,$.x11),!m),o.arc(0,0,f,Ot($.cy+$.y11,$.cx+$.x11),Ot(I.cy+I.y11,I.cx+I.x11),m),o.arc(I.cx,I.cy,E,Ot(I.y11,I.x11),Ot(I.y01,I.x01),!m))):o.arc(0,0,f,b,x,m)}if(o.closePath(),c)return o=null,c+""||null}return u.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-ur/2;return[en(h)*c,pe(h)*c]},u.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:jt(+c),u):t},u.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:jt(+c),u):e},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:jt(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:jt(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:jt(+c),u):i},u.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:jt(+c),u):s},u.padAngle=function(c){return arguments.length?(a=typeof c=="function"?c:jt(+c),u):a},u.context=function(c){return arguments.length?(o=c??null,u):o},u}function Rv(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Iv(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function Ov(t){return t}function zv(){var t=Ov,e=Iv,n=null,r=jt(0),i=jt(Ir),s=jt(0);function a(o){var l,u=(o=Rv(o)).length,c,h,f=0,d=new Array(u),g=new Array(u),_=+r.apply(this,arguments),p=Math.min(Ir,Math.max(-Ir,i.apply(this,arguments)-_)),m,y=Math.min(Math.abs(p)/u,s.apply(this,arguments)),w=y*(p<0?-1:1),x;for(l=0;l<u;++l)(x=g[d[l]=l]=+t(o[l],l,o))>0&&(f+=x);for(e!=null?d.sort(function(b,N){return e(g[b],g[N])}):n!=null&&d.sort(function(b,N){return n(o[b],o[N])}),l=0,h=f?(p-u*w)/f:0;l<u;++l,_=m)c=d[l],x=g[c],m=_+(x>0?x*h:0)+w,g[c]={data:o[c],index:l,value:x,startAngle:_,endAngle:m,padAngle:y};return g}return a.value=function(o){return arguments.length?(t=typeof o=="function"?o:jt(+o),a):t},a.sortValues=function(o){return arguments.length?(e=o,n=null,a):e},a.sort=function(o){return arguments.length?(n=o,e=null,a):n},a.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:jt(+o),a):r},a.endAngle=function(o){return arguments.length?(i=typeof o=="function"?o:jt(+o),a):i},a.padAngle=function(o){return arguments.length?(s=typeof o=="function"?o:jt(+o),a):s},a}function nr(t,e,n){this.k=t,this.x=e,this.y=n}nr.prototype={constructor:nr,scale:function(t){return t===1?this:new nr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new nr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};nr.prototype;const ga=30,bn=500,$n=800,ki=["#4A90E2","#7B68EE","#50C878","#FF6B6B","#FFA500","#9B59B6","#1ABC9C","#E74C3C"],Si=60,Ti=30,_a=40,ma=40,ya=40,wa=60,Dv=.8,Pv=.75,Lv=.15,Vv=.4,jv=.25,qv=4,Hv=30,Bv=25,Uv=.85,Jr=ol;function Es(t,e){let n=t+"_categories";if(e[n])return n;if(t.endsWith("s")){const r=t.slice(0,-1)+"_categories";if(e[r])return r}return null}function qe(t,e){const n=Ke(t);if(!n)return t;const r=Oo(n),i=.05,s=1,o=Math.min(e/.1,1),l=Math.pow(o,3);return r.s=s-l*(s-i),r.toString()}function _t(t){return t.toLocaleString()}function Wv(t){if(t.length===0)return{};const e={},n=t[0];for(const r of Object.keys(n)){if(r==="id"||r==="user"||r==="agent"||r==="connections")continue;const i=n[r];if(typeof i=="string"&&new Set(t.map(a=>a[r])).size<ga&&(e[r]="string"),Array.isArray(i)){const s=new Set;if(t.forEach(a=>{Array.isArray(a[r])&&a[r].forEach(o=>s.add(o))}),s.size<ga){const a=Es(r,n);a&&typeof n[a]=="object"?e[r]="hierarchical":e[r]="array"}}}return e}function Yv(t,e,n="count",r=["spend_30d","users_1d","users_7d","users_30d"]){const i={};for(const[s,a]of Object.entries(e))a==="hierarchical"?i[s]=Xv(t,s,r):a==="string"?(i[s]={},t.forEach(o=>{const l=o[s];i[s][l]||(i[s][l]=Jr(),r.forEach(u=>{i[s][l][u]===void 0&&(i[s][l][u]=0)})),i[s][l].count++,r.forEach(u=>{i[s][l][u]=(i[s][l][u]||0)+(o[u]||0)}),ti(o)&&i[s][l].problematic++})):a==="array"&&(i[s]={},t.forEach(o=>{(o[s]||[]).forEach(u=>{i[s][u]||(i[s][u]=Jr(),r.forEach(c=>{i[s][u][c]===void 0&&(i[s][u][c]=0)})),i[s][u].count++,r.forEach(c=>{i[s][u][c]=(i[s][u][c]||0)+(o[c]||0)}),ti(o)&&i[s][u].problematic++})}));return i}function Xv(t,e,n=["spend_30d","users_1d","users_7d","users_30d"]){if(t.length===0)return{};const r=Es(e,t[0]);if(!r)return console.error(`No hierarchy field found for facet: ${e}`),{};const i={},s=new Set,a={};return t.forEach(o=>{const l=o[r];l&&Object.entries(l).forEach(([u,c])=>{s.add(u),a[u]||(a[u]=new Set),c.forEach(h=>a[u].add(h))})}),s.forEach(o=>{i[o]=Object.assign(Jr(),{children:{}}),n.forEach(l=>{i[o][l]===void 0&&(i[o][l]=0)}),a[o]&&a[o].forEach(l=>{i[o].children[l]=Jr(),n.forEach(u=>{i[o].children[l][u]===void 0&&(i[o].children[l][u]=0)})})}),t.forEach(o=>{const l=o[r];l&&Object.entries(l).forEach(([u,c])=>{c.forEach(h=>{i[u].children[h].count++,n.forEach(f=>{i[u].children[h][f]=(i[u].children[h][f]||0)+(o[f]||0)}),ti(o)&&i[u].children[h].problematic++,i[u].count++,n.forEach(f=>{i[u][f]=(i[u][f]||0)+(o[f]||0)}),ti(o)&&i[u].problematic++})})}),i}function ti(t){return t.status==="warning"}function Ar(t,e){const n=t[e]||{direct:[],transitive:[]};return{isDirect:r=>n.direct?.includes(r)??!1,isTransitive:r=>n.transitive?.includes(r)??!1}}function Gv(t,e,n,r="count"){const s={name:"root",children:Object.entries(t).map(([l,u])=>({name:l,value:u[r]||0,count:u.count,spend_30d:u.spend_30d,users_1d:u.users_1d,users_7d:u.users_7d,users_30d:u.users_30d,problematic:u.problematic}))},a=dr(s).sum(l=>l.value).sort((l,u)=>(u.value||0)-(l.value||0));return el().size([e,n]).padding(2).round(!0)(a),a.leaves()}function Kv(t,e,n,r="count"){const s={name:"root",children:Object.entries(t).map(([l,u])=>({name:l,count:u.count,spend_30d:u.spend_30d,users_1d:u.users_1d,users_7d:u.users_7d,users_30d:u.users_30d,problematic:u.problematic,isCategory:!0,children:Object.entries(u.children||{}).map(([h,f])=>({name:h,value:f[r]||0,count:f.count,spend_30d:f.spend_30d,users_1d:f.users_1d,users_7d:f.users_7d,users_30d:f.users_30d,problematic:f.problematic,isCategory:!1}))}))},a=dr(s).sum(l=>l.value||0).sort((l,u)=>(u.value||0)-(l.value||0));return el().size([e,n]).paddingOuter(2).paddingTop(20).paddingInner(2).round(!0)(a),a}function Qv(t,e){const n={};return t.forEach(r=>{const i=r[e];if(i!=null){const s=String(i);n[s]||(n[s]=[]),n[s].push(r)}}),n}function Zv(t,e){const n=Qv(t,e),r=[],i=Object.entries(n);for(let s=0;s<i.length;s++){const[a,o]=i[s];for(let l=0;l<i.length;l++){const[u,c]=i[l],h=new Set(c.map(_=>_.id));let f=0;const d=new Set,g=new Set;for(const _ of o)if(_.connections)for(const p of _.connections)h.has(p)&&(f++,d.add(_.id),g.add(p));f>0&&r.push({source:a,target:u,weight:f,sourceIds:Array.from(d),targetIds:Array.from(g)})}}return r}function Jv(t,e){const n=new Set(e),r=new Set,i=[...e],s=new Map;for(t.forEach(a=>s.set(a.id,a));i.length>0;){const a=i.shift();if(r.has(a))continue;r.add(a);const o=s.get(a);if(o&&o.connections)for(const l of o.connections)r.has(l)||(n.add(l),i.push(l))}return t.filter(a=>n.has(a.id))}const hi=Jt([]),Gn=Jt({}),Ie=Jt([]),Gt=Jt(0),ei=Jt("count"),Qi=Jt("treemap"),qn=Jt(!1),Zi=Jt(!1),Ji=Jt(""),ts=Jt({}),kr=Jt(null),tp=Ae([hi],([t])=>{const e=new Map;return t.forEach(n=>e.set(n.id,n)),e}),ep=Ae([hi],([t])=>{const e=new Map;return t.forEach(n=>e.set(n.id,[])),t.forEach(n=>{n.connections&&Array.isArray(n.connections)&&n.connections.forEach(r=>{const i=e.get(r);i&&i.push(n.id)})}),e}),Ms=Ae([hi,Ie,Zi],([t,e,n])=>{if(e.length===0)return t;let r=t.filter(i=>e.every(s=>{const{facetName:a,facetValue:o,facetType:l}=s;if(l==="string")return i[a]===o;if(l==="array"||l==="hierarchical"){if(l==="hierarchical"){const c=Es(a,i);if(c){const h=i[c];if(h&&typeof h=="object"&&h[o])return!0}}return(i[a]||[]).includes(o)}return!0}));if(n&&r.length>0){const i=r.map(s=>s.id);r=Jv(t,i)}return r}),rl=Ae([Ms,Gn,ei,Ie],([t,e,n,r])=>{if(Object.keys(e).length===0)return{};const s=Yv(t,e,n,["spend_30d","users_1d","users_7d","users_30d"]),a={};r.forEach(l=>{a[l.facetName]||(a[l.facetName]=new Set),a[l.facetName].add(l.facetValue)});const o={};for(const[l,u]of Object.entries(s)){const c=a[l];if(!c){o[l]=u;continue}const h={};for(const[f,d]of Object.entries(u))if(!c.has(f))if(d.children){const g={};for(const[_,p]of Object.entries(d.children))c.has(_)||(g[_]=p);h[f]={...d,children:g}}else h[f]=d;o[l]=h}return o}),di=Ae([Gn,rl],([t,e])=>Object.keys(t).filter(n=>{const r=e[n];return r?Object.keys(r).length>=2:!1})),vi=Ae([di,Gt],([t,e])=>t[e]||""),il=Ae([vi,Gn],([t,e])=>e[t]||null),np=Ae([vi,rl],([t,e])=>e[t]||{}),rp=Ae([Ms,vi,il,qn],([t,e,n,r])=>!r||!e||n!=="string"?null:Zv(t,e));var ip=Q('<span class="filter-chip svelte-1e87otd"> <button class="remove-filter svelte-1e87otd">Ã</button></span>'),sp=Q('<div class="filter-notice svelte-1e87otd"><strong class="svelte-1e87otd">Filtered by:</strong> <!> <button class="clear-all svelte-1e87otd">Clear All</button></div>'),ap=Q('<div class="filter-bar svelte-1e87otd"><div class="toggle-controls svelte-1e87otd"><label class="toggle-label svelte-1e87otd"><input type="checkbox" class="svelte-1e87otd"/> <span>Show Connections</span></label> <label class="toggle-label svelte-1e87otd"><input type="checkbox" class="svelte-1e87otd"/> <span>Transitive Mode</span></label></div> <!></div>');function op(t,e){ce(e,!1);const n=()=>lt(qn,"$showConnections",s),r=()=>lt(Zi,"$transitiveMode",s),i=()=>lt(Ie,"$activeFilters",s),[s,a]=Qe();function o(w){Ie.update(x=>x.filter((b,N)=>N!==w))}function l(){Ie.set([])}function u(){qn.update(w=>!w)}function c(){Zi.update(w=>!w)}Me();var h=ap(),f=F(h),d=F(f),g=F(d),_=tt(d,2),p=F(_),m=tt(f,2);{var y=w=>{var x=sp(),b=tt(F(x),2);me(b,1,i,Ce,(z,H,D)=>{var P=ip(),E=F(P),R=tt(E);ft(()=>mt(E,`${v(H).facetName??""} = "${v(H).facetValue??""}" `)),wt("click",R,()=>o(D)),B(z,P)});var N=tt(b,2);wt("click",N,l),B(w,x)};yt(m,w=>{i().length>0&&w(y)})}ft(()=>{Pi(g,n()),Pi(p,r())}),wt("change",g,u),wt("change",p,c),B(t,h),fe(),a()}var lp=Q('<label class="size-toggle-option svelte-1kjcpjp"><input type="radio" name="sizeMetric" class="svelte-1kjcpjp"/> <span class="svelte-1kjcpjp"> </span></label>'),up=Q('<div class="size-toggle svelte-1kjcpjp"><label class="size-toggle-label svelte-1kjcpjp">SIZE BY:</label> <div class="size-toggle-options svelte-1kjcpjp"></div></div>');function cp(t,e){ce(e,!1);const n=()=>lt(ei,"$sizeMetric",r),[r,i]=Qe(),s=pt();let a=Dt(e,"schema",8,null);function o(c){ei.set(c)}Et(()=>T(a()),()=>{W(s,a()&&a().metrics?[{value:"count",label:"Agent Count"},...a().metrics.map(c=>({value:c,label:c.replace(/_/g," ").replace(/\b\w/g,h=>h.toUpperCase())}))]:[{value:"count",label:"Agent Count"},{value:"spend_30d",label:"Total Spend (30d)"},{value:"users_1d",label:"Total Users (1d)"},{value:"users_7d",label:"Total Users (7d)"},{value:"users_30d",label:"Total Users (30d)"}])}),_n(),Me();var l=up(),u=tt(F(l),2);me(u,5,()=>v(s),Ce,(c,h)=>{var f=lp(),d=F(f),g=tt(d,2),_=F(g);ft(()=>{Au(d,(v(h),O(()=>v(h).value))),Pi(d,(n(),v(h),O(()=>n()===v(h).value))),mt(_,(v(h),O(()=>v(h).label)))}),wt("change",d,()=>o(v(h).value)),B(c,f)}),B(t,l),fe(),i()}var fp=Q('<div class="layout-toggle svelte-18h3sna"><span class="label svelte-18h3sna">Layout:</span> <button>Treemap</button> <button>Packed</button> <button>Donut</button></div>');function hp(t,e){ce(e,!1);const n=()=>lt(Qi,"$layoutMode",r),[r,i]=Qe();function s(d){Qi.set(d)}Me();var a=fp(),o=tt(F(a),2);let l;var u=tt(o,2);let c;var h=tt(u,2);let f;ft(()=>{l=Xe(o,1,"svelte-18h3sna",null,l,{active:n()==="treemap"}),c=Xe(u,1,"svelte-18h3sna",null,c,{active:n()==="packed"}),f=Xe(h,1,"svelte-18h3sna",null,f,{active:n()==="donut"})}),wt("click",o,()=>s("treemap")),wt("click",u,()=>s("packed")),wt("click",h,()=>s("donut")),B(t,a),fe(),i()}var dp=Q('<button role="tab"> </button>'),vp=Q('<div class="facet-tabs svelte-1xxeg1p" tabindex="0" role="tablist"></div>');function pp(t,e){ce(e,!1);const n=()=>lt(di,"$visibleFacets",i),r=()=>lt(Gt,"$currentFacetIndex",i),[i,s]=Qe();function a(u){Gt.set(u)}function o(u){if(u.key==="ArrowRight"&&n().length>0){u.preventDefault();const c=(r()+1)%n().length;Gt.set(c)}else if(u.key==="ArrowLeft"&&n().length>0){u.preventDefault();const c=(r()-1+n().length)%n().length;Gt.set(c)}else(u.key==="c"||u.key==="C")&&(u.preventDefault(),qn.update(c=>!c))}Et(()=>(n(),r(),Gt),()=>{n().length>0&&r()>=n().length&&Gt.set(0)}),_n(),Me();var l=vp();me(l,5,n,Ce,(u,c,h)=>{var f=dp();let d;var g=F(f);ft(()=>{d=Xe(f,1,"tab svelte-1xxeg1p",null,d,{active:r()===h}),Oe(f,"aria-selected",r()===h),mt(g,v(c))}),wt("click",f,()=>a(h)),B(u,f)}),wt("keydown",l,o),B(t,l),fe(),s()}var gp=go('<svg class="edge-bundling svelte-16is0x2" style="position: absolute; top: 0; left: 0; pointer-events: none;"></svg>');function _p(t,e){ce(e,!1);let n=Dt(e,"connections",8),r=Dt(e,"rectanglePositions",8),i=Dt(e,"width",8,800),s=Dt(e,"height",8,500),a=Dt(e,"bundleCenter",8,null),o=Dt(e,"bundleStrength",8,Uv),l=pt();function u(){if(!v(l)||!n()||n().length===0||!r())return;const h=rn(v(l));h.selectAll("*").remove();const f=n().map(p=>{const m=r().get(p.source),y=r().get(p.target);if(!m||!y)return null;const w=m.x+m.width/2,x=m.y+m.height/2,b=y.x+y.width/2,N=y.y+y.height/2;if(p.source===p.target)if(a()){const D=a().x,P=a().y,E=w+(D-w)*o()*.7,R=x+(P-x)*o()*.7,$=Math.atan2(x-P,w-D),I=20,xt=E+Math.cos($+.3)*I,Mt=R+Math.sin($+.3)*I;return{path:`M${w},${x} C${E},${R} ${xt},${Mt} ${w},${x}`,weight:p.weight,source:p.source,target:p.target,isSelfLoop:!0}}else{const D=Math.min(m.width,m.height)*.4,P=w-D,E=x-D*1.5,R=w+D,$=x-D*1.5;return{path:`M${w},${x} C${P},${E} ${R},${$} ${w},${x}`,weight:p.weight,source:p.source,target:p.target,isSelfLoop:!0}}let z,H;if(a()){const D=(w+b)/2,P=(x+N)/2;z=D+(a().x-D)*o(),H=P+(a().y-P)*o()}else{const D=(w+b)/2,P=(x+N)/2,E=b-w,R=N-x,$=Math.sqrt(E*E+R*R);if($===0)return null;const I=$*.2;z=D-R*I/$,H=P+E*I/$}return{path:`M${w},${x} Q${z},${H} ${b},${N}`,weight:p.weight,source:p.source,target:p.target,isSelfLoop:!1}}).filter(p=>p!==null),d=Uu(f,p=>p.weight)||1,g=nl().domain([1,d]).range([1,8]);h.append("defs").append("marker").attr("id","arrowhead").attr("markerWidth",10).attr("markerHeight",10).attr("refX",8).attr("refY",3).attr("orient","auto").append("polygon").attr("points","0 0, 6 3, 0 6").attr("fill","#1976d2").attr("opacity",.5),h.selectAll("path.connection").data(f).join("path").attr("class","connection").attr("d",p=>p.path).attr("stroke","#1976d2").attr("stroke-width",p=>g(p.weight)).attr("fill","none").attr("opacity",.4).attr("marker-end",p=>p.isSelfLoop?null:"url(#arrowhead)").append("title").text(p=>p.isSelfLoop?`${p.source}: ${p.weight} internal connections`:`${p.source} â ${p.target}: ${p.weight} connections`)}vs(()=>{u()}),Et(()=>(T(n()),T(r())),()=>{n()&&r()&&u()}),_n(),Me();var c=gp();hs(c,h=>W(l,h),()=>v(l)),ft(()=>{Oe(c,"width",i()),Oe(c,"height",s())}),B(t,c),fe()}var mp=Q('<span class="filter-caption svelte-1tagvx2"> </span>'),yp=go('<svg class="treemap-svg svelte-1tagvx2"></svg>'),wp=Q('<div class="facet-group svelte-1tagvx2"><div class="facet-title svelte-1tagvx2"> <!></div>  <div class="facet-container svelte-1tagvx2" style="position: relative;" tabindex="0"><!> <!></div></div>');function xp(t,e){ce(e,!1);const n=()=>lt(Ie,"$activeFilters",u),r=()=>lt(Qi,"$layoutMode",u),i=()=>lt(di,"$visibleFacets",u),s=()=>lt(Gt,"$currentFacetIndex",u),a=()=>lt(ts,"$highlightedValues",u),o=()=>lt(qn,"$showConnections",u),l=()=>lt(rp,"$connectionData",u),[u,c]=Qe(),h=pt(),f=pt(),d=pt();let g=Dt(e,"facetName",8),_=Dt(e,"facetStats",8),p=Dt(e,"facetType",8),m=Dt(e,"color",8),y=Dt(e,"sizeMetric",8,"count"),w=pt(),x=pt(!1),b=pt(new Map),N=pt(null);function z(k){Ie.update(S=>S.some(rt=>rt.facetName===g()&&rt.facetValue===k)?S:[...S,{facetName:g(),facetValue:k,facetType:p()}])}function H(k){let S=k.target;if(S.tagName==="rect"||S.tagName==="circle"||S.tagName==="path"){const Z=S.getAttribute("data-facet-value");Z&&z(Z)}}function D(k){if(i().length!==0)if(k.key==="ArrowRight"){k.preventDefault();const S=(s()+1)%i().length;Gt.set(S)}else if(k.key==="ArrowLeft"){k.preventDefault();const S=(s()-1+i().length)%i().length;Gt.set(S)}else(k.key==="c"||k.key==="C")&&(k.preventDefault(),qn.update(S=>!S))}function P(){p()==="hierarchical"?I():r()==="packed"?R():r()==="donut"?E():$()}function E(){if(!v(w)||!_())return;const k=rn(v(w)),S=Object.entries(_()).map(([G,q])=>({name:G,value:q[y()]||0,count:q.count,problematic:q.problematic,spend_30d:q.spend_30d,users_1d:q.users_1d,users_7d:q.users_7d,users_30d:q.users_30d})).filter(G=>G.value>0);if(S.length===0){k.selectAll("*").remove(),W(x,!1);return}const Z=!v(x);W(x,!0);const rt=$n,vt=bn,kt=rt/2,M=vt/2,C=Math.min(rt,vt)/2-20,V=C*Dv,et=V*Pv,{isDirect:X,isTransitive:j}=Ar(a(),g()),Y=zv().value(G=>G.value).sort(null),A=Fv().innerRadius(V).outerRadius(C),J=G=>{const q=(G.startAngle+G.endAngle)/2,K=Math.sin(q)*et,ot=-Math.cos(q)*et;let St=q*180/Math.PI-90;return q>Math.PI/2&&q<3*Math.PI/2&&(St+=180),`translate(${K},${ot}) rotate(${St})`},st=G=>{const q=(G.startAngle+G.endAngle)/2;return q>Math.PI/2&&q<3*Math.PI/2?"end":"start"},bt=Y(S);let ct=k.select("g.donut-group");ct.empty()&&(ct=k.append("g").attr("class","donut-group").attr("transform",`translate(${kt},${M})`));const de=ct.selectAll("g.arc").data(bt,G=>G.data.name).join(G=>{const q=G.append("g").attr("class","arc").style("opacity",Z?1:0);return q.append("path").attr("class",K=>{const ot=["donut-segment"];return X(K.data.name)?ot.push("highlighted-direct"):j(K.data.name)&&ot.push("highlighted-transitive"),ot.join(" ")}).attr("d",A).attr("fill",K=>{const ot=K.data.count>0?K.data.problematic/K.data.count:0;return qe(m(),ot)}).attr("fill-opacity",.7).attr("stroke","white").attr("stroke-width",2).attr("data-facet-value",K=>K.data.name).style("cursor","pointer"),q.append("text").attr("class","donut-label").attr("transform",K=>J(K)).attr("text-anchor",K=>st(K)).attr("dominant-baseline","middle"),q.append("title"),Z||q.transition().duration(500).style("opacity",1),q},G=>(G.select("path").attr("class",q=>{const K=["donut-segment"];return X(q.data.name)?K.push("highlighted-direct"):j(q.data.name)&&K.push("highlighted-transitive"),K.join(" ")}).transition().duration(500).attr("d",A).attr("fill",q=>{const K=q.data.count>0?q.data.problematic/q.data.count:0;return qe(m(),K)}),G.select(".donut-label").transition().duration(500).attr("transform",q=>J(q)).attr("text-anchor",q=>st(q)),G),G=>G.transition().duration(500).style("opacity",0).remove());de.select(".donut-label").text(G=>{const q=G.endAngle-G.startAngle;if(q<=Lv)return"";const K=G.data[y()]||0,ot=y()==="spend_30d"?`$${_t(Math.round(K))}`:_t(K);return q>Vv?`${G.data.name} (${ot})`:q>jv?ot:""}),de.select("title").text(G=>`${G.data.name}
Count: ${_t(G.data.count)}${G.data.problematic>0?`
Problematic: ${_t(G.data.problematic)}`:""}`),v(b).clear(),bt.forEach(G=>{const q=A.centroid(G),K=Math.sqrt(q[0]**2+q[1]**2),ot=[kt+V*(q[0]/K),M+V*(q[1]/K)];v(b).set(G.data.name,{x:ot[0]-5,y:ot[1]-5,width:10,height:10})}),W(b,v(b)),W(N,{x:kt,y:M})}function R(){if(!v(w)||!_())return;const k=rn(v(w)),S=Object.entries(_()).map(([j,Y])=>({name:j,value:Y[y()]||0,count:Y.count,spend_30d:Y.spend_30d,users_1d:Y.users_1d,users_7d:Y.users_7d,users_30d:Y.users_30d,problematic:Y.problematic}));if(S.length===0){k.selectAll("*").remove(),W(x,!1);return}const rt=dr({name:"root",children:S}).sum(j=>j.value||1).sort((j,Y)=>(Y.value||0)-(j.value||0)),vt=Math.min($n,bn);sv().size([vt,vt]).padding(qv)(rt);const M=!v(x);S.length>0&&W(x,!0);const{isDirect:C,isTransitive:V}=Ar(a(),g()),et=rt.leaves(),X=k.selectAll("g.circle-node").data(et,j=>j.data.name).join(j=>{const Y=j.append("g").attr("class","circle-node").attr("transform",A=>`translate(${A.x},${A.y})`).style("opacity",M?1:0);return Y.append("title"),Y.append("circle").attr("class",A=>C(A.data.name)?"highlighted-direct":V(A.data.name)?"highlighted-transitive":"").attr("r",A=>A.r).attr("fill",A=>{const J=A.data.count>0?A.data.problematic/A.data.count:0;return qe(m(),J)}).attr("fill-opacity",.7).attr("stroke","rgba(0,0,0,0.2)").attr("stroke-width",1).attr("data-facet-value",A=>A.data.name).style("cursor","pointer"),Y.append("text").attr("class","packed-label").attr("text-anchor","middle").attr("dy","-0.3em"),Y.append("text").attr("class","packed-count").attr("text-anchor","middle").attr("dy","0.9em"),M||Y.transition().duration(500).style("opacity",1),Y},j=>(j.transition().duration(500).attr("transform",Y=>`translate(${Y.x},${Y.y})`),j.select("circle").attr("class",Y=>C(Y.data.name)?"highlighted-direct":V(Y.data.name)?"highlighted-transitive":"").transition().duration(500).attr("r",Y=>Y.r).attr("fill",Y=>{const A=Y.data.count>0?Y.data.problematic/Y.data.count:0;return qe(m(),A)}),j),j=>j.transition().duration(500).style("opacity",0).remove());X.select("title").text(j=>`${j.data.name}
Count: ${_t(j.data.count)}${j.data.problematic>0?`
Problematic: ${_t(j.data.problematic)}`:""}`),X.select(".packed-label").text(j=>j.r>Hv?j.data.name:""),X.select(".packed-count").text(j=>{if(j.r<=Bv)return"";const Y=j.data[y()]||0;return y()==="spend_30d"?`$${_t(Math.round(Y))}`:_t(Y)}),v(b).clear(),et.forEach(j=>{v(b).set(j.data.name,{x:j.x-j.r,y:j.y-j.r,width:j.r*2,height:j.r*2})}),W(b,v(b)),W(N,null)}function $(){if(!v(w)||!_())return;const k=Gv(_(),$n,bn,y()),S=rn(v(w)),Z=!v(x)||k.length===0;k.length>0&&W(x,!0);const{isDirect:rt,isTransitive:vt}=Ar(a(),g()),kt=S.selectAll("g").data(k,M=>M.data.name).join(M=>{const C=M.append("g").attr("transform",V=>`translate(${V.x0},${V.y0})`).style("opacity",Z?1:0);return C.append("title"),C.append("rect").attr("class",V=>rt(V.data.name)?"highlighted-direct":vt(V.data.name)?"highlighted-transitive":"").attr("width",V=>V.x1-V.x0).attr("height",V=>V.y1-V.y0).attr("fill",V=>{const et=V.data.count>0?V.data.problematic/V.data.count:0;return qe(m(),et)}).attr("fill-opacity",.7).attr("stroke","rgba(0,0,0,0.2)").attr("stroke-width",1).attr("data-facet-value",V=>V.data.name).style("cursor","pointer"),C.append("text").attr("class","treemap-label").attr("x",5).attr("y",15),C.append("text").attr("class","treemap-count").attr("text-anchor","middle"),C.append("text").attr("class","treemap-problematic").attr("text-anchor","middle"),Z?C:C.transition().duration(500).style("opacity",1)},M=>(M.transition().duration(500).attr("transform",C=>`translate(${C.x0},${C.y0})`),M.select("rect").attr("class",C=>rt(C.data.name)?"highlighted-direct":vt(C.data.name)?"highlighted-transitive":"").transition().duration(500).attr("width",C=>C.x1-C.x0).attr("height",C=>C.y1-C.y0).attr("fill",C=>{const V=C.data.count>0?C.data.problematic/C.data.count:0;return qe(m(),V)}),M),M=>M.transition().duration(500).style("opacity",0).remove());kt.select("title").text(M=>`${M.data.name}
Count: ${_t(M.data.count)}${M.data.problematic>0?`
Problematic: ${_t(M.data.problematic)}`:""}`),kt.select(".treemap-label").text(M=>M.x1-M.x0>Si&&M.y1-M.y0>Ti?M.data.name:"").attr("x",5).attr("y",15),kt.select(".treemap-count").text(M=>{if(M.x1-M.x0<=_a||M.y1-M.y0<=ma)return"";const C=M.data[y()]||0;return y()==="spend_30d"?`$${_t(Math.round(C))}`:_t(C)}).attr("x",M=>(M.x1-M.x0)/2).attr("y",M=>(M.y1-M.y0)/2),kt.select(".treemap-problematic").text(M=>M.data.problematic>0&&M.x1-M.x0>ya&&M.y1-M.y0>wa?`â  ${_t(M.data.problematic)}`:"").attr("x",M=>(M.x1-M.x0)/2).attr("y",M=>(M.y1-M.y0)/2+20),v(b).clear(),k.forEach(M=>{v(b).set(M.data.name,{x:M.x0,y:M.y0,width:M.x1-M.x0,height:M.y1-M.y0})}),W(b,v(b)),W(N,null)}function I(){if(!v(w)||!_())return;if(Object.keys(_()).length===0){rn(v(w)).selectAll("*").remove(),W(x,!1);return}const k=Kv(_(),$n,bn,y()),S=rn(v(w)),Z=k.children||[],rt=!v(x)||Z.length===0;Z.length>0&&W(x,!0);const{isDirect:vt,isTransitive:kt}=Ar(a(),g()),M=S.selectAll("g.category-group").data(Z,C=>C.data.name).join(C=>{const V=C.append("g").attr("class","category-group").attr("transform",et=>`translate(${et.x0},${et.y0})`).style("opacity",rt?1:0);return V.append("rect").attr("class","category-rect").attr("width",et=>et.x1-et.x0).attr("height",et=>et.y1-et.y0).attr("fill","transparent").attr("stroke",m()).attr("stroke-width",2).attr("data-facet-value",et=>et.data.name).style("cursor","pointer"),V.append("text").attr("class","treemap-category-label").attr("x",5).attr("y",15),V.append("title"),rt||V.transition().duration(500).style("opacity",1),V},C=>(C.transition().duration(500).attr("transform",V=>`translate(${V.x0},${V.y0})`),C.select("rect.category-rect").transition().duration(500).attr("width",V=>V.x1-V.x0).attr("height",V=>V.y1-V.y0),C),C=>C.transition().duration(500).style("opacity",0).remove());M.select(".treemap-category-label").text(C=>{const V=C.x1-C.x0,et=C.y1-C.y0;return V>Si&&et>Ti?C.data.name:""}),M.select("title").text(C=>`${C.data.name}
Category
Count: ${_t(C.data.count)}`),M.each(function(C){const V=rn(this),et=C.children||[],X=C.x0,j=C.y0,Y=V.selectAll("g.leaf-node").data(et,A=>A.data.name).join(A=>{const J=A.append("g").attr("class","leaf-node").attr("transform",st=>`translate(${st.x0-X},${st.y0-j})`).style("opacity",rt?1:0);return J.append("rect").attr("class",st=>{const bt=["leaf-rect"];return vt(st.data.name)?bt.push("highlighted-direct"):kt(st.data.name)&&bt.push("highlighted-transitive"),bt.join(" ")}).attr("width",st=>st.x1-st.x0).attr("height",st=>st.y1-st.y0).attr("fill",st=>{const bt=st.data.count>0?st.data.problematic/st.data.count:0;return qe(m(),bt)}).attr("fill-opacity",.7).attr("stroke","rgba(0,0,0,0.2)").attr("stroke-width",1).attr("data-facet-value",st=>st.data.name).style("cursor","pointer"),J.append("text").attr("class","treemap-label").attr("x",5).attr("y",15),J.append("text").attr("class","treemap-count").attr("text-anchor","middle"),J.append("text").attr("class","treemap-problematic").attr("text-anchor","middle"),J.append("title"),rt||J.transition().duration(500).style("opacity",1),J},A=>(A.transition().duration(500).attr("transform",J=>`translate(${J.x0-X},${J.y0-j})`),A.select("rect").attr("class",J=>{const st=["leaf-rect"];return vt(J.data.name)?st.push("highlighted-direct"):kt(J.data.name)&&st.push("highlighted-transitive"),st.join(" ")}).transition().duration(500).attr("width",J=>J.x1-J.x0).attr("height",J=>J.y1-J.y0).attr("fill",J=>{const st=J.data.count>0?J.data.problematic/J.data.count:0;return qe(m(),st)}),A),A=>A.transition().duration(500).style("opacity",0).remove());Y.select(".treemap-label").text(A=>{const J=A.x1-A.x0,st=A.y1-A.y0;return J>Si&&st>Ti?A.data.name:""}),Y.select(".treemap-count").text(A=>{if(A.x1-A.x0<=_a||A.y1-A.y0<=ma)return"";const J=A.data[y()]||0;return y()==="spend_30d"?`$${_t(Math.round(J))}`:_t(J)}).attr("x",A=>(A.x1-A.x0)/2).attr("y",A=>(A.y1-A.y0)/2),Y.select(".treemap-problematic").text(A=>A.data.problematic>0&&A.x1-A.x0>ya&&A.y1-A.y0>wa?`â  ${_t(A.data.problematic)}`:"").attr("x",A=>(A.x1-A.x0)/2).attr("y",A=>(A.y1-A.y0)/2+20),Y.select("title").text(A=>`${A.data.name}
Permission
Count: ${_t(A.data.count)}${A.data.problematic>0?`
Problematic: ${_t(A.data.problematic)}`:""}`)})}vs(P),Ru(P),Et(()=>(n(),T(g())),()=>{W(h,n().filter(k=>k.facetName===g()))}),Et(()=>v(h),()=>{W(f,v(h).length>0?`: ${v(h).map(k=>`"${k.facetValue}"`).join(", ")}`:"")}),Et(()=>(T(g()),r()),()=>{W(d,`${g()}-${r()}`)}),Et(()=>v(d),()=>{v(d)&&(W(x,!1),W(b,new Map),W(N,null))}),Et(()=>(a(),r()),()=>{(a()||r())&&P()}),_n(),Me();var xt=wp(),Mt=F(xt),Ft=F(Mt),L=tt(Ft);{var U=k=>{var S=mp(),Z=F(S);ft(()=>mt(Z,v(f))),B(k,S)};yt(L,k=>{v(f)&&k(U)})}var ut=tt(Mt,2),gt=F(ut);_u(gt,()=>v(d),k=>{var S=yp();hs(S,Z=>W(w,Z),()=>v(w)),ft(()=>{Oe(S,"width",$n),Oe(S,"height",bn)}),wt("click",S,H),B(k,S)});var nt=tt(gt,2);{var At=k=>{_p(k,{get connections(){return l()},get rectanglePositions(){return v(b)},get width(){return $n},get height(){return bn},get bundleCenter(){return v(N)}})};yt(nt,k=>{o(),l(),T(p()),v(b),O(()=>o()&&l()&&l().length>0&&p()==="string"&&v(b).size>0)&&k(At)})}ft(k=>mt(Ft,k),[()=>(T(g()),O(()=>g().toUpperCase()))]),wt("keydown",ut,D),wt("mouseenter",ut,k=>k.currentTarget.focus()),B(t,xt),fe(),c()}function En(t,e,n){let r=n.initialDeps??[],i;function s(){var a,o,l,u;let c;n.key&&((a=n.debug)!=null&&a.call(n))&&(c=Date.now());const h=t();if(!(h.length!==r.length||h.some((g,_)=>r[_]!==g)))return i;r=h;let d;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(d=Date.now()),i=e(...h),n.key&&((l=n.debug)!=null&&l.call(n))){const g=Math.round((Date.now()-c)*100)/100,_=Math.round((Date.now()-d)*100)/100,p=_/16,m=(y,w)=>{for(y=String(y);y.length<w;)y=" "+y;return y};console.info(`%câ± ${m(_,5)} /${m(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*p,120))}deg 100% 31%);`,n?.key)}return(u=n?.onChange)==null||u.call(n,i),i}return s.updateDeps=a=>{r=a},s}function xa(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const bp=(t,e)=>Math.abs(t-e)<1.01,$p=(t,e,n)=>{let r;return function(...i){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,i),n)}},ba=t=>{const{offsetWidth:e,offsetHeight:n}=t;return{width:e,height:n}},Ep=t=>t,Mp=t=>{const e=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let i=e;i<=n;i++)r.push(i);return r},Ap=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;const i=a=>{const{width:o,height:l}=a;e({width:Math.round(o),height:Math.round(l)})};if(i(ba(n)),!r.ResizeObserver)return()=>{};const s=new r.ResizeObserver(a=>{const o=()=>{const l=a[0];if(l?.borderBoxSize){const u=l.borderBoxSize[0];if(u){i({width:u.inlineSize,height:u.blockSize});return}}i(ba(n))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},$a={passive:!0},Ea=typeof window>"u"?!0:"onscrollend"in window,kp=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;let i=0;const s=t.options.useScrollendEvent&&Ea?()=>{}:$p(r,()=>{e(i,!1)},t.options.isScrollingResetDelay),a=c=>()=>{const{horizontal:h,isRtl:f}=t.options;i=h?n.scrollLeft*(f&&-1||1):n.scrollTop,s(),e(i,c)},o=a(!0),l=a(!1);l(),n.addEventListener("scroll",o,$a);const u=t.options.useScrollendEvent&&Ea;return u&&n.addEventListener("scrollend",l,$a),()=>{n.removeEventListener("scroll",o),u&&n.removeEventListener("scrollend",l)}},Sp=(t,e,n)=>{if(e?.borderBoxSize){const r=e.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return t[n.options.horizontal?"offsetWidth":"offsetHeight"]},Tp=(t,{adjustments:e=0,behavior:n},r)=>{var i,s;const a=t+e;(s=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[r.options.horizontal?"left":"top"]:a,behavior:n})};class Cp{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{const a=()=>{this._measureElement(s.target,s)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=r())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:Ep,rangeExtractor:Mp,onChange:()=>{},measureElement:Sp,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=En(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,s=new Map;for(let a=r-1;a>=0;a--){const o=n[a];if(i.has(o.lane))continue;const l=s.get(o.lane);if(l==null||o.end>l.end?s.set(o.lane,o):o.end<l.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((a,o)=>a.end===o.end?a.index-o.index:a.end-o.end)[0]:void 0},this.getMeasurementOptions=En(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,s,a)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a}),{key:!1}),this.getMeasurements=En(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a},o)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,l);for(let c=l;c<n;c++){const h=s(c),f=this.options.lanes===1?u[c-1]:this.getFurthestMeasurement(u,c),d=f?f.end+this.options.gap:r+i,g=o.get(h),_=typeof g=="number"?g:this.options.estimateSize(c),p=d+_,m=f?f.lane:c%this.options.lanes;u[c]={index:c,start:d,size:_,end:p,key:h,lane:m}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=En(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,s)=>this.range=n.length>0&&r>0?Np({measurements:n,outerSize:r,scrollOffset:i,lanes:s}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=En(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,s,a)=>s===null||a===null?[]:n({startIndex:s,endIndex:a,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),s=this.measurementsCache[i];if(!s)return;const a=s.key,o=this.elementsCache.get(a);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(a,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const s=this.itemSizeCache.get(i.key)??i.size,a=r-s;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,a,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=En(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let s=0,a=n.length;s<a;s++){const o=n[s],l=r[o];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return xa(r[sl(0,r.length-1,i=>xa(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const s=this.getSize(),a=this.getScrollOffset();r==="auto"&&(r=n>=a+s?"end":"start"),r==="center"?n+=(i-s)/2:r==="end"&&(n-=s);const o=this.getTotalSize()+this.options.scrollMargin-s;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const s=this.getSize(),a=this.getScrollOffset();if(r==="auto")if(i.end>=a+s-this.options.scrollPaddingEnd)r="end";else if(i.start<=a+this.options.scrollPaddingStart)r="start";else return[a,r];const o=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let s=0;const a=10,o=u=>{if(!this.targetWindow)return;const c=this.getOffsetForIndex(n,u);if(!c){console.warn("Failed to get offset for index:",n);return}const[h,f]=c;this._scrollToOffset(h,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const d=this.getScrollOffset(),g=this.getOffsetForIndex(n,f);if(!g){console.warn("Failed to get offset for index:",n);return}bp(g[0],d)||l(f)})},l=u=>{this.targetWindow&&(s++,s<a?this.targetWindow.requestAnimationFrame(()=>o(u)):console.warn(`Failed to scroll to index ${n} after ${a} attempts.`))};o(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{const s=Array(this.options.lanes).fill(null);let a=r.length-1;for(;a>=0&&s.some(o=>o===null);){const o=r[a];s[o.lane]===null&&(s[o.lane]=o.end),a--}i=Math.max(...s.filter(o=>o!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const sl=(t,e,n,r)=>{for(;t<=e;){const i=(t+e)/2|0,s=n(i);if(s<r)t=i+1;else if(s>r)e=i-1;else return i}return t>0?t-1:0};function Np({measurements:t,outerSize:e,scrollOffset:n,lanes:r}){const i=t.length-1,s=l=>t[l].start;if(t.length<=r)return{startIndex:0,endIndex:i};let a=sl(0,i,s,n),o=a;if(r===1)for(;o<i&&t[o].end<n+e;)o++;else if(r>1){const l=Array(r).fill(0);for(;o<i&&l.some(c=>c<n+e);){const c=t[o];l[c.lane]=c.end,o++}const u=Array(r).fill(n+e);for(;a>=0&&u.some(c=>c>=n);){const c=t[a];u[c.lane]=c.start,a--}a=Math.max(0,a-a%r),o=Math.min(i,o+(r-1-o%r))}return{startIndex:a,endIndex:o}}function Fp(t){const e=new Cp(t),n=e.setOptions;let r;const i=s=>{const a={...e.options,...s,onChange:s.onChange};n({...a,onChange:(o,l)=>{r.set(o),a.onChange?.(o,l)}}),e._willUpdate()};return r=Jt(e,()=>(i(t),e._didMount())),Ae(r,s=>Object.assign(s,{setOptions:i}))}function Rp(t){return Fp({observeElementRect:Ap,observeElementOffset:kp,scrollToFn:Tp,...t})}async function Ip(){try{const t=await Xo("../data.config.json");return console.log("â Loaded config from data.config.json"),t}catch{return console.warn("No config file found, using auto-detection"),null}}function Op(t,e){if(e)return console.log("â Using explicit config from data.config.json"),e;console.warn("â  No config file found - using auto-detection heuristics"),console.warn("  For better control, create a data.config.json file");const n=t[0]||{},r=Object.keys(n),i={version:"1.0-auto",roles:{titleField:zp(n),idField:Dp(r),warningField:Pp(r),warningValue:"warning",connectionField:Lp(n),connectionSecondaryField:null},fieldOrder:r.filter(s=>Vp(s,n)),excludeFromDisplay:[]};return console.log("Auto-detected schema:",{titleField:i.roles.titleField,idField:i.roles.idField,warningField:i.roles.warningField,connectionField:i.roles.connectionField}),i}function zp(t){const e=["name","title","agent","label"];for(const r of e)if(r in t)return r;for(const[r,i]of Object.entries(t))if(typeof i=="string")return console.warn(`  Using "${r}" as title field (first string field found)`),r;const n=Object.keys(t)[0];return console.warn(`  Using "${n}" as title field (first field in record)`),n}function Dp(t){return t.includes("id")?"id":t[0]}function Pp(t){return t.includes("status")?"status":null}function Lp(t){for(const[e,n]of Object.entries(t))if(Array.isArray(n)&&n.length>0&&typeof n[0]=="number")return e;return console.warn("  No connection field found (expected array of numbers)"),null}function Vp(t,e){const n=e[t];return t!=="_internal"&&n!==void 0}function He(t){return t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function ne(t,e){return t[e]}function Be(t,e){return e.roles.warningField?t[e.roles.warningField]===e.roles.warningValue:!1}function Ci(t,e){const n=e.roles.connectionField;return!n||!t[n]?null:{ids:t[n],secondaryField:e.roles.connectionSecondaryField}}function Ma(t){return t.fieldOrder.filter(e=>!t.excludeFromDisplay.includes(e))}function Aa(t,e){return Array.isArray(t[e])}function ka(t,e){const n=t[e];return n!==null&&typeof n=="object"&&!Array.isArray(n)}var jp=Q("<span> </span>");function Sr(t,e){ce(e,!1);const n=()=>lt(Gn,"$facetTypes",r),[r,i]=Qe(),s=pt(),a=pt();let o=Dt(e,"fieldName",8),l=Dt(e,"fieldValue",8);function u(){v(s)&&Ie.update(d=>{const g={facetName:o(),facetValue:l(),facetType:v(s)};return d.some(p=>p.facetName===o()&&p.facetValue===l())?d:[...d,g]})}Et(()=>(n(),T(o())),()=>{W(s,n()[o()])}),Et(()=>v(s),()=>{W(a,v(s)!==void 0)}),_n(),Me();var c=jp();let h;var f=F(c);ft(()=>{h=Xe(c,1,"field-value svelte-mahwrk",null,h,{clickable:v(a)}),Oe(c,"role",v(a)?"button":void 0),Oe(c,"tabindex",v(a)?0:void 0),mt(f,l())}),wt("click",c,u),wt("keypress",c,d=>(d.key==="Enter"||d.key===" ")&&u()),B(t,c),fe(),i()}var qp=Q('<button class="clear-btn svelte-n8ztcz" aria-label="Clear search">Ã</button>'),Hp=Q('<div class="search-box svelte-n8ztcz"><span class="search-icon svelte-n8ztcz">ð</span> <input type="text" placeholder="Search by agent, user, or ID..." aria-label="Search agents" class="svelte-n8ztcz"/> <!></div>');function Bp(t,e){ce(e,!1);let n=pt(""),r;function i(){clearTimeout(r),r=setTimeout(()=>{Ji.set(v(n))},300)}function s(){W(n,""),Ji.set("")}Me();var a=Hp(),o=tt(F(a),2),l=tt(o,2);{var u=c=>{var h=qp();wt("click",h,s),B(c,h)};yt(l,c=>{v(n)&&c(u)})}Su(o,()=>v(n),c=>W(n,c)),wt("input",o,i),B(t,a),fe()}var Up=Q('<div class="no-results svelte-ti8i33"><p class="svelte-ti8i33"> </p></div>'),Wp=Q('<span class="detail-item-warning svelte-ti8i33">â  WARNING</span>'),Yp=Q('<span class="connection-platform svelte-ti8i33"> </span>'),Xp=Q('<span class="connection-warning svelte-ti8i33">â </span>'),Gp=Q('<button title="Click to highlight and scroll to this record"><div class="connection-agent svelte-ti8i33"> </div> <div class="connection-details svelte-ti8i33"><!> <!></div></button>'),Kp=Q('<span class="connection-item-missing svelte-ti8i33" title="Record not found"> </span>'),Qp=Q('<div class="detail-item-field svelte-ti8i33"><strong class="svelte-ti8i33"> </strong> <div class="connections-list svelte-ti8i33"></div></div>'),Zp=Q('<span class="permission-badge svelte-ti8i33"><!></span>'),Jp=Q('<div class="detail-item-field svelte-ti8i33"><strong class="svelte-ti8i33"> </strong> <div class="detail-item-permissions svelte-ti8i33"></div></div>'),t0=Q('<span class="permission-badge small svelte-ti8i33"><!></span>'),e0=Q('<div class="object-field-value svelte-ti8i33"></div>'),n0=Q('<span class="object-field-value svelte-ti8i33"> </span>'),r0=Q('<div class="object-field-item svelte-ti8i33"><span class="object-field-key svelte-ti8i33"><!>:</span> <!></div>'),i0=Q('<div class="detail-item-field svelte-ti8i33"><strong class="svelte-ti8i33"> </strong> <div class="object-field svelte-ti8i33"></div></div>'),s0=Q('<div class="detail-item-field svelte-ti8i33"><strong class="svelte-ti8i33"> </strong> <!></div>'),a0=Q('<span class="connection-platform svelte-ti8i33"> </span>'),o0=Q('<span class="connection-warning svelte-ti8i33">â </span>'),l0=Q('<button title="Click to highlight and scroll to this record"><div class="connection-agent svelte-ti8i33"> </div> <div class="connection-details svelte-ti8i33"><!> <!></div></button>'),u0=Q('<span class="connection-item-missing svelte-ti8i33" title="Record not found"> </span>'),c0=Q('<div class="detail-item-field svelte-ti8i33"><strong class="svelte-ti8i33"> </strong> <div class="connections-list svelte-ti8i33"></div></div>'),f0=Q('<div><div class="detail-item-header svelte-ti8i33"><span class="svelte-ti8i33"> </span> <!></div> <!> <!></div>'),h0=Q('<div class="svelte-ti8i33"></div>'),d0=Q('<div class="detail-panel svelte-ti8i33"><h2 class="svelte-ti8i33"> </h2> <!> <!> <div class="detail-list svelte-ti8i33"><!></div></div>');function v0(t,e){ce(e,!1);const n=()=>lt(Ji,"$searchQuery",l),r=()=>lt(v(f),"$virtualizer",l),i=()=>lt(Gn,"$facetTypes",l),s=()=>lt(tp,"$recordLookup",l),a=()=>lt(kr,"$highlightedRecordId",l),o=()=>lt(ep,"$backlinksMap",l),[l,u]=Qe(),c=pt(),h=pt(),f=pt(),d=pt(),g=pt(),_=pt();let p=Dt(e,"data",8),m=Dt(e,"schema",8),y=pt(),w=new Map,x=pt("");function b(L,U){const{recordId:ut,virtualItem:gt}=U;return w.set(ut,L),v(f)&&requestAnimationFrame(()=>{L.isConnected&&r().measureElement(L)}),{destroy(){w.delete(ut)}}}function N(L){const U={},ut=i();Object.keys(ut).forEach(k=>{U[k]={direct:[],transitive:[]}});const gt=new Set([L.id]),nt=[L.id],At=[];for(;nt.length>0;){const k=nt.shift(),S=s().get(k);if(S){const Z=Ci(S,m());Z&&Z.ids&&Z.ids.forEach(rt=>{if(!gt.has(rt)){gt.add(rt),nt.push(rt);const vt=s().get(rt);vt&&At.push(vt)}})}}Object.keys(ut).forEach(k=>{const S=ut[k];if(S==="string"){const Z=L[k];Z&&U[k].direct.push(Z)}else if(S==="array"||S==="hierarchical"){const Z=L[k]||[];U[k].direct.push(...Z)}}),At.forEach(k=>{Object.keys(ut).forEach(S=>{const Z=ut[S];if(Z==="string"){const rt=k[S];rt&&!U[S].transitive.includes(rt)&&!U[S].direct.includes(rt)&&U[S].transitive.push(rt)}else(Z==="array"||Z==="hierarchical")&&(k[S]||[]).forEach(vt=>{!U[S].transitive.includes(vt)&&!U[S].direct.includes(vt)&&U[S].transitive.push(vt)})})}),ts.set(U)}function z(){ts.set({})}async function H(L){kr.set(L);const U=p().findIndex(ut=>ut.id===L);U>=0?(v(f)&&r().scrollToIndex(U,{align:"center",behavior:"auto"}),await zi(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{setTimeout(()=>{kr.set(null)},2e3)})})):(alert("Connected record is not in the current filtered view. Try adjusting your filters."),kr.set(null))}Et(()=>(n(),T(p())),()=>{W(c,n()?p().filter(L=>{const U=n().toLowerCase();return L.agent.toLowerCase().includes(U)||L.user.toLowerCase().includes(U)||String(L.id).includes(U)}):p())}),Et(()=>(v(c),v(y)),()=>{W(h,{count:v(c).length,getScrollElement:()=>v(y),estimateSize:()=>280,overscan:5,measureElement:L=>L?.getBoundingClientRect().height})}),Et(()=>(v(y),v(h)),()=>{Nu(W(f,v(y)?Rp(v(h)):null),"$virtualizer",l)}),Et(()=>(v(f),T(p()),r()),()=>{v(f)&&p()&&zi().then(()=>{requestAnimationFrame(()=>{w.forEach(L=>{L?.isConnected&&r().measureElement(L)})})})}),Et(()=>(T(m()),Ma),()=>{W(d,m()?Ma(m()):[])}),Et(()=>T(m()),()=>{W(g,m()?m().roles.titleField:"agent")}),Et(()=>v(c),()=>{W(_,v(c).length>0?v(c)[0].id:null)}),Et(()=>(n(),v(x),v(_),v(c),v(f),r()),()=>{n()!==v(x)&&v(_)!==null&&(W(x,n()),setTimeout(()=>{const L=v(c).findIndex(U=>U.id===v(_));L>=0&&v(f)&&r().scrollToIndex(L,{align:"start",behavior:"auto"})},100))}),_n(),Me();var D=d0(),P=F(D),E=F(P),R=tt(P,2);Bp(R,{});var $=tt(R,2);{var I=L=>{var U=Up(),ut=F(U),gt=F(ut);ft(()=>mt(gt,`No agents found matching "${n()??""}"`)),B(L,U)};yt($,L=>{n(),v(c),O(()=>n()&&v(c).length===0)&&L(I)})}var xt=tt($,2),Mt=F(xt);{var Ft=L=>{var U=h0();me(U,5,()=>(r(),O(()=>r().getVirtualItems())),ut=>ut.key,(ut,gt)=>{const nt=_e(()=>(v(c),v(gt),O(()=>v(c)[v(gt).index])));var At=f0();let k;var S=F(At),Z=F(S),rt=F(Z),vt=tt(Z,2);{var kt=et=>{var X=Wp();B(et,X)};yt(vt,et=>{T(Be),T(v(nt)),T(m()),O(()=>Be(v(nt),m()))&&et(kt)})}var M=tt(S,2);me(M,1,()=>v(d),Ce,(et,X)=>{const j=_e(()=>(T(ne),T(v(nt)),v(X),O(()=>ne(v(nt),v(X)))));var Y=yn(),A=nn(Y);{var J=bt=>{const ct=_e(()=>(T(Ci),T(v(nt)),T(m()),O(()=>Ci(v(nt),m()))));var de=yn(),G=nn(de);{var q=K=>{var ot=Qp(),St=F(ot),ve=F(St),Le=tt(St,2);me(Le,5,()=>(T(v(ct)),O(()=>v(ct).ids)),Ce,(Rt,qt)=>{const $t=_e(()=>(s(),v(qt),O(()=>s().get(v(qt)))));var ae=yn(),Ze=nn(ae);{var Je=Lt=>{var te=Gp();let Ve;var tn=F(te),vr=F(tn),pr=tt(tn,2),gr=F(pr);{var pi=It=>{var ee=Yp(),Kn=F(ee);ft(mi=>mt(Kn,mi),[()=>(T(ne),T(v($t)),T(v(ct)),O(()=>ne(v($t),v(ct).secondaryField)))]),B(It,ee)};yt(gr,It=>{T(v(ct)),O(()=>v(ct).secondaryField)&&It(pi)})}var gi=tt(gr,2);{var _i=It=>{var ee=Xp();B(It,ee)};yt(gi,It=>{T(Be),T(v($t)),T(m()),O(()=>Be(v($t),m()))&&It(_i)})}ft((It,ee)=>{Ve=Xe(te,1,"connection-item svelte-ti8i33",null,Ve,It),mt(vr,ee)},[()=>({warning:Be(v($t),m())}),()=>(T(ne),T(v($t)),v(g),O(()=>ne(v($t),v(g))))]),wt("click",te,()=>H(v(qt))),B(Lt,te)},Pt=Lt=>{var te=Kp(),Ve=F(te);ft(()=>mt(Ve,`ID ${v(qt)??""} (not found)`)),B(Lt,te)};yt(Ze,Lt=>{v($t)?Lt(Je):Lt(Pt,!1)})}B(Rt,ae)}),ft(Rt=>mt(ve,`${Rt??""} (${T(v(ct)),O(()=>v(ct).ids.length)??""}):`),[()=>(T(He),v(X),O(()=>He(v(X))))]),B(K,ot)};yt(G,K=>{T(v(ct)),O(()=>v(ct)&&v(ct).ids.length>0)&&K(q)})}B(bt,de)},st=bt=>{var ct=yn(),de=nn(ct);{var G=K=>{var ot=Jp(),St=F(ot),ve=F(St),Le=tt(St,2);me(Le,5,()=>v(j),Ce,(Rt,qt)=>{var $t=Zp(),ae=F($t);Sr(ae,{get fieldName(){return v(X)},get fieldValue(){return v(qt)}}),B(Rt,$t)}),ft(Rt=>mt(ve,`${Rt??""}:`),[()=>(T(He),v(X),O(()=>He(v(X))))]),B(K,ot)},q=K=>{var ot=yn(),St=nn(ot);{var ve=Rt=>{const qt=_e(()=>(v(X),O(()=>v(X).endsWith("_categories")?v(X).replace("_categories","s"):v(X))));var $t=i0(),ae=F($t),Ze=F(ae),Je=tt(ae,2);me(Je,5,()=>(T(v(j)),O(()=>Object.entries(v(j)))),Ce,(Pt,Lt)=>{var te=Yl(()=>hl(v(Lt),2));let Ve=()=>v(te)[0],tn=()=>v(te)[1];var vr=r0(),pr=F(vr),gr=F(pr);Sr(gr,{get fieldName(){return v(qt)},get fieldValue(){return Ve()}});var pi=tt(pr,2);{var gi=It=>{var ee=e0();me(ee,5,tn,Ce,(Kn,mi)=>{var As=t0(),al=F(As);Sr(al,{get fieldName(){return v(qt)},get fieldValue(){return v(mi)}}),B(Kn,As)}),B(It,ee)},_i=It=>{var ee=n0(),Kn=F(ee);ft(()=>mt(Kn,tn())),B(It,ee)};yt(pi,It=>{tn(),O(()=>Array.isArray(tn()))?It(gi):It(_i,!1)})}B(Pt,vr)}),ft(Pt=>mt(Ze,`${Pt??""}:`),[()=>(T(He),v(X),O(()=>He(v(X))))]),B(Rt,$t)},Le=Rt=>{var qt=s0(),$t=F(qt),ae=F($t),Ze=tt($t,2);Sr(Ze,{get fieldName(){return v(X)},get fieldValue(){return v(j)}}),ft(Je=>mt(ae,`${Je??""}:`),[()=>(T(He),v(X),O(()=>He(v(X))))]),B(Rt,qt)};yt(St,Rt=>{T(ka),T(v(nt)),v(X),O(()=>ka(v(nt),v(X)))?Rt(ve):Rt(Le,!1)},!0)}B(K,ot)};yt(de,K=>{T(Aa),T(v(nt)),v(X),O(()=>Aa(v(nt),v(X)))?K(G):K(q,!1)},!0)}B(bt,ct)};yt(A,bt=>{v(X),T(m()),O(()=>v(X)===m().roles.connectionField)?bt(J):bt(st,!1)})}B(et,Y)});var C=tt(M,2);{var V=et=>{const X=_e(()=>(o(),T(v(nt)),O(()=>o().get(v(nt).id)||[])));var j=c0(),Y=F(j),A=F(Y),J=tt(Y,2);me(J,5,()=>v(X),Ce,(st,bt)=>{const ct=_e(()=>(s(),v(bt),O(()=>s().get(v(bt)))));var de=yn(),G=nn(de);{var q=ot=>{var St=l0();let ve;var Le=F(St),Rt=F(Le),qt=tt(Le,2),$t=F(qt);{var ae=Pt=>{var Lt=a0(),te=F(Lt);ft(Ve=>mt(te,Ve),[()=>(T(ne),T(v(ct)),T(m()),O(()=>ne(v(ct),m().roles.connectionSecondaryField)))]),B(Pt,Lt)};yt($t,Pt=>{T(m()),O(()=>m().roles.connectionSecondaryField)&&Pt(ae)})}var Ze=tt($t,2);{var Je=Pt=>{var Lt=o0();B(Pt,Lt)};yt(Ze,Pt=>{T(Be),T(v(ct)),T(m()),O(()=>Be(v(ct),m()))&&Pt(Je)})}ft((Pt,Lt)=>{ve=Xe(St,1,"connection-item svelte-ti8i33",null,ve,Pt),mt(Rt,Lt)},[()=>({warning:Be(v(ct),m())}),()=>(T(ne),T(v(ct)),v(g),O(()=>ne(v(ct),v(g))))]),wt("click",St,()=>H(v(bt))),B(ot,St)},K=ot=>{var St=u0(),ve=F(St);ft(()=>mt(ve,`ID ${v(bt)??""} (not found)`)),B(ot,St)};yt(G,ot=>{v(ct)?ot(q):ot(K,!1)})}B(st,de)}),ft(()=>mt(A,`Connects to this (${T(v(X)),O(()=>v(X).length)??""}):`)),B(et,j)};yt(C,et=>{o(),T(v(nt)),O(()=>(o().get(v(nt).id)||[]).length>0)&&et(V)})}xu(At,(et,X)=>b?.(et,X),()=>({recordId:v(nt).id,virtualItem:v(gt)})),Dr(()=>wt("mouseenter",At,()=>N(v(nt)))),Dr(()=>wt("mouseleave",At,z)),ft(et=>{k=Xe(At,1,"detail-item svelte-ti8i33",null,k,{highlighted:a()===v(nt).id||n()&&v(nt).id===v(_)}),Ds(At,`position: absolute; top: 0; left: 0; width: 100%; transform: translateY(${v(gt),O(()=>v(gt).start)??""}px);`),Oe(At,"data-index",(v(gt),O(()=>v(gt).index))),Oe(At,"data-agent-id",(T(v(nt)),O(()=>v(nt).id))),mt(rt,et)},[()=>(T(ne),T(v(nt)),v(g),O(()=>ne(v(nt),v(g))))]),B(ut,At)}),ft(ut=>Ds(U,`height: ${ut??""}px; width: 100%; position: relative;`),[()=>(r(),O(()=>r().getTotalSize()))]),B(L,U)};yt(Mt,L=>{v(f),v(c),O(()=>v(f)&&v(c).length>0)&&L(Ft)})}hs(xt,L=>W(y,L),()=>v(y)),ft(L=>mt(E,`Matching Records (${L??""})`),[()=>(T(_t),v(c),O(()=>_t(v(c).length)))]),B(t,D),fe(),u()}var p0=Q('<div id="visualization" class="svelte-2jhczl"><!> <!></div> <!>',1),g0=Q("<p>Loading...</p>"),_0=Q('<div id="container" class="svelte-2jhczl"><h1 class="svelte-2jhczl">Hierarchical Faceted Browser</h1> <!> <div class="controls-row svelte-2jhczl"><!> <!></div> <div id="main-content" class="svelte-2jhczl"><!></div></div>');function m0(t,e){ce(e,!1);const n=()=>lt(Ie,"$activeFilters",c),r=()=>lt(di,"$visibleFacets",c),i=()=>lt(vi,"$currentFacetName",c),s=()=>lt(Gt,"$currentFacetIndex",c),a=()=>lt(il,"$currentFacetType",c),o=()=>lt(np,"$currentFacetStats",c),l=()=>lt(ei,"$sizeMetric",c),u=()=>lt(Ms,"$filteredData",c),[c,h]=Qe();let f=pt(null),d=pt(0);vs(async()=>{try{const z=await Ip(),H=await Xo("../data.json");H.forEach(P=>{P.connections&&P.connections.length>0?P.connection_status="Connected":P.connection_status="Isolated"}),hi.set(H),W(f,Op(H,z)),console.log("Schema loaded:",v(f));const D=Wv(H);Gn.set(D)}catch(z){console.error("Error loading data:",z)}}),Et(()=>(n(),v(d),r(),i(),s(),Gt),()=>{if(n().length>v(d)&&r().length>0){const z=n()[n().length-1];if(z.facetType==="string"&&z.facetName===i()){const H=(s()+1)%r().length;Gt.set(H)}}W(d,n().length)}),_n(),Me();var g=_0(),_=tt(F(g),2);op(_,{});var p=tt(_,2),m=F(p);cp(m,{get schema(){return v(f)}});var y=tt(m,2);hp(y,{});var w=tt(p,2),x=F(w);{var b=z=>{var H=p0(),D=nn(H),P=F(D);pp(P,{});var E=tt(P,2);{var R=I=>{xp(I,{get facetName(){return i()},get facetStats(){return o()},get facetType(){return a()},get color(){return T(ki),s(),O(()=>ki[s()%ki.length])},get sizeMetric(){return l()}})};yt(E,I=>{i()&&a()&&I(R)})}var $=tt(D,2);v0($,{get data(){return u()},get schema(){return v(f)}}),B(z,H)},N=z=>{var H=g0();B(z,H)};yt(x,z=>{v(f)?z(b):z(N,!1)})}B(t,g),fe(),h()}vu(m0,{target:document.getElementById("app")});
