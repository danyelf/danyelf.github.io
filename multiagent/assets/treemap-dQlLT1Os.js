import"./modulepreload-polyfill-B5Qt9EMX.js";import{c as gl}from"./data-utils-HFH0zg-E.js";import{c as _l}from"./regl-Cez-Bdem.js";const ji=!1;var Pa=Array.isArray,ml=Array.prototype.indexOf,cs=Array.from,Da=Object.defineProperty,In=Object.getOwnPropertyDescriptor,La=Object.getOwnPropertyDescriptors,yl=Object.prototype,xl=Array.prototype,fs=Object.getPrototypeOf,Os=Object.isExtensible;const Oe=()=>{};function wl(t){return t()}function Vr(t){for(var e=0;e<t.length;e++)t[e]()}function qa(){var t,e,n=new Promise((r,i)=>{t=r,e=i});return{promise:n,resolve:t,reject:e}}function bl(t,e){if(Array.isArray(t))return t;if(!(Symbol.iterator in t))return Array.from(t);const n=[];for(const r of t)if(n.push(r),n.length===e)break;return n}const Ot=2,hs=4,fi=8,Ve=16,je=32,bn=64,hi=128,_e=512,It=1024,Qt=2048,Te=4096,re=8192,ze=16384,ds=32768,zn=65536,zs=1<<17,Va=1<<18,Wn=1<<19,ja=1<<20,mn=32768,Hi=1<<21,vs=1<<22,Ze=1<<23,pn=Symbol("$state"),$l=Symbol("legacy props"),Al=Symbol(""),Sn=new class extends Error{name="StaleReactionError";message="The reaction that called `getAbortSignal()` was re-run or destroyed"};function ps(t){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}function Ml(){throw new Error("https://svelte.dev/e/async_derived_orphan")}function El(t){throw new Error("https://svelte.dev/e/effect_in_teardown")}function kl(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function Sl(t){throw new Error("https://svelte.dev/e/effect_orphan")}function Tl(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Nl(t){throw new Error("https://svelte.dev/e/lifecycle_legacy_only")}function Cl(t){throw new Error("https://svelte.dev/e/props_invalid_value")}function Fl(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function Il(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Rl(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}function Ol(){throw new Error("https://svelte.dev/e/svelte_boundary_reset_onerror")}const Ha=1,Ba=2,Ua=4,zl=8,Pl=16,Dl=2,Ll=4,ql=8,Vl=1,jl=2,Dt=Symbol(),Hl="http://www.w3.org/1999/xhtml";function Bl(){console.warn("https://svelte.dev/e/svelte_boundary_reset_noop")}function Wa(t){return t===this.v}function gs(t,e){return t!=t?e==e:t!==e||t!==null&&typeof t=="object"||typeof t=="function"}function Ya(t){return!gs(t,this.v)}let Yn=!1,Ul=!1;function Wl(){Yn=!0}let ht=null;function Pn(t){ht=t}function se(t,e=!1,n){ht={p:ht,i:!1,c:null,e:null,s:t,x:null,l:Yn&&!e?{s:null,u:null,$:[]}:null}}function ae(t){var e=ht,n=e.e;if(n!==null){e.e=null;for(var r of n)lo(r)}return e.i=!0,ht=e.p,{}}function Xn(){return!Yn||ht!==null&&ht.l===null}let dn=[];function Xa(){var t=dn;dn=[],Vr(t)}function Gn(t){if(dn.length===0&&!or){var e=dn;queueMicrotask(()=>{e===dn&&Xa()})}dn.push(t)}function Yl(){for(;dn.length>0;)Xa()}function Ga(t){var e=ct;if(e===null)return it.f|=Ze,t;if((e.f&ds)===0){if((e.f&hi)===0)throw t;e.b.error(t)}else Dn(t,e)}function Dn(t,e){for(;e!==null;){if((e.f&hi)!==0)try{e.b.error(t);return}catch(n){t=n}e=e.parent}throw t}const $r=new Set;let vt=null,Rr=null,ne=null,fe=[],di=null,Bi=!1,or=!1;class Me{committed=!1;current=new Map;previous=new Map;#t=new Set;#e=new Set;#r=0;#n=0;#l=null;#s=[];#i=[];skipped_effects=new Set;is_fork=!1;is_deferred(){return this.is_fork||this.#n>0}process(e){fe=[],Rr=null,this.apply();var n={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const r of e)this.#a(r,n);this.is_fork||this.#c(),this.is_deferred()?(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects)):(Rr=this,vt=null,Ps(n.render_effects),Ps(n.effects),Rr=null,this.#l?.resolve()),ne=null}#a(e,n){e.f^=It;for(var r=e.first;r!==null;){var i=r.f,s=(i&(je|bn))!==0,a=s&&(i&It)!==0,o=a||(i&re)!==0||this.skipped_effects.has(r);if((r.f&hi)!==0&&r.b?.is_pending()&&(n={parent:n,effect:r,effects:[],render_effects:[],block_effects:[]}),!o&&r.fn!==null){s?r.f^=It:(i&hs)!==0?n.effects.push(r):Qn(r)&&((r.f&Ve)!==0&&n.block_effects.push(r),Vn(r));var l=r.first;if(l!==null){r=l;continue}}var u=r.parent;for(r=r.next;r===null&&u!==null;)u===n.effect&&(this.#o(n.effects),this.#o(n.render_effects),this.#o(n.block_effects),n=n.parent),r=u.next,u=u.parent}}#o(e){for(const n of e)((n.f&Qt)!==0?this.#s:this.#i).push(n),this.#u(n.deps),Rt(n,It)}#u(e){if(e!==null)for(const n of e)(n.f&Ot)===0||(n.f&mn)===0||(n.f^=mn,this.#u(n.deps))}capture(e,n){this.previous.has(e)||this.previous.set(e,n),(e.f&Ze)===0&&(this.current.set(e,e.v),ne?.set(e,e.v))}activate(){vt=this,this.apply()}deactivate(){vt===this&&(vt=null,ne=null)}flush(){if(this.activate(),fe.length>0){if(Ka(),vt!==null&&vt!==this)return}else this.#r===0&&this.process([]);this.deactivate()}discard(){for(const e of this.#e)e(this);this.#e.clear()}#c(){if(this.#n===0){for(const e of this.#t)e();this.#t.clear()}this.#r===0&&this.#f()}#f(){if($r.size>1){this.previous.clear();var e=ne,n=!0,r={parent:null,effect:null,effects:[],render_effects:[],block_effects:[]};for(const s of $r){if(s===this){n=!1;continue}const a=[];for(const[l,u]of this.current){if(s.current.has(l))if(n&&u!==s.current.get(l))s.current.set(l,u);else continue;a.push(l)}if(a.length===0)continue;const o=[...s.current.keys()].filter(l=>!this.current.has(l));if(o.length>0){var i=fe;fe=[];const l=new Set,u=new Map;for(const c of a)Qa(c,o,l,u);if(fe.length>0){vt=s,s.apply();for(const c of fe)s.#a(c,r);s.deactivate()}fe=i}}vt=null,ne=e}this.committed=!0,$r.delete(this)}increment(e){this.#r+=1,e&&(this.#n+=1)}decrement(e){this.#r-=1,e&&(this.#n-=1),this.revive()}revive(){for(const e of this.#s)Rt(e,Qt),yn(e);for(const e of this.#i)Rt(e,Te),yn(e);this.#s=[],this.#i=[],this.flush()}oncommit(e){this.#t.add(e)}ondiscard(e){this.#e.add(e)}settled(){return(this.#l??=qa()).promise}static ensure(){if(vt===null){const e=vt=new Me;$r.add(vt),or||Me.enqueue(()=>{vt===e&&e.flush()})}return vt}static enqueue(e){Gn(e)}apply(){}}function Xl(t){var e=or;or=!0;try{for(var n;;){if(Yl(),fe.length===0&&(vt?.flush(),fe.length===0))return di=null,n;Ka()}}finally{or=e}}function Ka(){var t=tn;Bi=!0;var e=null;try{var n=0;for(Br(!0);fe.length>0;){var r=Me.ensure();if(n++>1e3){var i,s;Gl()}r.process(fe),Je.clear()}}finally{Bi=!1,Br(t),di=null}}function Gl(){try{Tl()}catch(t){Dn(t,di)}}let Ie=null;function Ps(t){var e=t.length;if(e!==0){for(var n=0;n<e;){var r=t[n++];if((r.f&(ze|re))===0&&Qn(r)&&(Ie=new Set,Vn(r),r.deps===null&&r.first===null&&r.nodes_start===null&&(r.teardown===null&&r.ac===null?fo(r):r.fn=null),Ie?.size>0)){Je.clear();for(const i of Ie){if((i.f&(ze|re))!==0)continue;const s=[i];let a=i.parent;for(;a!==null;)Ie.has(a)&&(Ie.delete(a),s.push(a)),a=a.parent;for(let o=s.length-1;o>=0;o--){const l=s[o];(l.f&(ze|re))===0&&Vn(l)}}Ie.clear()}}Ie=null}}function Qa(t,e,n,r){if(!n.has(t)&&(n.add(t),t.reactions!==null))for(const i of t.reactions){const s=i.f;(s&Ot)!==0?Qa(i,e,n,r):(s&(vs|Ve))!==0&&(s&Qt)===0&&Za(i,e,r)&&(Rt(i,Qt),yn(i))}}function Za(t,e,n){const r=n.get(t);if(r!==void 0)return r;if(t.deps!==null)for(const i of t.deps){if(e.includes(i))return!0;if((i.f&Ot)!==0&&Za(i,e,n))return n.set(i,!0),!0}return n.set(t,!1),!1}function yn(t){for(var e=di=t;e.parent!==null;){e=e.parent;var n=e.f;if(Bi&&e===ct&&(n&Ve)!==0&&(n&Va)===0)return;if((n&(bn|je))!==0){if((n&It)===0)return;e.f^=It}}fe.push(e)}function Kl(t){let e=0,n=xn(0),r;return()=>{gi()&&(v(n),Kn(()=>(e===0&&(r=D(()=>t(()=>lr(n)))),e+=1,()=>{Gn(()=>{e-=1,e===0&&(r?.(),r=void 0,lr(n))})})))}}var Ql=zn|Wn|hi;function Zl(t,e,n){new Jl(t,e,n)}class Jl{parent;#t=!1;#e;#r=null;#n;#l;#s;#i=null;#a=null;#o=null;#u=null;#c=null;#f=0;#h=0;#v=!1;#d=null;#y=Kl(()=>(this.#d=xn(this.#f),()=>{this.#d=null}));constructor(e,n,r){this.#e=e,this.#n=n,this.#l=r,this.parent=ct.b,this.#t=!!this.#n.pending,this.#s=_i(()=>{ct.b=this;{var i=this.#_();try{this.#i=he(()=>r(i))}catch(s){this.error(s)}this.#h>0?this.#g():this.#t=!1}return()=>{this.#c?.remove()}},Ql)}#x(){try{this.#i=he(()=>this.#l(this.#e))}catch(e){this.error(e)}this.#t=!1}#w(){const e=this.#n.pending;e&&(this.#a=he(()=>e(this.#e)),Me.enqueue(()=>{var n=this.#_();this.#i=this.#p(()=>(Me.ensure(),he(()=>this.#l(n)))),this.#h>0?this.#g():(Rn(this.#a,()=>{this.#a=null}),this.#t=!1)}))}#_(){var e=this.#e;return this.#t&&(this.#c=en(),this.#e.before(this.#c),e=this.#c),e}is_pending(){return this.#t||!!this.parent&&this.parent.is_pending()}has_pending_snippet(){return!!this.#n.pending}#p(e){var n=ct,r=it,i=ht;Se(this.#s),Xt(this.#s),Pn(this.#s.ctx);try{return e()}catch(s){return Ga(s),null}finally{Se(n),Xt(r),Pn(i)}}#g(){const e=this.#n.pending;this.#i!==null&&(this.#u=document.createDocumentFragment(),this.#u.append(this.#c),po(this.#i,this.#u)),this.#a===null&&(this.#a=he(()=>e(this.#e)))}#m(e){if(!this.has_pending_snippet()){this.parent&&this.parent.#m(e);return}this.#h+=e,this.#h===0&&(this.#t=!1,this.#a&&Rn(this.#a,()=>{this.#a=null}),this.#u&&(this.#e.before(this.#u),this.#u=null))}update_pending_count(e){this.#m(e),this.#f+=e,this.#d&&Ln(this.#d,this.#f)}get_effect_pending(){return this.#y(),v(this.#d)}error(e){var n=this.#n.onerror;let r=this.#n.failed;if(this.#v||!n&&!r)throw e;this.#i&&(Kt(this.#i),this.#i=null),this.#a&&(Kt(this.#a),this.#a=null),this.#o&&(Kt(this.#o),this.#o=null);var i=!1,s=!1;const a=()=>{if(i){Bl();return}i=!0,s&&Ol(),Me.ensure(),this.#f=0,this.#o!==null&&Rn(this.#o,()=>{this.#o=null}),this.#t=this.has_pending_snippet(),this.#i=this.#p(()=>(this.#v=!1,he(()=>this.#l(this.#e)))),this.#h>0?this.#g():this.#t=!1};var o=it;try{Xt(null),s=!0,n?.(e,a),s=!1}catch(l){Dn(l,this.#s&&this.#s.parent)}finally{Xt(o)}r&&Gn(()=>{this.#o=this.#p(()=>{Me.ensure(),this.#v=!0;try{return he(()=>{r(this.#e,()=>e,()=>a)})}catch(l){return Dn(l,this.#s.parent),null}finally{this.#v=!1}})})}}function tu(t,e,n,r){const i=Xn()?vi:$e;if(n.length===0&&t.length===0){r(e.map(i));return}var s=vt,a=ct,o=eu();function l(){Promise.all(n.map(u=>nu(u))).then(u=>{o();try{r([...e.map(i),...u])}catch(c){(a.f&ze)===0&&Dn(c,a)}s?.deactivate(),jr()}).catch(u=>{Dn(u,a)})}t.length>0?Promise.all(t).then(()=>{o();try{return l()}finally{s?.deactivate(),jr()}}):l()}function eu(){var t=ct,e=it,n=ht,r=vt;return function(s=!0){Se(t),Xt(e),Pn(n),s&&r?.activate()}}function jr(){Se(null),Xt(null),Pn(null)}function vi(t){var e=Ot|Qt,n=it!==null&&(it.f&Ot)!==0?it:null;return ct!==null&&(ct.f|=Wn),{ctx:ht,deps:null,effects:null,equals:Wa,f:e,fn:t,reactions:null,rv:0,v:Dt,wv:0,parent:n??ct,ac:null}}function nu(t,e){let n=ct;n===null&&Ml();var r=n.b,i=void 0,s=xn(Dt),a=!it,o=new Map;return du(()=>{var l=qa();i=l.promise;try{Promise.resolve(t()).then(l.resolve,l.reject).then(()=>{u===vt&&u.committed&&u.deactivate(),jr()})}catch(f){l.reject(f),jr()}var u=vt;if(a){var c=!r.is_pending();r.update_pending_count(1),u.increment(c),o.get(u)?.reject(Sn),o.delete(u),o.set(u,l)}const h=(f,d=void 0)=>{if(u.activate(),d)d!==Sn&&(s.f|=Ze,Ln(s,d));else{(s.f&Ze)!==0&&(s.f^=Ze),Ln(s,f);for(const[g,m]of o){if(o.delete(g),g===u)break;m.reject(Sn)}}a&&(r.update_pending_count(-1),u.decrement(c))};l.promise.then(h,f=>h(null,f||"unknown"))}),ms(()=>{for(const l of o.values())l.reject(Sn)}),new Promise(l=>{function u(c){function h(){c===i?l(s):u(i)}c.then(h,h)}u(i)})}function ru(t){const e=vi(t);return go(e),e}function $e(t){const e=vi(t);return e.equals=Ya,e}function Ja(t){var e=t.effects;if(e!==null){t.effects=null;for(var n=0;n<e.length;n+=1)Kt(e[n])}}function iu(t){for(var e=t.parent;e!==null;){if((e.f&Ot)===0)return(e.f&ze)===0?e:null;e=e.parent}return null}function _s(t){var e,n=ct;Se(iu(t));try{t.f&=~mn,Ja(t),e=xo(t)}finally{Se(n)}return e}function to(t){var e=_s(t);if(t.equals(e)||(t.v=e,t.wv=mo()),!$n)if(ne!==null)gi()&&ne.set(t,t.v);else{var n=(t.f&_e)===0?Te:It;Rt(t,n)}}let Ui=new Set;const Je=new Map;let eo=!1;function xn(t,e){var n={f:0,v:t,reactions:null,equals:Wa,rv:0,wv:0};return n}function We(t,e){const n=xn(t);return go(n),n}function ut(t,e=!1,n=!0){const r=xn(t);return e||(r.equals=Ya),Yn&&n&&ht!==null&&ht.l!==null&&(ht.l.s??=[]).push(r),r}function H(t,e,n=!1){it!==null&&(!Ee||(it.f&zs)!==0)&&Xn()&&(it.f&(Ot|Ve|vs|zs))!==0&&!Pe?.includes(t)&&Rl();let r=n?Tn(e):e;return Ln(t,r)}function Ln(t,e){if(!t.equals(e)){var n=t.v;$n?Je.set(t,e):Je.set(t,n),t.v=e;var r=Me.ensure();r.capture(t,n),(t.f&Ot)!==0&&((t.f&Qt)!==0&&_s(t),Rt(t,(t.f&_e)!==0?It:Te)),t.wv=mo(),no(t,Qt),Xn()&&ct!==null&&(ct.f&It)!==0&&(ct.f&(je|bn))===0&&(ce===null?gu([t]):ce.push(t)),!r.is_fork&&Ui.size>0&&!eo&&su()}return e}function su(){eo=!1;var t=tn;Br(!0);const e=Array.from(Ui);try{for(const n of e)(n.f&It)!==0&&Rt(n,Te),Qn(n)&&Vn(n)}finally{Br(t)}Ui.clear()}function lr(t){H(t,t.v+1)}function no(t,e){var n=t.reactions;if(n!==null)for(var r=Xn(),i=n.length,s=0;s<i;s++){var a=n[s],o=a.f;if(!(!r&&a===ct)){var l=(o&Qt)===0;if(l&&Rt(a,e),(o&Ot)!==0){var u=a;ne?.delete(u),(o&mn)===0&&(o&_e&&(a.f|=mn),no(u,Te))}else l&&((o&Ve)!==0&&Ie!==null&&Ie.add(a),yn(a))}}}function Tn(t){if(typeof t!="object"||t===null||pn in t)return t;const e=fs(t);if(e!==yl&&e!==xl)return t;var n=new Map,r=Pa(t),i=We(0),s=gn,a=o=>{if(gn===s)return o();var l=it,u=gn;Xt(null),Vs(s);var c=o();return Xt(l),Vs(u),c};return r&&n.set("length",We(t.length)),new Proxy(t,{defineProperty(o,l,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Fl();var c=n.get(l);return c===void 0?c=a(()=>{var h=We(u.value);return n.set(l,h),h}):H(c,u.value,!0),!0},deleteProperty(o,l){var u=n.get(l);if(u===void 0){if(l in o){const c=a(()=>We(Dt));n.set(l,c),lr(i)}}else H(u,Dt),lr(i);return!0},get(o,l,u){if(l===pn)return t;var c=n.get(l),h=l in o;if(c===void 0&&(!h||In(o,l)?.writable)&&(c=a(()=>{var d=Tn(h?o[l]:Dt),g=We(d);return g}),n.set(l,c)),c!==void 0){var f=v(c);return f===Dt?void 0:f}return Reflect.get(o,l,u)},getOwnPropertyDescriptor(o,l){var u=Reflect.getOwnPropertyDescriptor(o,l);if(u&&"value"in u){var c=n.get(l);c&&(u.value=v(c))}else if(u===void 0){var h=n.get(l),f=h?.v;if(h!==void 0&&f!==Dt)return{enumerable:!0,configurable:!0,value:f,writable:!0}}return u},has(o,l){if(l===pn)return!0;var u=n.get(l),c=u!==void 0&&u.v!==Dt||Reflect.has(o,l);if(u!==void 0||ct!==null&&(!c||In(o,l)?.writable)){u===void 0&&(u=a(()=>{var f=c?Tn(o[l]):Dt,d=We(f);return d}),n.set(l,u));var h=v(u);if(h===Dt)return!1}return c},set(o,l,u,c){var h=n.get(l),f=l in o;if(r&&l==="length")for(var d=u;d<h.v;d+=1){var g=n.get(d+"");g!==void 0?H(g,Dt):d in o&&(g=a(()=>We(Dt)),n.set(d+"",g))}if(h===void 0)(!f||In(o,l)?.writable)&&(h=a(()=>We(void 0)),H(h,Tn(u)),n.set(l,h));else{f=h.v!==Dt;var m=a(()=>Tn(u));H(h,m)}var p=Reflect.getOwnPropertyDescriptor(o,l);if(p?.set&&p.set.call(c,u),!f){if(r&&typeof l=="string"){var _=n.get("length"),y=Number(l);Number.isInteger(y)&&y>=_.v&&H(_,y+1)}lr(i)}return!0},ownKeys(o){v(i);var l=Reflect.ownKeys(o).filter(h=>{var f=n.get(h);return f===void 0||f.v!==Dt});for(var[u,c]of n)c.v!==Dt&&!(u in o)&&l.push(u);return l},setPrototypeOf(){Il()}})}var Ds,ro,io,so;function au(){if(Ds===void 0){Ds=window,ro=/Firefox/.test(navigator.userAgent);var t=Element.prototype,e=Node.prototype,n=Text.prototype;io=In(e,"firstChild").get,so=In(e,"nextSibling").get,Os(t)&&(t.__click=void 0,t.__className=void 0,t.__attributes=null,t.__style=void 0,t.__e=void 0),Os(n)&&(n.__t=void 0)}}function en(t=""){return document.createTextNode(t)}function qn(t){return io.call(t)}function vr(t){return so.call(t)}function P(t,e){return qn(t)}function Re(t,e=!1){{var n=qn(t);return n instanceof Comment&&n.data===""?vr(n):n}}function J(t,e=1,n=!1){let r=t;for(;e--;)r=vr(r);return r}function ou(t){t.textContent=""}function ao(){return!1}let Ls=!1;function lu(){Ls||(Ls=!0,document.addEventListener("reset",t=>{Promise.resolve().then(()=>{if(!t.defaultPrevented)for(const e of t.target.elements)e.__on_r?.()})},{capture:!0}))}function pi(t){var e=it,n=ct;Xt(null),Se(null);try{return t()}finally{Xt(e),Se(n)}}function uu(t,e,n,r=n){t.addEventListener(e,()=>pi(n));const i=t.__on_r;i?t.__on_r=()=>{i(),r(!0)}:t.__on_r=()=>r(!0),lu()}function oo(t){ct===null&&(it===null&&Sl(),kl()),$n&&El()}function cu(t,e){var n=e.last;n===null?e.last=e.first=t:(n.next=t,t.prev=n,e.last=t)}function Ne(t,e,n){var r=ct;r!==null&&(r.f&re)!==0&&(t|=re);var i={ctx:ht,deps:null,nodes_start:null,nodes_end:null,f:t|Qt|_e,first:null,fn:e,last:null,next:null,parent:r,b:r&&r.b,prev:null,teardown:null,transitions:null,wv:0,ac:null};if(n)try{Vn(i),i.f|=ds}catch(o){throw Kt(i),o}else e!==null&&yn(i);var s=i;if(n&&s.deps===null&&s.teardown===null&&s.nodes_start===null&&s.first===s.last&&(s.f&Wn)===0&&(s=s.first,(t&Ve)!==0&&(t&zn)!==0&&s!==null&&(s.f|=zn)),s!==null&&(s.parent=r,r!==null&&cu(s,r),it!==null&&(it.f&Ot)!==0&&(t&bn)===0)){var a=it;(a.effects??=[]).push(s)}return i}function gi(){return it!==null&&!Ee}function ms(t){const e=Ne(fi,null,!1);return Rt(e,It),e.teardown=t,e}function Wi(t){oo();var e=ct.f,n=!it&&(e&je)!==0&&(e&ds)===0;if(n){var r=ht;(r.e??=[]).push(t)}else return lo(t)}function lo(t){return Ne(hs|ja,t,!1)}function fu(t){return oo(),Ne(fi|ja,t,!0)}function hu(t){Me.ensure();const e=Ne(bn|Wn,t,!0);return(n={})=>new Promise(r=>{n.outro?Rn(e,()=>{Kt(e),r(void 0)}):(Kt(e),r(void 0))})}function Hr(t){return Ne(hs,t,!1)}function mt(t,e){var n=ht,r={effect:null,ran:!1,deps:t};n.l.$.push(r),r.effect=Kn(()=>{t(),!r.ran&&(r.ran=!0,D(e))})}function He(){var t=ht;Kn(()=>{for(var e of t.l.$){e.deps();var n=e.effect;(n.f&It)!==0&&Rt(n,Te),Qn(n)&&Vn(n),e.ran=!1}})}function du(t){return Ne(vs|Wn,t,!0)}function Kn(t,e=0){return Ne(fi|e,t,!0)}function lt(t,e=[],n=[],r=[]){tu(r,e,n,i=>{Ne(fi,()=>t(...i.map(v)),!0)})}function _i(t,e=0){var n=Ne(Ve|e,t,!0);return n}function he(t){return Ne(je|Wn,t,!0)}function uo(t){var e=t.teardown;if(e!==null){const n=$n,r=it;qs(!0),Xt(null);try{e.call(null)}finally{qs(n),Xt(r)}}}function co(t,e=!1){var n=t.first;for(t.first=t.last=null;n!==null;){const i=n.ac;i!==null&&pi(()=>{i.abort(Sn)});var r=n.next;(n.f&bn)!==0?n.parent=null:Kt(n,e),n=r}}function vu(t){for(var e=t.first;e!==null;){var n=e.next;(e.f&je)===0&&Kt(e),e=n}}function Kt(t,e=!0){var n=!1;(e||(t.f&Va)!==0)&&t.nodes_start!==null&&t.nodes_end!==null&&(pu(t.nodes_start,t.nodes_end),n=!0),co(t,e&&!n),Ur(t,0),Rt(t,ze);var r=t.transitions;if(r!==null)for(const s of r)s.stop();uo(t);var i=t.parent;i!==null&&i.first!==null&&fo(t),t.next=t.prev=t.teardown=t.ctx=t.deps=t.fn=t.nodes_start=t.nodes_end=t.ac=null}function pu(t,e){for(;t!==null;){var n=t===e?null:vr(t);t.remove(),t=n}}function fo(t){var e=t.parent,n=t.prev,r=t.next;n!==null&&(n.next=r),r!==null&&(r.prev=n),e!==null&&(e.first===t&&(e.first=r),e.last===t&&(e.last=n))}function Rn(t,e,n=!0){var r=[];ys(t,r,!0),ho(r,()=>{n&&Kt(t),e&&e()})}function ho(t,e){var n=t.length;if(n>0){var r=()=>--n||e();for(var i of t)i.out(r)}else e()}function ys(t,e,n){if((t.f&re)===0){if(t.f^=re,t.transitions!==null)for(const a of t.transitions)(a.is_global||n)&&e.push(a);for(var r=t.first;r!==null;){var i=r.next,s=(r.f&zn)!==0||(r.f&je)!==0&&(t.f&Ve)!==0;ys(r,e,s?n:!1),r=i}}}function xs(t){vo(t,!0)}function vo(t,e){if((t.f&re)!==0){t.f^=re,(t.f&It)===0&&(Rt(t,Qt),yn(t));for(var n=t.first;n!==null;){var r=n.next,i=(n.f&zn)!==0||(n.f&je)!==0;vo(n,i?e:!1),n=r}if(t.transitions!==null)for(const s of t.transitions)(s.is_global||e)&&s.in()}}function po(t,e){for(var n=t.nodes_start,r=t.nodes_end;n!==null;){var i=n===r?null:vr(n);e.append(n),n=i}}let tn=!1;function Br(t){tn=t}let $n=!1;function qs(t){$n=t}let it=null,Ee=!1;function Xt(t){it=t}let ct=null;function Se(t){ct=t}let Pe=null;function go(t){it!==null&&(Pe===null?Pe=[t]:Pe.push(t))}let Vt=null,te=0,ce=null;function gu(t){ce=t}let _o=1,ur=0,gn=ur;function Vs(t){gn=t}function mo(){return++_o}function Qn(t){var e=t.f;if((e&Qt)!==0)return!0;if(e&Ot&&(t.f&=~mn),(e&Te)!==0){var n=t.deps;if(n!==null)for(var r=n.length,i=0;i<r;i++){var s=n[i];if(Qn(s)&&to(s),s.wv>t.wv)return!0}(e&_e)!==0&&ne===null&&Rt(t,It)}return!1}function yo(t,e,n=!0){var r=t.reactions;if(r!==null&&!Pe?.includes(t))for(var i=0;i<r.length;i++){var s=r[i];(s.f&Ot)!==0?yo(s,e,!1):e===s&&(n?Rt(s,Qt):(s.f&It)!==0&&Rt(s,Te),yn(s))}}function xo(t){var e=Vt,n=te,r=ce,i=it,s=Pe,a=ht,o=Ee,l=gn,u=t.f;Vt=null,te=0,ce=null,it=(u&(je|bn))===0?t:null,Pe=null,Pn(t.ctx),Ee=!1,gn=++ur,t.ac!==null&&(pi(()=>{t.ac.abort(Sn)}),t.ac=null);try{t.f|=Hi;var c=t.fn,h=c(),f=t.deps;if(Vt!==null){var d;if(Ur(t,te),f!==null&&te>0)for(f.length=te+Vt.length,d=0;d<Vt.length;d++)f[te+d]=Vt[d];else t.deps=f=Vt;if(tn&&gi()&&(t.f&_e)!==0)for(d=te;d<f.length;d++)(f[d].reactions??=[]).push(t)}else f!==null&&te<f.length&&(Ur(t,te),f.length=te);if(Xn()&&ce!==null&&!Ee&&f!==null&&(t.f&(Ot|Te|Qt))===0)for(d=0;d<ce.length;d++)yo(ce[d],t);return i!==null&&i!==t&&(ur++,ce!==null&&(r===null?r=ce:r.push(...ce))),(t.f&Ze)!==0&&(t.f^=Ze),h}catch(g){return Ga(g)}finally{t.f^=Hi,Vt=e,te=n,ce=r,it=i,Pe=s,Pn(a),Ee=o,gn=l}}function _u(t,e){let n=e.reactions;if(n!==null){var r=ml.call(n,t);if(r!==-1){var i=n.length-1;i===0?n=e.reactions=null:(n[r]=n[i],n.pop())}}n===null&&(e.f&Ot)!==0&&(Vt===null||!Vt.includes(e))&&(Rt(e,Te),(e.f&_e)!==0&&(e.f^=_e,e.f&=~mn),Ja(e),Ur(e,0))}function Ur(t,e){var n=t.deps;if(n!==null)for(var r=e;r<n.length;r++)_u(t,n[r])}function Vn(t){var e=t.f;if((e&ze)===0){Rt(t,It);var n=ct,r=tn;ct=t,tn=!0;try{(e&Ve)!==0?vu(t):co(t),uo(t);var i=xo(t);t.teardown=typeof i=="function"?i:null,t.wv=_o;var s;ji&&Ul&&(t.f&Qt)!==0&&t.deps}finally{tn=r,ct=n}}}async function Yi(){await Promise.resolve(),Xl()}function v(t){var e=t.f,n=(e&Ot)!==0;if(it!==null&&!Ee){var r=ct!==null&&(ct.f&ze)!==0;if(!r&&!Pe?.includes(t)){var i=it.deps;if((it.f&Hi)!==0)t.rv<ur&&(t.rv=ur,Vt===null&&i!==null&&i[te]===t?te++:Vt===null?Vt=[t]:Vt.includes(t)||Vt.push(t));else{(it.deps??=[]).push(t);var s=t.reactions;s===null?t.reactions=[it]:s.includes(it)||s.push(it)}}}if($n){if(Je.has(t))return Je.get(t);if(n){var a=t,o=a.v;return((a.f&It)===0&&a.reactions!==null||bo(a))&&(o=_s(a)),Je.set(a,o),o}}else if(n){if(a=t,ne?.has(a))return ne.get(a);Qn(a)&&to(a),tn&&gi()&&(a.f&_e)===0&&wo(a)}else if(ne?.has(t))return ne.get(t);if((t.f&Ze)!==0)throw t.v;return t.v}function wo(t){if(t.deps!==null){t.f^=_e;for(const e of t.deps)(e.reactions??=[]).push(t),(e.f&Ot)!==0&&(e.f&_e)===0&&wo(e)}}function bo(t){if(t.v===Dt)return!0;if(t.deps===null)return!1;for(const e of t.deps)if(Je.has(e)||(e.f&Ot)!==0&&bo(e))return!0;return!1}function D(t){var e=Ee;try{return Ee=!0,t()}finally{Ee=e}}const mu=-7169;function Rt(t,e){t.f=t.f&mu|e}function F(t){if(!(typeof t!="object"||!t||t instanceof EventTarget)){if(pn in t)Xi(t);else if(!Array.isArray(t))for(let e in t){const n=t[e];typeof n=="object"&&n&&pn in n&&Xi(n)}}}function Xi(t,e=new Set){if(typeof t=="object"&&t!==null&&!(t instanceof EventTarget)&&!e.has(t)){e.add(t),t instanceof Date&&t.getTime();for(let r in t)try{Xi(t[r],e)}catch{}const n=fs(t);if(n!==Object.prototype&&n!==Array.prototype&&n!==Map.prototype&&n!==Set.prototype&&n!==Date.prototype){const r=La(n);for(let i in r){const s=r[i].get;if(s)try{s.call(t)}catch{}}}}}const yu=["touchstart","touchmove"];function xu(t){return yu.includes(t)}const wu=new Set,js=new Set;function bu(t,e,n,r={}){function i(s){if(r.capture||er.call(e,s),!s.cancelBubble)return pi(()=>n?.call(this,s))}return t.startsWith("pointer")||t.startsWith("touch")||t==="wheel"?Gn(()=>{e.addEventListener(t,i,r)}):e.addEventListener(t,i,r),i}function pt(t,e,n,r,i){var s={capture:r,passive:i},a=bu(t,e,n,s);(e===document.body||e===window||e===document||e instanceof HTMLMediaElement)&&ms(()=>{e.removeEventListener(t,a,s)})}let Hs=null;function er(t){var e=this,n=e.ownerDocument,r=t.type,i=t.composedPath?.()||[],s=i[0]||t.target;Hs=t;var a=0,o=Hs===t&&t.__root;if(o){var l=i.indexOf(o);if(l!==-1&&(e===document||e===window)){t.__root=e;return}var u=i.indexOf(e);if(u===-1)return;l<=u&&(a=l)}if(s=i[a]||t.target,s!==e){Da(t,"currentTarget",{configurable:!0,get(){return s||n}});var c=it,h=ct;Xt(null),Se(null);try{for(var f,d=[];s!==null;){var g=s.assignedSlot||s.parentNode||s.host||null;try{var m=s["__"+r];m!=null&&(!s.disabled||t.target===s)&&m.call(s,t)}catch(p){f?d.push(p):f=p}if(t.cancelBubble||g===e||g===null)break;s=g}if(f){for(let p of d)queueMicrotask(()=>{throw p});throw f}}finally{t.__root=e,delete t.currentTarget,Xt(c),Se(h)}}}function $o(t){var e=document.createElement("template");return e.innerHTML=t.replaceAll("<!>","<!---->"),e.content}function Wr(t,e){var n=ct;n.nodes_start===null&&(n.nodes_start=t,n.nodes_end=e)}function Y(t,e){var n=(e&Vl)!==0,r=(e&jl)!==0,i,s=!t.startsWith("<!>");return()=>{i===void 0&&(i=$o(s?t:"<!>"+t),n||(i=qn(i)));var a=r||ro?document.importNode(i,!0):i.cloneNode(!0);if(n){var o=qn(a),l=a.lastChild;Wr(o,l)}else Wr(a,a);return a}}function $u(t,e,n="svg"){var r=!t.startsWith("<!>"),i=`<${n}>${r?t:"<!>"+t}</${n}>`,s;return()=>{if(!s){var a=$o(i),o=qn(a);s=qn(o)}var l=s.cloneNode(!0);return Wr(l,l),l}}function Ao(t,e){return $u(t,e,"svg")}function un(){var t=document.createDocumentFragment(),e=document.createComment(""),n=en();return t.append(e,n),Wr(e,n),t}function V(t,e){t!==null&&t.before(e)}function $t(t,e){var n=e==null?"":typeof e=="object"?e+"":e;n!==(t.__t??=t.nodeValue)&&(t.__t=n,t.nodeValue=n+"")}function Au(t,e){return Mu(t,e)}const An=new Map;function Mu(t,{target:e,anchor:n,props:r={},events:i,context:s,intro:a=!0}){au();var o=new Set,l=h=>{for(var f=0;f<h.length;f++){var d=h[f];if(!o.has(d)){o.add(d);var g=xu(d);e.addEventListener(d,er,{passive:g});var m=An.get(d);m===void 0?(document.addEventListener(d,er,{passive:g}),An.set(d,1)):An.set(d,m+1)}}};l(cs(wu)),js.add(l);var u=void 0,c=hu(()=>{var h=n??e.appendChild(en());return Zl(h,{pending:()=>{}},f=>{if(s){se({});var d=ht;d.c=s}i&&(r.$$events=i),u=t(f,r)||{},s&&ae()}),()=>{for(var f of o){e.removeEventListener(f,er);var d=An.get(f);--d===0?(document.removeEventListener(f,er),An.delete(f)):An.set(f,d)}js.delete(l),h!==n&&h.parentNode?.removeChild(h)}});return Eu.set(u,c),u}let Eu=new WeakMap;class Mo{anchor;#t=new Map;#e=new Map;#r=new Map;#n=new Set;#l=!0;constructor(e,n=!0){this.anchor=e,this.#l=n}#s=()=>{var e=vt;if(this.#t.has(e)){var n=this.#t.get(e),r=this.#e.get(n);if(r)xs(r),this.#n.delete(n);else{var i=this.#r.get(n);i&&(this.#e.set(n,i.effect),this.#r.delete(n),i.fragment.lastChild.remove(),this.anchor.before(i.fragment),r=i.effect)}for(const[s,a]of this.#t){if(this.#t.delete(s),s===e)break;const o=this.#r.get(a);o&&(Kt(o.effect),this.#r.delete(a))}for(const[s,a]of this.#e){if(s===n||this.#n.has(s))continue;const o=()=>{if(Array.from(this.#t.values()).includes(s)){var u=document.createDocumentFragment();po(a,u),u.append(en()),this.#r.set(s,{effect:a,fragment:u})}else Kt(a);this.#n.delete(s),this.#e.delete(s)};this.#l||!r?(this.#n.add(s),Rn(a,o,!1)):o()}}};#i=e=>{this.#t.delete(e);const n=Array.from(this.#t.values());for(const[r,i]of this.#r)n.includes(r)||(Kt(i.effect),this.#r.delete(r))};ensure(e,n){var r=vt,i=ao();if(n&&!this.#e.has(e)&&!this.#r.has(e))if(i){var s=document.createDocumentFragment(),a=en();s.append(a),this.#r.set(e,{effect:he(()=>n(a)),fragment:s})}else this.#e.set(e,he(()=>n(this.anchor)));if(this.#t.set(r,e),i){for(const[o,l]of this.#e)o===e?r.skipped_effects.delete(l):r.skipped_effects.add(l);for(const[o,l]of this.#r)o===e?r.skipped_effects.delete(l.effect):r.skipped_effects.add(l.effect);r.oncommit(this.#s),r.ondiscard(this.#i)}else this.#s()}}function _t(t,e,n=!1){var r=new Mo(t),i=n?zn:0;function s(a,o){r.ensure(a,o)}_i(()=>{var a=!1;e((o,l=!0)=>{a=!0,s(l,o)}),a||s(!1,null)},i)}function ku(t,e,n){var r=new Mo(t),i=!Xn();_i(()=>{var s=e();i&&s!==null&&typeof s=="object"&&(s={}),r.ensure(s,n)})}function Ae(t,e){return e}function Su(t,e,n){for(var r=[],i=e.length,s=0;s<i;s++)ys(e[s].e,r,!0);ho(r,()=>{var a=r.length===0&&n!==null;if(a){var o=n,l=o.parentNode;ou(l),l.append(o),t.items.clear(),be(t,e[0].prev,e[i-1].next)}for(var u=0;u<i;u++){var c=e[u];a||(t.items.delete(c.k),be(t,c.prev,c.next)),Kt(c.e,!a)}t.first===e[0]&&(t.first=e[0].prev)})}function ve(t,e,n,r,i,s=null){var a=t,o=new Map,l=null,u=(e&Ua)!==0,c=(e&Ha)!==0,h=(e&Ba)!==0;if(u){var f=t;a=f.appendChild(en())}var d=null,g=$e(()=>{var w=n();return Pa(w)?w:w==null?[]:cs(w)}),m,p=!0;function _(){Tu(x,m,a,e,r),d!==null&&(m.length===0?(d.fragment?(a.before(d.fragment),d.fragment=null):xs(d.effect),y.first=d.effect):Rn(d.effect,()=>{d=null}))}var y=_i(()=>{m=v(g);for(var w=m.length,M=new Set,T=vt,L=null,I=ao(),$=0;$<w;$+=1){var N=m[$],A=r(N,$),k=p?null:o.get(A);k?(c&&Ln(k.v,N),h?Ln(k.i,$):k.i=$,I&&T.skipped_effects.delete(k.e)):(k=Nu(p?a:null,L,N,A,$,i,e,n),p&&(k.o=!0,L===null?l=k:L.next=k,L=k),o.set(A,k)),M.add(A)}if(w===0&&s&&!d)if(p)d={fragment:null,effect:he(()=>s(a))};else{var b=document.createDocumentFragment(),R=en();b.append(R),d={fragment:b,effect:he(()=>s(R))}}if(!p)if(I){for(const[ft,At]of o)M.has(ft)||T.skipped_effects.add(At.e);T.oncommit(_),T.ondiscard(()=>{})}else _();v(g)}),x={effect:y,items:o,first:l};p=!1}function Tu(t,e,n,r,i){var s=(r&zl)!==0,a=e.length,o=t.items,l=t.first,u,c=null,h,f=[],d=[],g,m,p,_;if(s)for(_=0;_<a;_+=1)g=e[_],m=i(g,_),p=o.get(m),p.a?.measure(),(h??=new Set).add(p);for(_=0;_<a;_+=1){if(g=e[_],m=i(g,_),p=o.get(m),t.first??=p,!p.o){p.o=!0;var y=c?c.next:l;be(t,c,p),be(t,p,y),Ni(p,y,n),c=p,f=[],d=[],l=c.next;continue}if((p.e.f&re)!==0&&(xs(p.e),s&&(p.a?.unfix(),(h??=new Set).delete(p))),p!==l){if(u!==void 0&&u.has(p)){if(f.length<d.length){var x=d[0],w;c=x.prev;var M=f[0],T=f[f.length-1];for(w=0;w<f.length;w+=1)Ni(f[w],x,n);for(w=0;w<d.length;w+=1)u.delete(d[w]);be(t,M.prev,T.next),be(t,c,M),be(t,T,x),l=x,c=T,_-=1,f=[],d=[]}else u.delete(p),Ni(p,l,n),be(t,p.prev,p.next),be(t,p,c===null?t.first:c.next),be(t,c,p),c=p;continue}for(f=[],d=[];l!==null&&l.k!==m;)(l.e.f&re)===0&&(u??=new Set).add(l),d.push(l),l=l.next;if(l===null)continue;p=l}f.push(p),c=p,l=p.next}if(l!==null||u!==void 0){for(var L=u===void 0?[]:cs(u);l!==null;)(l.e.f&re)===0&&L.push(l),l=l.next;var I=L.length;if(I>0){var $=(r&Ua)!==0&&a===0?n:null;if(s){for(_=0;_<I;_+=1)L[_].a?.measure();for(_=0;_<I;_+=1)L[_].a?.fix()}Su(t,L,$)}}s&&Gn(()=>{if(h!==void 0)for(p of h)p.a?.apply()})}function Nu(t,e,n,r,i,s,a,o){var l=(a&Ha)!==0,u=(a&Pl)===0,c=l?u?ut(n,!1,!1):xn(n):n,h=(a&Ba)===0?i:xn(i),f={i:h,v:c,k:r,a:null,e:null,o:!1,prev:e,next:null};try{if(t===null){var d=document.createDocumentFragment();d.append(t=en())}return f.e=he(()=>s(t,c,h,o)),e!==null&&(e.next=f),f}finally{}}function Ni(t,e,n){for(var r=t.next?t.next.e.nodes_start:n,i=e?e.e.nodes_start:n,s=t.e.nodes_start;s!==null&&s!==r;){var a=vr(s);i.before(s),s=a}}function be(t,e,n){e===null?(t.first=n,t.effect.first=n&&n.e):(e.e.next&&(e.e.next.prev=null),e.next=n,e.e.next=n&&n.e),n===null?t.effect.last=e&&e.e:(n.e.prev&&(n.e.prev.next=null),n.prev=e,n.e.prev=e&&e.e)}function Cu(t,e,n){Hr(()=>{var r=D(()=>e(t,n?.())||{});if(n&&r?.update){var i=!1,s={};Kn(()=>{var a=n();F(a),i&&gs(s,a)&&(s=a,r.update(a))}),i=!0}if(r?.destroy)return()=>r.destroy()})}const Bs=[...` 	
\r\fÂ \v\uFEFF`];function Fu(t,e,n){var r=t==null?"":""+t;if(n){for(var i in n)if(n[i])r=r?r+" "+i:i;else if(r.length)for(var s=i.length,a=0;(a=r.indexOf(i,a))>=0;){var o=a+s;(a===0||Bs.includes(r[a-1]))&&(o===r.length||Bs.includes(r[o]))?r=(a===0?"":r.substring(0,a))+r.substring(o+1):a=o}}return r===""?null:r}function Iu(t,e){return t==null?null:String(t)}function De(t,e,n,r,i,s){var a=t.__className;if(a!==n||a===void 0){var o=Fu(n,r,s);o==null?t.removeAttribute("class"):t.className=o,t.__className=n}else if(s&&i!==s)for(var l in s){var u=!!s[l];(i==null||u!==!!i[l])&&t.classList.toggle(l,u)}return s}function Yr(t,e,n,r){var i=t.__style;if(i!==e){var s=Iu(e);s==null?t.removeAttribute("style"):t.style.cssText=s,t.__style=e}return r}const Ru=Symbol("is custom element"),Ou=Symbol("is html");function zu(t,e){var n=ws(t);n.value===(n.value=e??void 0)||t.value===e&&(e!==0||t.nodeName!=="PROGRESS")||(t.value=e??"")}function Xr(t,e){var n=ws(t);n.checked!==(n.checked=e??void 0)&&(t.checked=e)}function me(t,e,n,r){var i=ws(t);i[e]!==(i[e]=n)&&(e==="loading"&&(t[Al]=n),n==null?t.removeAttribute(e):typeof n!="string"&&Pu(t).includes(e)?t[e]=n:t.setAttribute(e,n))}function ws(t){return t.__attributes??={[Ru]:t.nodeName.includes("-"),[Ou]:t.namespaceURI===Hl}}var Us=new Map;function Pu(t){var e=t.getAttribute("is")||t.nodeName,n=Us.get(e);if(n)return n;Us.set(e,n=[]);for(var r,i=t,s=Element.prototype;s!==i;){r=La(i);for(var a in r)r[a].set&&n.push(a);i=fs(i)}return n}function Du(t,e,n=e){var r=new WeakSet;uu(t,"input",async i=>{var s=i?t.defaultValue:t.value;if(s=Ci(t)?Fi(s):s,n(s),vt!==null&&r.add(vt),await Yi(),s!==(s=e())){var a=t.selectionStart,o=t.selectionEnd,l=t.value.length;if(t.value=s??"",o!==null){var u=t.value.length;a===o&&o===l&&u>l?(t.selectionStart=u,t.selectionEnd=u):(t.selectionStart=a,t.selectionEnd=Math.min(o,u))}}}),D(e)==null&&t.value&&(n(Ci(t)?Fi(t.value):t.value),vt!==null&&r.add(vt)),Kn(()=>{var i=e();if(t===document.activeElement){var s=Rr??vt;if(r.has(s))return}Ci(t)&&i===Fi(t.value)||t.type==="date"&&!i&&!t.value||i!==t.value&&(t.value=i??"")})}function Ci(t){var e=t.type;return e==="number"||e==="range"}function Fi(t){return t===""?null:+t}function Ws(t,e){return t===e||t?.[pn]===e}function mi(t={},e,n,r){return Hr(()=>{var i,s;return Kn(()=>{i=s,s=[],D(()=>{t!==n(...s)&&(e(t,...s),i&&Ws(n(...i),t)&&e(null,...i))})}),()=>{Gn(()=>{s&&Ws(n(...s),t)&&e(null,...s)})}}),t}function de(t=!1){const e=ht,n=e.l.u;if(!n)return;let r=()=>F(e.s);if(t){let i=0,s={};const a=vi(()=>{let o=!1;const l=e.s;for(const u in l)l[u]!==s[u]&&(s[u]=l[u],o=!0);return o&&i++,i});r=()=>v(a)}n.b.length&&fu(()=>{Ys(e,r),Vr(n.b)}),Wi(()=>{const i=D(()=>n.m.map(wl));return()=>{for(const s of i)typeof s=="function"&&s()}}),n.a.length&&Wi(()=>{Ys(e,r),Vr(n.a)})}function Ys(t,e){if(t.l.s)for(const n of t.l.s)v(n);e()}function bs(t,e,n){if(t==null)return e(void 0),n&&n(void 0),Oe;const r=D(()=>t.subscribe(e,n));return r.unsubscribe?()=>r.unsubscribe():r}const Mn=[];function Lu(t,e){return{subscribe:Zt(t,e).subscribe}}function Zt(t,e=Oe){let n=null;const r=new Set;function i(o){if(gs(t,o)&&(t=o,n)){const l=!Mn.length;for(const u of r)u[1](),Mn.push(u,t);if(l){for(let u=0;u<Mn.length;u+=2)Mn[u][0](Mn[u+1]);Mn.length=0}}}function s(o){i(o(t))}function a(o,l=Oe){const u=[o,l];return r.add(u),r.size===1&&(n=e(i,s)||Oe),o(t),()=>{r.delete(u),r.size===0&&n&&(n(),n=null)}}return{set:i,update:s,subscribe:a}}function ye(t,e,n){const r=!Array.isArray(t),i=r?[t]:t;if(!i.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const s=e.length<2;return Lu(n,(a,o)=>{let l=!1;const u=[];let c=0,h=Oe;const f=()=>{if(c)return;h();const g=e(r?u[0]:u,a,o);s?a(g):h=typeof g=="function"?g:Oe},d=i.map((g,m)=>bs(g,p=>{u[m]=p,c&=~(1<<m),l&&f()},()=>{c|=1<<m}));return l=!0,f(),function(){Vr(d),h(),l=!1}})}function qu(t){let e;return bs(t,n=>e=n)(),e}let Ar=!1,Gi=Symbol();function nt(t,e,n){const r=n[e]??={store:null,source:ut(void 0),unsubscribe:Oe};if(r.store!==t&&!(Gi in n))if(r.unsubscribe(),r.store=t??null,t==null)r.source.v=void 0,r.unsubscribe=Oe;else{var i=!0;r.unsubscribe=bs(t,s=>{i?r.source.v=s:H(r.source,s)}),i=!1}return t&&Gi in n?qu(t):v(r.source)}function Vu(t,e,n){let r=n[e];return r&&r.store!==t&&(r.unsubscribe(),r.unsubscribe=Oe),t}function Be(){const t={};function e(){ms(()=>{for(var n in t)t[n].unsubscribe();Da(t,Gi,{enumerable:!1,value:!0})})}return[t,e]}function ju(t){var e=Ar;try{return Ar=!1,[t(),Ar]}finally{Ar=e}}function kt(t,e,n,r){var i=!Yn||(n&Dl)!==0,s=(n&ql)!==0,a=r,o=!0,l=()=>(o&&(o=!1,a=r),a),u;{var c=pn in t||$l in t;u=In(t,e)?.set??(c&&e in t?y=>t[e]=y:void 0)}var h,f=!1;[h,f]=ju(()=>t[e]),h===void 0&&r!==void 0&&(h=l(),u&&(i&&Cl(),u(h)));var d;if(i?d=()=>{var y=t[e];return y===void 0?l():(o=!0,y)}:d=()=>{var y=t[e];return y!==void 0&&(a=void 0),y===void 0?a:y},i&&(n&Ll)===0)return d;if(u){var g=t.$$legacy;return(function(y,x){return arguments.length>0?((!i||!x||g||f)&&u(x?d():y),y):d()})}var m=!1,p=$e(()=>(m=!1,d()));v(p);var _=ct;return(function(y,x){if(arguments.length>0){const w=x?v(p):i&&s?Tn(y):y;return H(p,w),m=!0,a!==void 0&&(a=w),y}return $n&&m||(_.f&ze)!==0?p.v:v(p)})}function pr(t){ht===null&&ps(),Yn&&ht.l!==null?ko(ht).m.push(t):Wi(()=>{const e=D(t);if(typeof e=="function")return e})}function Hu(t){ht===null&&ps(),pr(()=>()=>D(t))}function Eo(t){ht===null&&ps(),ht.l===null&&Nl(),ko(ht).a.push(t)}function ko(t){var e=t.l;return e.u??={a:[],b:[],m:[]}}const Bu="5";typeof window<"u"&&((window.__svelte??={}).v??=new Set).add(Bu);Wl();function Or(t,e){return t==null||e==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Uu(t,e){return t==null||e==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function So(t){let e,n,r;t.length!==2?(e=Or,n=(o,l)=>Or(t(o),l),r=(o,l)=>t(o)-l):(e=t===Or||t===Uu?t:Wu,n=t,r=t);function i(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const h=u+c>>>1;n(o[h],l)<0?u=h+1:c=h}while(u<c)}return u}function s(o,l,u=0,c=o.length){if(u<c){if(e(l,l)!==0)return c;do{const h=u+c>>>1;n(o[h],l)<=0?u=h+1:c=h}while(u<c)}return u}function a(o,l,u=0,c=o.length){const h=i(o,l,u,c-1);return h>u&&r(o[h-1],l)>-r(o[h],l)?h-1:h}return{left:i,center:a,right:s}}function Wu(){return 0}function Yu(t){return t===null?NaN:+t}const Xu=So(Or),Gu=Xu.right;So(Yu).center;const Ku=Math.sqrt(50),Qu=Math.sqrt(10),Zu=Math.sqrt(2);function Gr(t,e,n){const r=(e-t)/Math.max(0,n),i=Math.floor(Math.log10(r)),s=r/Math.pow(10,i),a=s>=Ku?10:s>=Qu?5:s>=Zu?2:1;let o,l,u;return i<0?(u=Math.pow(10,-i)/a,o=Math.round(t*u),l=Math.round(e*u),o/u<t&&++o,l/u>e&&--l,u=-u):(u=Math.pow(10,i)*a,o=Math.round(t/u),l=Math.round(e/u),o*u<t&&++o,l*u>e&&--l),l<o&&.5<=n&&n<2?Gr(t,e,n*2):[o,l,u]}function Ju(t,e,n){if(e=+e,t=+t,n=+n,!(n>0))return[];if(t===e)return[t];const r=e<t,[i,s,a]=r?Gr(e,t,n):Gr(t,e,n);if(!(s>=i))return[];const o=s-i+1,l=new Array(o);if(r)if(a<0)for(let u=0;u<o;++u)l[u]=(s-u)/-a;else for(let u=0;u<o;++u)l[u]=(s-u)*a;else if(a<0)for(let u=0;u<o;++u)l[u]=(i+u)/-a;else for(let u=0;u<o;++u)l[u]=(i+u)*a;return l}function Ki(t,e,n){return e=+e,t=+t,n=+n,Gr(t,e,n)[2]}function tc(t,e,n){e=+e,t=+t,n=+n;const r=e<t,i=r?Ki(e,t,n):Ki(t,e,n);return(r?-1:1)*(i<0?1/-i:i)}function ec(t,e){let n;if(e===void 0)for(const r of t)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of t)(i=e(i,++r,t))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}var nc={value:()=>{}};function To(){for(var t=0,e=arguments.length,n={},r;t<e;++t){if(!(r=arguments[t]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new zr(n)}function zr(t){this._=t}function rc(t,e){return t.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}zr.prototype=To.prototype={constructor:zr,on:function(t,e){var n=this._,r=rc(t+"",n),i,s=-1,a=r.length;if(arguments.length<2){for(;++s<a;)if((i=(t=r[s]).type)&&(i=ic(n[i],t.name)))return i;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<a;)if(i=(t=r[s]).type)n[i]=Xs(n[i],t.name,e);else if(e==null)for(i in n)n[i]=Xs(n[i],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new zr(t)},call:function(t,e){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],r=0,i=s.length;r<i;++r)s[r].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,s=r.length;i<s;++i)r[i].value.apply(e,n)}};function ic(t,e){for(var n=0,r=t.length,i;n<r;++n)if((i=t[n]).name===e)return i.value}function Xs(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=nc,t=t.slice(0,r).concat(t.slice(r+1));break}return n!=null&&t.push({name:e,value:n}),t}var Qi="http://www.w3.org/1999/xhtml";const Gs={svg:"http://www.w3.org/2000/svg",xhtml:Qi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function yi(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),Gs.hasOwnProperty(e)?{space:Gs[e],local:t}:t}function sc(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===Qi&&e.documentElement.namespaceURI===Qi?e.createElement(t):e.createElementNS(n,t)}}function ac(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function No(t){var e=yi(t);return(e.local?ac:sc)(e)}function oc(){}function $s(t){return t==null?oc:function(){return this.querySelector(t)}}function lc(t){typeof t!="function"&&(t=$s(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=new Array(a),l,u,c=0;c<a;++c)(l=s[c])&&(u=t.call(l,l.__data__,c,s))&&("__data__"in l&&(u.__data__=l.__data__),o[c]=u);return new ie(r,this._parents)}function uc(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function cc(){return[]}function Co(t){return t==null?cc:function(){return this.querySelectorAll(t)}}function fc(t){return function(){return uc(t.apply(this,arguments))}}function hc(t){typeof t=="function"?t=fc(t):t=Co(t);for(var e=this._groups,n=e.length,r=[],i=[],s=0;s<n;++s)for(var a=e[s],o=a.length,l,u=0;u<o;++u)(l=a[u])&&(r.push(t.call(l,l.__data__,u,a)),i.push(l));return new ie(r,i)}function Fo(t){return function(){return this.matches(t)}}function Io(t){return function(e){return e.matches(t)}}var dc=Array.prototype.find;function vc(t){return function(){return dc.call(this.children,t)}}function pc(){return this.firstElementChild}function gc(t){return this.select(t==null?pc:vc(typeof t=="function"?t:Io(t)))}var _c=Array.prototype.filter;function mc(){return Array.from(this.children)}function yc(t){return function(){return _c.call(this.children,t)}}function xc(t){return this.selectAll(t==null?mc:yc(typeof t=="function"?t:Io(t)))}function wc(t){typeof t!="function"&&(t=Fo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,u=0;u<a;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&o.push(l);return new ie(r,this._parents)}function Ro(t){return new Array(t.length)}function bc(){return new ie(this._enter||this._groups.map(Ro),this._parents)}function Kr(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}Kr.prototype={constructor:Kr,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function $c(t){return function(){return t}}function Ac(t,e,n,r,i,s){for(var a=0,o,l=e.length,u=s.length;a<u;++a)(o=e[a])?(o.__data__=s[a],r[a]=o):n[a]=new Kr(t,s[a]);for(;a<l;++a)(o=e[a])&&(i[a]=o)}function Mc(t,e,n,r,i,s,a){var o,l,u=new Map,c=e.length,h=s.length,f=new Array(c),d;for(o=0;o<c;++o)(l=e[o])&&(f[o]=d=a.call(l,l.__data__,o,e)+"",u.has(d)?i[o]=l:u.set(d,l));for(o=0;o<h;++o)d=a.call(t,s[o],o,s)+"",(l=u.get(d))?(r[o]=l,l.__data__=s[o],u.delete(d)):n[o]=new Kr(t,s[o]);for(o=0;o<c;++o)(l=e[o])&&u.get(f[o])===l&&(i[o]=l)}function Ec(t){return t.__data__}function kc(t,e){if(!arguments.length)return Array.from(this,Ec);var n=e?Mc:Ac,r=this._parents,i=this._groups;typeof t!="function"&&(t=$c(t));for(var s=i.length,a=new Array(s),o=new Array(s),l=new Array(s),u=0;u<s;++u){var c=r[u],h=i[u],f=h.length,d=Sc(t.call(c,c&&c.__data__,u,r)),g=d.length,m=o[u]=new Array(g),p=a[u]=new Array(g),_=l[u]=new Array(f);n(c,h,m,p,_,d,e);for(var y=0,x=0,w,M;y<g;++y)if(w=m[y]){for(y>=x&&(x=y+1);!(M=p[x])&&++x<g;);w._next=M||null}}return a=new ie(a,r),a._enter=o,a._exit=l,a}function Sc(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Tc(){return new ie(this._exit||this._groups.map(Ro),this._parents)}function Nc(t,e,n){var r=this.enter(),i=this,s=this.exit();return typeof t=="function"?(r=t(r),r&&(r=r.selection())):r=r.append(t+""),e!=null&&(i=e(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Cc(t){for(var e=t.selection?t.selection():t,n=this._groups,r=e._groups,i=n.length,s=r.length,a=Math.min(i,s),o=new Array(i),l=0;l<a;++l)for(var u=n[l],c=r[l],h=u.length,f=o[l]=new Array(h),d,g=0;g<h;++g)(d=u[g]||c[g])&&(f[g]=d);for(;l<i;++l)o[l]=n[l];return new ie(o,this._parents)}function Fc(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var r=t[e],i=r.length-1,s=r[i],a;--i>=0;)(a=r[i])&&(s&&a.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(a,s),s=a);return this}function Ic(t){t||(t=Rc);function e(h,f){return h&&f?t(h.__data__,f.__data__):!h-!f}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var a=n[s],o=a.length,l=i[s]=new Array(o),u,c=0;c<o;++c)(u=a[c])&&(l[c]=u);l.sort(e)}return new ie(i,this._parents).order()}function Rc(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Oc(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function zc(){return Array.from(this)}function Pc(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length;i<s;++i){var a=r[i];if(a)return a}return null}function Dc(){let t=0;for(const e of this)++t;return t}function Lc(){return!this.node()}function qc(t){for(var e=this._groups,n=0,r=e.length;n<r;++n)for(var i=e[n],s=0,a=i.length,o;s<a;++s)(o=i[s])&&t.call(o,o.__data__,s,i);return this}function Vc(t){return function(){this.removeAttribute(t)}}function jc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Hc(t,e){return function(){this.setAttribute(t,e)}}function Bc(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function Uc(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function Wc(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function Yc(t,e){var n=yi(t);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((e==null?n.local?jc:Vc:typeof e=="function"?n.local?Wc:Uc:n.local?Bc:Hc)(n,e))}function Oo(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function Xc(t){return function(){this.style.removeProperty(t)}}function Gc(t,e,n){return function(){this.style.setProperty(t,e,n)}}function Kc(t,e,n){return function(){var r=e.apply(this,arguments);r==null?this.style.removeProperty(t):this.style.setProperty(t,r,n)}}function Qc(t,e,n){return arguments.length>1?this.each((e==null?Xc:typeof e=="function"?Kc:Gc)(t,e,n??"")):jn(this.node(),t)}function jn(t,e){return t.style.getPropertyValue(e)||Oo(t).getComputedStyle(t,null).getPropertyValue(e)}function Zc(t){return function(){delete this[t]}}function Jc(t,e){return function(){this[t]=e}}function tf(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ef(t,e){return arguments.length>1?this.each((e==null?Zc:typeof e=="function"?tf:Jc)(t,e)):this.node()[t]}function zo(t){return t.trim().split(/^|\s+/)}function As(t){return t.classList||new Po(t)}function Po(t){this._node=t,this._names=zo(t.getAttribute("class")||"")}Po.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function Do(t,e){for(var n=As(t),r=-1,i=e.length;++r<i;)n.add(e[r])}function Lo(t,e){for(var n=As(t),r=-1,i=e.length;++r<i;)n.remove(e[r])}function nf(t){return function(){Do(this,t)}}function rf(t){return function(){Lo(this,t)}}function sf(t,e){return function(){(e.apply(this,arguments)?Do:Lo)(this,t)}}function af(t,e){var n=zo(t+"");if(arguments.length<2){for(var r=As(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof e=="function"?sf:e?nf:rf)(n,e))}function of(){this.textContent=""}function lf(t){return function(){this.textContent=t}}function uf(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function cf(t){return arguments.length?this.each(t==null?of:(typeof t=="function"?uf:lf)(t)):this.node().textContent}function ff(){this.innerHTML=""}function hf(t){return function(){this.innerHTML=t}}function df(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function vf(t){return arguments.length?this.each(t==null?ff:(typeof t=="function"?df:hf)(t)):this.node().innerHTML}function pf(){this.nextSibling&&this.parentNode.appendChild(this)}function gf(){return this.each(pf)}function _f(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function mf(){return this.each(_f)}function yf(t){var e=typeof t=="function"?t:No(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function xf(){return null}function wf(t,e){var n=typeof t=="function"?t:No(t),r=e==null?xf:typeof e=="function"?e:$s(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function bf(){var t=this.parentNode;t&&t.removeChild(this)}function $f(){return this.each(bf)}function Af(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Mf(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Ef(t){return this.select(t?Mf:Af)}function kf(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Sf(t){return function(e){t.call(this,e,this.__data__)}}function Tf(t){return t.trim().split(/^|\s+/).map(function(e){var n="",r=e.indexOf(".");return r>=0&&(n=e.slice(r+1),e=e.slice(0,r)),{type:e,name:n}})}function Nf(t){return function(){var e=this.__on;if(e){for(var n=0,r=-1,i=e.length,s;n<i;++n)s=e[n],(!t.type||s.type===t.type)&&s.name===t.name?this.removeEventListener(s.type,s.listener,s.options):e[++r]=s;++r?e.length=r:delete this.__on}}}function Cf(t,e,n){return function(){var r=this.__on,i,s=Sf(e);if(r){for(var a=0,o=r.length;a<o;++a)if((i=r[a]).type===t.type&&i.name===t.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=e;return}}this.addEventListener(t.type,s,n),i={type:t.type,name:t.name,value:e,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Ff(t,e,n){var r=Tf(t+""),i,s=r.length,a;if(arguments.length<2){var o=this.node().__on;if(o){for(var l=0,u=o.length,c;l<u;++l)for(i=0,c=o[l];i<s;++i)if((a=r[i]).type===c.type&&a.name===c.name)return c.value}return}for(o=e?Cf:Nf,i=0;i<s;++i)this.each(o(r[i],e,n));return this}function qo(t,e,n){var r=Oo(t),i=r.CustomEvent;typeof i=="function"?i=new i(e,n):(i=r.document.createEvent("Event"),n?(i.initEvent(e,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(e,!1,!1)),t.dispatchEvent(i)}function If(t,e){return function(){return qo(this,t,e)}}function Rf(t,e){return function(){return qo(this,t,e.apply(this,arguments))}}function Of(t,e){return this.each((typeof e=="function"?Rf:If)(t,e))}function*zf(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var r=t[e],i=0,s=r.length,a;i<s;++i)(a=r[i])&&(yield a)}var Vo=[null];function ie(t,e){this._groups=t,this._parents=e}function gr(){return new ie([[document.documentElement]],Vo)}function Pf(){return this}ie.prototype=gr.prototype={constructor:ie,select:lc,selectAll:hc,selectChild:gc,selectChildren:xc,filter:wc,data:kc,enter:bc,exit:Tc,join:Nc,merge:Cc,selection:Pf,order:Fc,sort:Ic,call:Oc,nodes:zc,node:Pc,size:Dc,empty:Lc,each:qc,attr:Yc,style:Qc,property:ef,classed:af,text:cf,html:vf,raise:gf,lower:mf,append:yf,insert:wf,remove:$f,clone:Ef,datum:kf,on:Ff,dispatch:Of,[Symbol.iterator]:zf};function cn(t){return typeof t=="string"?new ie([[document.querySelector(t)]],[document.documentElement]):new ie([[t]],Vo)}function Ms(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function jo(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function _r(){}var cr=.7,Qr=1/cr,On="\\s*([+-]?\\d+)\\s*",fr="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ke="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Df=/^#([0-9a-f]{3,8})$/,Lf=new RegExp(`^rgb\\(${On},${On},${On}\\)$`),qf=new RegExp(`^rgb\\(${ke},${ke},${ke}\\)$`),Vf=new RegExp(`^rgba\\(${On},${On},${On},${fr}\\)$`),jf=new RegExp(`^rgba\\(${ke},${ke},${ke},${fr}\\)$`),Hf=new RegExp(`^hsl\\(${fr},${ke},${ke}\\)$`),Bf=new RegExp(`^hsla\\(${fr},${ke},${ke},${fr}\\)$`),Ks={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Ms(_r,nn,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:Qs,formatHex:Qs,formatHex8:Uf,formatHsl:Wf,formatRgb:Zs,toString:Zs});function Qs(){return this.rgb().formatHex()}function Uf(){return this.rgb().formatHex8()}function Wf(){return Ho(this).formatHsl()}function Zs(){return this.rgb().formatRgb()}function nn(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=Df.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?Js(e):n===3?new Gt(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Mr(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Mr(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=Lf.exec(t))?new Gt(e[1],e[2],e[3],1):(e=qf.exec(t))?new Gt(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=Vf.exec(t))?Mr(e[1],e[2],e[3],e[4]):(e=jf.exec(t))?Mr(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=Hf.exec(t))?na(e[1],e[2]/100,e[3]/100,1):(e=Bf.exec(t))?na(e[1],e[2]/100,e[3]/100,e[4]):Ks.hasOwnProperty(t)?Js(Ks[t]):t==="transparent"?new Gt(NaN,NaN,NaN,0):null}function Js(t){return new Gt(t>>16&255,t>>8&255,t&255,1)}function Mr(t,e,n,r){return r<=0&&(t=e=n=NaN),new Gt(t,e,n,r)}function Yf(t){return t instanceof _r||(t=nn(t)),t?(t=t.rgb(),new Gt(t.r,t.g,t.b,t.opacity)):new Gt}function Zi(t,e,n,r){return arguments.length===1?Yf(t):new Gt(t,e,n,r??1)}function Gt(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}Ms(Gt,Zi,jo(_r,{brighter(t){return t=t==null?Qr:Math.pow(Qr,t),new Gt(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?cr:Math.pow(cr,t),new Gt(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new Gt(_n(this.r),_n(this.g),_n(this.b),Zr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:ta,formatHex:ta,formatHex8:Xf,formatRgb:ea,toString:ea}));function ta(){return`#${vn(this.r)}${vn(this.g)}${vn(this.b)}`}function Xf(){return`#${vn(this.r)}${vn(this.g)}${vn(this.b)}${vn((isNaN(this.opacity)?1:this.opacity)*255)}`}function ea(){const t=Zr(this.opacity);return`${t===1?"rgb(":"rgba("}${_n(this.r)}, ${_n(this.g)}, ${_n(this.b)}${t===1?")":`, ${t})`}`}function Zr(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function _n(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function vn(t){return t=_n(t),(t<16?"0":"")+t.toString(16)}function na(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new ge(t,e,n,r)}function Ho(t){if(t instanceof ge)return new ge(t.h,t.s,t.l,t.opacity);if(t instanceof _r||(t=nn(t)),!t)return new ge;if(t instanceof ge)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),s=Math.max(e,n,r),a=NaN,o=s-i,l=(s+i)/2;return o?(e===s?a=(n-r)/o+(n<r)*6:n===s?a=(r-e)/o+2:a=(e-n)/o+4,o/=l<.5?s+i:2-s-i,a*=60):o=l>0&&l<1?0:a,new ge(a,o,l,t.opacity)}function Bo(t,e,n,r){return arguments.length===1?Ho(t):new ge(t,e,n,r??1)}function ge(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}Ms(ge,Bo,jo(_r,{brighter(t){return t=t==null?Qr:Math.pow(Qr,t),new ge(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?cr:Math.pow(cr,t),new ge(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new Gt(Ii(t>=240?t-240:t+120,i,r),Ii(t,i,r),Ii(t<120?t+240:t-120,i,r),this.opacity)},clamp(){return new ge(ra(this.h),Er(this.s),Er(this.l),Zr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Zr(this.opacity);return`${t===1?"hsl(":"hsla("}${ra(this.h)}, ${Er(this.s)*100}%, ${Er(this.l)*100}%${t===1?")":`, ${t})`}`}}));function ra(t){return t=(t||0)%360,t<0?t+360:t}function Er(t){return Math.max(0,Math.min(1,t||0))}function Ii(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const Es=t=>()=>t;function Gf(t,e){return function(n){return t+n*e}}function Kf(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Qf(t){return(t=+t)==1?Uo:function(e,n){return n-e?Kf(e,n,t):Es(isNaN(e)?n:e)}}function Uo(t,e){var n=e-t;return n?Gf(t,n):Es(isNaN(t)?e:t)}const Jr=(function t(e){var n=Qf(e);function r(i,s){var a=n((i=Zi(i)).r,(s=Zi(s)).r),o=n(i.g,s.g),l=n(i.b,s.b),u=Uo(i.opacity,s.opacity);return function(c){return i.r=a(c),i.g=o(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=t,r})(1);function Zf(t,e){e||(e=[]);var n=t?Math.min(e.length,t.length):0,r=e.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}}function Jf(t){return ArrayBuffer.isView(t)&&!(t instanceof DataView)}function th(t,e){var n=e?e.length:0,r=t?Math.min(n,t.length):0,i=new Array(r),s=new Array(n),a;for(a=0;a<r;++a)i[a]=ks(t[a],e[a]);for(;a<n;++a)s[a]=e[a];return function(o){for(a=0;a<r;++a)s[a]=i[a](o);return s}}function eh(t,e){var n=new Date;return t=+t,e=+e,function(r){return n.setTime(t*(1-r)+e*r),n}}function pe(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}function nh(t,e){var n={},r={},i;(t===null||typeof t!="object")&&(t={}),(e===null||typeof e!="object")&&(e={});for(i in e)i in t?n[i]=ks(t[i],e[i]):r[i]=e[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var Ji=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ri=new RegExp(Ji.source,"g");function rh(t){return function(){return t}}function ih(t){return function(e){return t(e)+""}}function Wo(t,e){var n=Ji.lastIndex=Ri.lastIndex=0,r,i,s,a=-1,o=[],l=[];for(t=t+"",e=e+"";(r=Ji.exec(t))&&(i=Ri.exec(e));)(s=i.index)>n&&(s=e.slice(n,s),o[a]?o[a]+=s:o[++a]=s),(r=r[0])===(i=i[0])?o[a]?o[a]+=i:o[++a]=i:(o[++a]=null,l.push({i:a,x:pe(r,i)})),n=Ri.lastIndex;return n<e.length&&(s=e.slice(n),o[a]?o[a]+=s:o[++a]=s),o.length<2?l[0]?ih(l[0].x):rh(e):(e=l.length,function(u){for(var c=0,h;c<e;++c)o[(h=l[c]).i]=h.x(u);return o.join("")})}function ks(t,e){var n=typeof e,r;return e==null||n==="boolean"?Es(e):(n==="number"?pe:n==="string"?(r=nn(e))?(e=r,Jr):Wo:e instanceof nn?Jr:e instanceof Date?eh:Jf(e)?Zf:Array.isArray(e)?th:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?nh:pe)(t,e)}function sh(t,e){return t=+t,e=+e,function(n){return Math.round(t*(1-n)+e*n)}}var ia=180/Math.PI,ts={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Yo(t,e,n,r,i,s){var a,o,l;return(a=Math.sqrt(t*t+e*e))&&(t/=a,e/=a),(l=t*n+e*r)&&(n-=t*l,r-=e*l),(o=Math.sqrt(n*n+r*r))&&(n/=o,r/=o,l/=o),t*r<e*n&&(t=-t,e=-e,l=-l,a=-a),{translateX:i,translateY:s,rotate:Math.atan2(e,t)*ia,skewX:Math.atan(l)*ia,scaleX:a,scaleY:o}}var kr;function ah(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?ts:Yo(e.a,e.b,e.c,e.d,e.e,e.f)}function oh(t){return t==null||(kr||(kr=document.createElementNS("http://www.w3.org/2000/svg","g")),kr.setAttribute("transform",t),!(t=kr.transform.baseVal.consolidate()))?ts:(t=t.matrix,Yo(t.a,t.b,t.c,t.d,t.e,t.f))}function Xo(t,e,n,r){function i(u){return u.length?u.pop()+" ":""}function s(u,c,h,f,d,g){if(u!==h||c!==f){var m=d.push("translate(",null,e,null,n);g.push({i:m-4,x:pe(u,h)},{i:m-2,x:pe(c,f)})}else(h||f)&&d.push("translate("+h+e+f+n)}function a(u,c,h,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:h.push(i(h)+"rotate(",null,r)-2,x:pe(u,c)})):c&&h.push(i(h)+"rotate("+c+r)}function o(u,c,h,f){u!==c?f.push({i:h.push(i(h)+"skewX(",null,r)-2,x:pe(u,c)}):c&&h.push(i(h)+"skewX("+c+r)}function l(u,c,h,f,d,g){if(u!==h||c!==f){var m=d.push(i(d)+"scale(",null,",",null,")");g.push({i:m-4,x:pe(u,h)},{i:m-2,x:pe(c,f)})}else(h!==1||f!==1)&&d.push(i(d)+"scale("+h+","+f+")")}return function(u,c){var h=[],f=[];return u=t(u),c=t(c),s(u.translateX,u.translateY,c.translateX,c.translateY,h,f),a(u.rotate,c.rotate,h,f),o(u.skewX,c.skewX,h,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,h,f),u=c=null,function(d){for(var g=-1,m=f.length,p;++g<m;)h[(p=f[g]).i]=p.x(d);return h.join("")}}}var lh=Xo(ah,"px, ","px)","deg)"),uh=Xo(oh,", ",")",")"),Hn=0,nr=0,tr=0,Go=1e3,ti,rr,ei=0,wn=0,xi=0,hr=typeof performance=="object"&&performance.now?performance:Date,Ko=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Ss(){return wn||(Ko(ch),wn=hr.now()+xi)}function ch(){wn=0}function ni(){this._call=this._time=this._next=null}ni.prototype=Qo.prototype={constructor:ni,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Ss():+n)+(e==null?0:+e),!this._next&&rr!==this&&(rr?rr._next=this:ti=this,rr=this),this._call=t,this._time=n,es()},stop:function(){this._call&&(this._call=null,this._time=1/0,es())}};function Qo(t,e,n){var r=new ni;return r.restart(t,e,n),r}function fh(){Ss(),++Hn;for(var t=ti,e;t;)(e=wn-t._time)>=0&&t._call.call(void 0,e),t=t._next;--Hn}function sa(){wn=(ei=hr.now())+xi,Hn=nr=0;try{fh()}finally{Hn=0,dh(),wn=0}}function hh(){var t=hr.now(),e=t-ei;e>Go&&(xi-=e,ei=t)}function dh(){for(var t,e=ti,n,r=1/0;e;)e._call?(r>e._time&&(r=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:ti=n);rr=t,es(r)}function es(t){if(!Hn){nr&&(nr=clearTimeout(nr));var e=t-wn;e>24?(t<1/0&&(nr=setTimeout(sa,t-hr.now()-xi)),tr&&(tr=clearInterval(tr))):(tr||(ei=hr.now(),tr=setInterval(hh,Go)),Hn=1,Ko(sa))}}function aa(t,e,n){var r=new ni;return e=e==null?0:+e,r.restart(i=>{r.stop(),t(i+e)},e,n),r}var vh=To("start","end","cancel","interrupt"),ph=[],Zo=0,oa=1,ns=2,Pr=3,la=4,rs=5,Dr=6;function wi(t,e,n,r,i,s){var a=t.__transition;if(!a)t.__transition={};else if(n in a)return;gh(t,n,{name:e,index:r,group:i,on:vh,tween:ph,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:Zo})}function Ts(t,e){var n=xe(t,e);if(n.state>Zo)throw new Error("too late; already scheduled");return n}function Ce(t,e){var n=xe(t,e);if(n.state>Pr)throw new Error("too late; already running");return n}function xe(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function gh(t,e,n){var r=t.__transition,i;r[e]=n,n.timer=Qo(s,0,n.time);function s(u){n.state=oa,n.timer.restart(a,n.delay,n.time),n.delay<=u&&a(u-n.delay)}function a(u){var c,h,f,d;if(n.state!==oa)return l();for(c in r)if(d=r[c],d.name===n.name){if(d.state===Pr)return aa(a);d.state===la?(d.state=Dr,d.timer.stop(),d.on.call("interrupt",t,t.__data__,d.index,d.group),delete r[c]):+c<e&&(d.state=Dr,d.timer.stop(),d.on.call("cancel",t,t.__data__,d.index,d.group),delete r[c])}if(aa(function(){n.state===Pr&&(n.state=la,n.timer.restart(o,n.delay,n.time),o(u))}),n.state=ns,n.on.call("start",t,t.__data__,n.index,n.group),n.state===ns){for(n.state=Pr,i=new Array(f=n.tween.length),c=0,h=-1;c<f;++c)(d=n.tween[c].value.call(t,t.__data__,n.index,n.group))&&(i[++h]=d);i.length=h+1}}function o(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=rs,1),h=-1,f=i.length;++h<f;)i[h].call(t,c);n.state===rs&&(n.on.call("end",t,t.__data__,n.index,n.group),l())}function l(){n.state=Dr,n.timer.stop(),delete r[e];for(var u in r)return;delete t.__transition}}function _h(t,e){var n=t.__transition,r,i,s=!0,a;if(n){e=e==null?null:e+"";for(a in n){if((r=n[a]).name!==e){s=!1;continue}i=r.state>ns&&r.state<rs,r.state=Dr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",t,t.__data__,r.index,r.group),delete n[a]}s&&delete t.__transition}}function mh(t){return this.each(function(){_h(this,t)})}function yh(t,e){var n,r;return function(){var i=Ce(this,t),s=i.tween;if(s!==n){r=n=s;for(var a=0,o=r.length;a<o;++a)if(r[a].name===e){r=r.slice(),r.splice(a,1);break}}i.tween=r}}function xh(t,e,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=Ce(this,t),a=s.tween;if(a!==r){i=(r=a).slice();for(var o={name:e,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===e){i[l]=o;break}l===u&&i.push(o)}s.tween=i}}function wh(t,e){var n=this._id;if(t+="",arguments.length<2){for(var r=xe(this.node(),n).tween,i=0,s=r.length,a;i<s;++i)if((a=r[i]).name===t)return a.value;return null}return this.each((e==null?yh:xh)(n,t,e))}function Ns(t,e,n){var r=t._id;return t.each(function(){var i=Ce(this,r);(i.value||(i.value={}))[e]=n.apply(this,arguments)}),function(i){return xe(i,r).value[e]}}function Jo(t,e){var n;return(typeof e=="number"?pe:e instanceof nn?Jr:(n=nn(e))?(e=n,Jr):Wo)(t,e)}function bh(t){return function(){this.removeAttribute(t)}}function $h(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Ah(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttribute(t);return a===i?null:a===r?s:s=e(r=a,n)}}function Mh(t,e,n){var r,i=n+"",s;return function(){var a=this.getAttributeNS(t.space,t.local);return a===i?null:a===r?s:s=e(r=a,n)}}function Eh(t,e,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttribute(t):(a=this.getAttribute(t),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o)))}}function kh(t,e,n){var r,i,s;return function(){var a,o=n(this),l;return o==null?void this.removeAttributeNS(t.space,t.local):(a=this.getAttributeNS(t.space,t.local),l=o+"",a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o)))}}function Sh(t,e){var n=yi(t),r=n==="transform"?uh:Jo;return this.attrTween(t,typeof e=="function"?(n.local?kh:Eh)(n,r,Ns(this,"attr."+t,e)):e==null?(n.local?$h:bh)(n):(n.local?Mh:Ah)(n,r,e))}function Th(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Nh(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Ch(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Nh(t,s)),n}return i._value=e,i}function Fh(t,e){var n,r;function i(){var s=e.apply(this,arguments);return s!==r&&(n=(r=s)&&Th(t,s)),n}return i._value=e,i}function Ih(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var r=yi(t);return this.tween(n,(r.local?Ch:Fh)(r,e))}function Rh(t,e){return function(){Ts(this,t).delay=+e.apply(this,arguments)}}function Oh(t,e){return e=+e,function(){Ts(this,t).delay=e}}function zh(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Rh:Oh)(e,t)):xe(this.node(),e).delay}function Ph(t,e){return function(){Ce(this,t).duration=+e.apply(this,arguments)}}function Dh(t,e){return e=+e,function(){Ce(this,t).duration=e}}function Lh(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?Ph:Dh)(e,t)):xe(this.node(),e).duration}function qh(t,e){if(typeof e!="function")throw new Error;return function(){Ce(this,t).ease=e}}function Vh(t){var e=this._id;return arguments.length?this.each(qh(e,t)):xe(this.node(),e).ease}function jh(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Ce(this,t).ease=n}}function Hh(t){if(typeof t!="function")throw new Error;return this.each(jh(this._id,t))}function Bh(t){typeof t!="function"&&(t=Fo(t));for(var e=this._groups,n=e.length,r=new Array(n),i=0;i<n;++i)for(var s=e[i],a=s.length,o=r[i]=[],l,u=0;u<a;++u)(l=s[u])&&t.call(l,l.__data__,u,s)&&o.push(l);return new qe(r,this._parents,this._name,this._id)}function Uh(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,r=e.length,i=n.length,s=Math.min(r,i),a=new Array(r),o=0;o<s;++o)for(var l=e[o],u=n[o],c=l.length,h=a[o]=new Array(c),f,d=0;d<c;++d)(f=l[d]||u[d])&&(h[d]=f);for(;o<r;++o)a[o]=e[o];return new qe(a,this._parents,this._name,this._id)}function Wh(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function Yh(t,e,n){var r,i,s=Wh(e)?Ts:Ce;return function(){var a=s(this,t),o=a.on;o!==r&&(i=(r=o).copy()).on(e,n),a.on=i}}function Xh(t,e){var n=this._id;return arguments.length<2?xe(this.node(),n).on.on(t):this.each(Yh(n,t,e))}function Gh(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function Kh(){return this.on("end.remove",Gh(this._id))}function Qh(t){var e=this._name,n=this._id;typeof t!="function"&&(t=$s(t));for(var r=this._groups,i=r.length,s=new Array(i),a=0;a<i;++a)for(var o=r[a],l=o.length,u=s[a]=new Array(l),c,h,f=0;f<l;++f)(c=o[f])&&(h=t.call(c,c.__data__,f,o))&&("__data__"in c&&(h.__data__=c.__data__),u[f]=h,wi(u[f],e,n,f,u,xe(c,n)));return new qe(s,this._parents,e,n)}function Zh(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Co(t));for(var r=this._groups,i=r.length,s=[],a=[],o=0;o<i;++o)for(var l=r[o],u=l.length,c,h=0;h<u;++h)if(c=l[h]){for(var f=t.call(c,c.__data__,h,l),d,g=xe(c,n),m=0,p=f.length;m<p;++m)(d=f[m])&&wi(d,e,n,m,f,g);s.push(f),a.push(c)}return new qe(s,a,e,n)}var Jh=gr.prototype.constructor;function td(){return new Jh(this._groups,this._parents)}function ed(t,e){var n,r,i;return function(){var s=jn(this,t),a=(this.style.removeProperty(t),jn(this,t));return s===a?null:s===n&&a===r?i:i=e(n=s,r=a)}}function tl(t){return function(){this.style.removeProperty(t)}}function nd(t,e,n){var r,i=n+"",s;return function(){var a=jn(this,t);return a===i?null:a===r?s:s=e(r=a,n)}}function rd(t,e,n){var r,i,s;return function(){var a=jn(this,t),o=n(this),l=o+"";return o==null&&(l=o=(this.style.removeProperty(t),jn(this,t))),a===l?null:a===r&&l===i?s:(i=l,s=e(r=a,o))}}function id(t,e){var n,r,i,s="style."+e,a="end."+s,o;return function(){var l=Ce(this,t),u=l.on,c=l.value[s]==null?o||(o=tl(e)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(a,i=c),l.on=r}}function sd(t,e,n){var r=(t+="")=="transform"?lh:Jo;return e==null?this.styleTween(t,ed(t,r)).on("end.style."+t,tl(t)):typeof e=="function"?this.styleTween(t,rd(t,r,Ns(this,"style."+t,e))).each(id(this._id,t)):this.styleTween(t,nd(t,r,e),n).on("end.style."+t,null)}function ad(t,e,n){return function(r){this.style.setProperty(t,e.call(this,r),n)}}function od(t,e,n){var r,i;function s(){var a=e.apply(this,arguments);return a!==i&&(r=(i=a)&&ad(t,a,n)),r}return s._value=e,s}function ld(t,e,n){var r="style."+(t+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(e==null)return this.tween(r,null);if(typeof e!="function")throw new Error;return this.tween(r,od(t,e,n??""))}function ud(t){return function(){this.textContent=t}}function cd(t){return function(){var e=t(this);this.textContent=e??""}}function fd(t){return this.tween("text",typeof t=="function"?cd(Ns(this,"text",t)):ud(t==null?"":t+""))}function hd(t){return function(e){this.textContent=t.call(this,e)}}function dd(t){var e,n;function r(){var i=t.apply(this,arguments);return i!==n&&(e=(n=i)&&hd(i)),e}return r._value=t,r}function vd(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,dd(t))}function pd(){for(var t=this._name,e=this._id,n=el(),r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,u=0;u<o;++u)if(l=a[u]){var c=xe(l,e);wi(l,t,n,u,a,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new qe(r,this._parents,t,n)}function gd(){var t,e,n=this,r=n._id,i=n.size();return new Promise(function(s,a){var o={value:a},l={value:function(){--i===0&&s()}};n.each(function(){var u=Ce(this,r),c=u.on;c!==t&&(e=(t=c).copy(),e._.cancel.push(o),e._.interrupt.push(o),e._.end.push(l)),u.on=e}),i===0&&s()})}var _d=0;function qe(t,e,n,r){this._groups=t,this._parents=e,this._name=n,this._id=r}function el(){return++_d}var Fe=gr.prototype;qe.prototype={constructor:qe,select:Qh,selectAll:Zh,selectChild:Fe.selectChild,selectChildren:Fe.selectChildren,filter:Bh,merge:Uh,selection:td,transition:pd,call:Fe.call,nodes:Fe.nodes,node:Fe.node,size:Fe.size,empty:Fe.empty,each:Fe.each,on:Xh,attr:Sh,attrTween:Ih,style:sd,styleTween:ld,text:fd,textTween:vd,remove:Kh,tween:wh,delay:zh,duration:Lh,ease:Vh,easeVarying:Hh,end:gd,[Symbol.iterator]:Fe[Symbol.iterator]};function md(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var yd={time:null,delay:0,duration:250,ease:md};function xd(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function wd(t){var e,n;t instanceof qe?(e=t._id,t=t._name):(e=el(),(n=yd).time=Ss(),t=t==null?null:t+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var a=r[s],o=a.length,l,u=0;u<o;++u)(l=a[u])&&wi(l,t,e,u,a,n||xd(l,e));return new qe(r,this._parents,t,e)}gr.prototype.interrupt=mh;gr.prototype.transition=wd;const is=Math.PI,ss=2*is,fn=1e-6,bd=ss-fn;function nl(t){this._+=t[0];for(let e=1,n=t.length;e<n;++e)this._+=arguments[e]+t[e]}function $d(t){let e=Math.floor(t);if(!(e>=0))throw new Error(`invalid digits: ${t}`);if(e>15)return nl;const n=10**e;return function(r){this._+=r[0];for(let i=1,s=r.length;i<s;++i)this._+=Math.round(arguments[i]*n)/n+r[i]}}class Ad{constructor(e){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=e==null?nl:$d(e)}moveTo(e,n){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(e,n){this._append`L${this._x1=+e},${this._y1=+n}`}quadraticCurveTo(e,n,r,i){this._append`Q${+e},${+n},${this._x1=+r},${this._y1=+i}`}bezierCurveTo(e,n,r,i,s,a){this._append`C${+e},${+n},${+r},${+i},${this._x1=+s},${this._y1=+a}`}arcTo(e,n,r,i,s){if(e=+e,n=+n,r=+r,i=+i,s=+s,s<0)throw new Error(`negative radius: ${s}`);let a=this._x1,o=this._y1,l=r-e,u=i-n,c=a-e,h=o-n,f=c*c+h*h;if(this._x1===null)this._append`M${this._x1=e},${this._y1=n}`;else if(f>fn)if(!(Math.abs(h*l-u*c)>fn)||!s)this._append`L${this._x1=e},${this._y1=n}`;else{let d=r-a,g=i-o,m=l*l+u*u,p=d*d+g*g,_=Math.sqrt(m),y=Math.sqrt(f),x=s*Math.tan((is-Math.acos((m+f-p)/(2*_*y)))/2),w=x/y,M=x/_;Math.abs(w-1)>fn&&this._append`L${e+w*c},${n+w*h}`,this._append`A${s},${s},0,0,${+(h*d>c*g)},${this._x1=e+M*l},${this._y1=n+M*u}`}}arc(e,n,r,i,s,a){if(e=+e,n=+n,r=+r,a=!!a,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(i),l=r*Math.sin(i),u=e+o,c=n+l,h=1^a,f=a?i-s:s-i;this._x1===null?this._append`M${u},${c}`:(Math.abs(this._x1-u)>fn||Math.abs(this._y1-c)>fn)&&this._append`L${u},${c}`,r&&(f<0&&(f=f%ss+ss),f>bd?this._append`A${r},${r},0,1,${h},${e-o},${n-l}A${r},${r},0,1,${h},${this._x1=u},${this._y1=c}`:f>fn&&this._append`A${r},${r},0,${+(f>=is)},${h},${this._x1=e+r*Math.cos(s)},${this._y1=n+r*Math.sin(s)}`)}rect(e,n,r,i){this._append`M${this._x0=this._x1=+e},${this._y0=this._y1=+n}h${r=+r}v${+i}h${-r}Z`}toString(){return this._}}function Md(t){if(!t.ok)throw new Error(t.status+" "+t.statusText);if(!(t.status===204||t.status===205))return t.json()}function rl(t,e){return fetch(t,e).then(Md)}function Ed(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return il(this.cover(e,n),e,n,t)}function il(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,s=t._root,a={data:r},o=t._x0,l=t._y0,u=t._x1,c=t._y1,h,f,d,g,m,p,_,y;if(!s)return t._root=a,t;for(;s.length;)if((m=e>=(h=(o+u)/2))?o=h:u=h,(p=n>=(f=(l+c)/2))?l=f:c=f,i=s,!(s=s[_=p<<1|m]))return i[_]=a,t;if(d=+t._x.call(null,s.data),g=+t._y.call(null,s.data),e===d&&n===g)return a.next=s,i?i[_]=a:t._root=a,t;do i=i?i[_]=new Array(4):t._root=new Array(4),(m=e>=(h=(o+u)/2))?o=h:u=h,(p=n>=(f=(l+c)/2))?l=f:c=f;while((_=p<<1|m)===(y=(g>=f)<<1|d>=h));return i[y]=s,i[_]=a,t}function kd(t){var e,n,r=t.length,i,s,a=new Array(r),o=new Array(r),l=1/0,u=1/0,c=-1/0,h=-1/0;for(n=0;n<r;++n)isNaN(i=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(a[n]=i,o[n]=s,i<l&&(l=i),i>c&&(c=i),s<u&&(u=s),s>h&&(h=s));if(l>c||u>h)return this;for(this.cover(l,u).cover(c,h),n=0;n<r;++n)il(this,a[n],o[n],t[n]);return this}function Sd(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,s=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,s=(r=Math.floor(e))+1;else{for(var a=i-n||1,o=this._root,l,u;n>t||t>=i||r>e||e>=s;)switch(u=(e<r)<<1|t<n,l=new Array(4),l[u]=o,o=l,a*=2,u){case 0:i=n+a,s=r+a;break;case 1:n=i-a,s=r+a;break;case 2:i=n+a,r=s-a;break;case 3:n=i-a,r=s-a;break}this._root&&this._root.length&&(this._root=o)}return this._x0=n,this._y0=r,this._x1=i,this._y1=s,this}function Td(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function Nd(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Ht(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Cd(t,e,n){var r,i=this._x0,s=this._y0,a,o,l,u,c=this._x1,h=this._y1,f=[],d=this._root,g,m;for(d&&f.push(new Ht(d,i,s,c,h)),n==null?n=1/0:(i=t-n,s=e-n,c=t+n,h=e+n,n*=n);g=f.pop();)if(!(!(d=g.node)||(a=g.x0)>c||(o=g.y0)>h||(l=g.x1)<i||(u=g.y1)<s))if(d.length){var p=(a+l)/2,_=(o+u)/2;f.push(new Ht(d[3],p,_,l,u),new Ht(d[2],a,_,p,u),new Ht(d[1],p,o,l,_),new Ht(d[0],a,o,p,_)),(m=(e>=_)<<1|t>=p)&&(g=f[f.length-1],f[f.length-1]=f[f.length-1-m],f[f.length-1-m]=g)}else{var y=t-+this._x.call(null,d.data),x=e-+this._y.call(null,d.data),w=y*y+x*x;if(w<n){var M=Math.sqrt(n=w);i=t-M,s=e-M,c=t+M,h=e+M,r=d.data}}return r}function Fd(t){if(isNaN(c=+this._x.call(null,t))||isNaN(h=+this._y.call(null,t)))return this;var e,n=this._root,r,i,s,a=this._x0,o=this._y0,l=this._x1,u=this._y1,c,h,f,d,g,m,p,_;if(!n)return this;if(n.length)for(;;){if((g=c>=(f=(a+l)/2))?a=f:l=f,(m=h>=(d=(o+u)/2))?o=d:u=d,e=n,!(n=n[p=m<<1|g]))return this;if(!n.length)break;(e[p+1&3]||e[p+2&3]||e[p+3&3])&&(r=e,_=p)}for(;n.data!==t;)if(i=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,i?(s?i.next=s:delete i.next,this):e?(s?e[p]=s:delete e[p],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(r?r[_]=n:this._root=n),this):(this._root=s,this)}function Id(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Rd(){return this._root}function Od(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function zd(t){var e=[],n,r=this._root,i,s,a,o,l;for(r&&e.push(new Ht(r,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(r=n.node,s=n.x0,a=n.y0,o=n.x1,l=n.y1)&&r.length){var u=(s+o)/2,c=(a+l)/2;(i=r[3])&&e.push(new Ht(i,u,c,o,l)),(i=r[2])&&e.push(new Ht(i,s,c,u,l)),(i=r[1])&&e.push(new Ht(i,u,a,o,c)),(i=r[0])&&e.push(new Ht(i,s,a,u,c))}return this}function Pd(t){var e=[],n=[],r;for(this._root&&e.push(new Ht(this._root,this._x0,this._y0,this._x1,this._y1));r=e.pop();){var i=r.node;if(i.length){var s,a=r.x0,o=r.y0,l=r.x1,u=r.y1,c=(a+l)/2,h=(o+u)/2;(s=i[0])&&e.push(new Ht(s,a,o,c,h)),(s=i[1])&&e.push(new Ht(s,c,o,l,h)),(s=i[2])&&e.push(new Ht(s,a,h,c,u)),(s=i[3])&&e.push(new Ht(s,c,h,l,u))}n.push(r)}for(;r=n.pop();)t(r.node,r.x0,r.y0,r.x1,r.y1);return this}function Dd(t){return t[0]}function Ld(t){return arguments.length?(this._x=t,this):this._x}function qd(t){return t[1]}function Vd(t){return arguments.length?(this._y=t,this):this._y}function Lr(t,e,n){var r=new Cs(e??Dd,n??qd,NaN,NaN,NaN,NaN);return t==null?r:r.addAll(t)}function Cs(t,e,n,r,i,s){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=s,this._root=void 0}function ua(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var Bt=Lr.prototype=Cs.prototype;Bt.copy=function(){var t=new Cs(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,r;if(!e)return t;if(!e.length)return t._root=ua(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var i=0;i<4;++i)(r=e.source[i])&&(r.length?n.push({source:r,target:e.target[i]=new Array(4)}):e.target[i]=ua(r));return t};Bt.add=Ed;Bt.addAll=kd;Bt.cover=Sd;Bt.data=Td;Bt.extent=Nd;Bt.find=Cd;Bt.remove=Fd;Bt.removeAll=Id;Bt.root=Rd;Bt.size=Od;Bt.visit=zd;Bt.visitAfter=Pd;Bt.x=Ld;Bt.y=Vd;function jd(t){return Math.abs(t=Math.round(t))>=1e21?t.toLocaleString("en").replace(/,/g,""):t.toString(10)}function ri(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function Bn(t){return t=ri(Math.abs(t)),t?t[1]:NaN}function Hd(t,e){return function(n,r){for(var i=n.length,s=[],a=0,o=t[0],l=0;i>0&&o>0&&(l+o+1>r&&(o=Math.max(1,r-l)),s.push(n.substring(i-=o,i+o)),!((l+=o+1)>r));)o=t[a=(a+1)%t.length];return s.reverse().join(e)}}function Bd(t){return function(e){return e.replace(/[0-9]/g,function(n){return t[+n]})}}var Ud=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ii(t){if(!(e=Ud.exec(t)))throw new Error("invalid format: "+t);var e;return new Fs({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}ii.prototype=Fs.prototype;function Fs(t){this.fill=t.fill===void 0?" ":t.fill+"",this.align=t.align===void 0?">":t.align+"",this.sign=t.sign===void 0?"-":t.sign+"",this.symbol=t.symbol===void 0?"":t.symbol+"",this.zero=!!t.zero,this.width=t.width===void 0?void 0:+t.width,this.comma=!!t.comma,this.precision=t.precision===void 0?void 0:+t.precision,this.trim=!!t.trim,this.type=t.type===void 0?"":t.type+""}Fs.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Wd(t){t:for(var e=t.length,n=1,r=-1,i;n<e;++n)switch(t[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+t[n])break t;r>0&&(r=0);break}return r>0?t.slice(0,r)+t.slice(i+1):t}var sl;function Yd(t,e){var n=ri(t,e);if(!n)return t+"";var r=n[0],i=n[1],s=i-(sl=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,a=r.length;return s===a?r:s>a?r+new Array(s-a+1).join("0"):s>0?r.slice(0,s)+"."+r.slice(s):"0."+new Array(1-s).join("0")+ri(t,Math.max(0,e+s-1))[0]}function ca(t,e){var n=ri(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const fa={"%":(t,e)=>(t*100).toFixed(e),b:t=>Math.round(t).toString(2),c:t=>t+"",d:jd,e:(t,e)=>t.toExponential(e),f:(t,e)=>t.toFixed(e),g:(t,e)=>t.toPrecision(e),o:t=>Math.round(t).toString(8),p:(t,e)=>ca(t*100,e),r:ca,s:Yd,X:t=>Math.round(t).toString(16).toUpperCase(),x:t=>Math.round(t).toString(16)};function ha(t){return t}var da=Array.prototype.map,va=["y","z","a","f","p","n","Âµ","m","","k","M","G","T","P","E","Z","Y"];function Xd(t){var e=t.grouping===void 0||t.thousands===void 0?ha:Hd(da.call(t.grouping,Number),t.thousands+""),n=t.currency===void 0?"":t.currency[0]+"",r=t.currency===void 0?"":t.currency[1]+"",i=t.decimal===void 0?".":t.decimal+"",s=t.numerals===void 0?ha:Bd(da.call(t.numerals,String)),a=t.percent===void 0?"%":t.percent+"",o=t.minus===void 0?"â":t.minus+"",l=t.nan===void 0?"NaN":t.nan+"";function u(h){h=ii(h);var f=h.fill,d=h.align,g=h.sign,m=h.symbol,p=h.zero,_=h.width,y=h.comma,x=h.precision,w=h.trim,M=h.type;M==="n"?(y=!0,M="g"):fa[M]||(x===void 0&&(x=12),w=!0,M="g"),(p||f==="0"&&d==="=")&&(p=!0,f="0",d="=");var T=m==="$"?n:m==="#"&&/[boxX]/.test(M)?"0"+M.toLowerCase():"",L=m==="$"?r:/[%p]/.test(M)?a:"",I=fa[M],$=/[defgprs%]/.test(M);x=x===void 0?6:/[gprs]/.test(M)?Math.max(1,Math.min(21,x)):Math.max(0,Math.min(20,x));function N(A){var k=T,b=L,R,ft,At;if(M==="c")b=I(A)+b,A="";else{A=+A;var Nt=A<0||1/A<0;if(A=isNaN(A)?l:I(Math.abs(A),x),w&&(A=Wd(A)),Nt&&+A==0&&g!=="+"&&(Nt=!1),k=(Nt?g==="("?g:o:g==="-"||g==="("?"":g)+k,b=(M==="s"?va[8+sl/3]:"")+b+(Nt&&g==="("?")":""),$){for(R=-1,ft=A.length;++R<ft;)if(At=A.charCodeAt(R),48>At||At>57){b=(At===46?i+A.slice(R+1):A.slice(R))+b,A=A.slice(0,R);break}}}y&&!p&&(A=e(A,1/0));var j=k.length+A.length+b.length,U=j<_?new Array(_-j+1).join(f):"";switch(y&&p&&(A=e(U+A,U.length?_-b.length:1/0),U=""),d){case"<":A=k+A+b+U;break;case"=":A=k+U+A+b;break;case"^":A=U.slice(0,j=U.length>>1)+k+A+b+U.slice(j);break;default:A=U+k+A+b;break}return s(A)}return N.toString=function(){return h+""},N}function c(h,f){var d=u((h=ii(h),h.type="f",h)),g=Math.max(-8,Math.min(8,Math.floor(Bn(f)/3)))*3,m=Math.pow(10,-g),p=va[8+g/3];return function(_){return d(m*_)+p}}return{format:u,formatPrefix:c}}var Sr,al,ol;Gd({thousands:",",grouping:[3],currency:["$",""]});function Gd(t){return Sr=Xd(t),al=Sr.format,ol=Sr.formatPrefix,Sr}function Kd(t){return Math.max(0,-Bn(Math.abs(t)))}function Qd(t,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(Bn(e)/3)))*3-Bn(Math.abs(t)))}function Zd(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,Bn(e)-Bn(t))+1}function Jd(t){var e=0,n=t.children,r=n&&n.length;if(!r)e=1;else for(;--r>=0;)e+=n[r].value;t.value=e}function tv(){return this.eachAfter(Jd)}function ev(t,e){let n=-1;for(const r of this)t.call(e,r,++n,this);return this}function nv(t,e){for(var n=this,r=[n],i,s,a=-1;n=r.pop();)if(t.call(e,n,++a,this),i=n.children)for(s=i.length-1;s>=0;--s)r.push(i[s]);return this}function rv(t,e){for(var n=this,r=[n],i=[],s,a,o,l=-1;n=r.pop();)if(i.push(n),s=n.children)for(a=0,o=s.length;a<o;++a)r.push(s[a]);for(;n=i.pop();)t.call(e,n,++l,this);return this}function iv(t,e){let n=-1;for(const r of this)if(t.call(e,r,++n,this))return r}function sv(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function av(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function ov(t){for(var e=this,n=lv(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function lv(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function uv(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function cv(){return Array.from(this)}function fv(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function hv(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function*dv(){var t=this,e,n=[t],r,i,s;do for(e=n.reverse(),n=[];t=e.pop();)if(yield t,r=t.children)for(i=0,s=r.length;i<s;++i)n.push(r[i]);while(n.length)}function mr(t,e){t instanceof Map?(t=[void 0,t],e===void 0&&(e=gv)):e===void 0&&(e=pv);for(var n=new si(t),r,i=[n],s,a,o,l;r=i.pop();)if((a=e(r.data))&&(l=(a=Array.from(a)).length))for(r.children=a,o=l-1;o>=0;--o)i.push(s=a[o]=new si(a[o])),s.parent=r,s.depth=r.depth+1;return n.eachBefore(mv)}function vv(){return mr(this).eachBefore(_v)}function pv(t){return t.children}function gv(t){return Array.isArray(t)?t[1]:null}function _v(t){t.data.value!==void 0&&(t.value=t.data.value),t.data=t.data.data}function mv(t){var e=0;do t.height=e;while((t=t.parent)&&t.height<++e)}function si(t){this.data=t,this.depth=this.height=0,this.parent=null}si.prototype=mr.prototype={constructor:si,count:tv,each:ev,eachAfter:rv,eachBefore:nv,find:iv,sum:sv,sort:av,path:ov,ancestors:uv,descendants:cv,leaves:fv,links:hv,copy:vv,[Symbol.iterator]:dv};function yv(t){return t==null?null:ll(t)}function ll(t){if(typeof t!="function")throw new Error;return t}function hn(){return 0}function kn(t){return function(){return t}}const xv=1664525,wv=1013904223,pa=4294967296;function bv(){let t=1;return()=>(t=(xv*t+wv)%pa)/pa}function $v(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Av(t,e){let n=t.length,r,i;for(;n;)i=e()*n--|0,r=t[n],t[n]=t[i],t[i]=r;return t}function Mv(t,e){for(var n=0,r=(t=Av(Array.from(t),e)).length,i=[],s,a;n<r;)s=t[n],a&&ul(a,s)?++n:(a=kv(i=Ev(i,s)),n=0);return a}function Ev(t,e){var n,r;if(Oi(e,t))return[e];for(n=0;n<t.length;++n)if(Tr(e,t[n])&&Oi(ir(t[n],e),t))return[t[n],e];for(n=0;n<t.length-1;++n)for(r=n+1;r<t.length;++r)if(Tr(ir(t[n],t[r]),e)&&Tr(ir(t[n],e),t[r])&&Tr(ir(t[r],e),t[n])&&Oi(cl(t[n],t[r],e),t))return[t[n],t[r],e];throw new Error}function Tr(t,e){var n=t.r-e.r,r=e.x-t.x,i=e.y-t.y;return n<0||n*n<r*r+i*i}function ul(t,e){var n=t.r-e.r+Math.max(t.r,e.r,1)*1e-9,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function Oi(t,e){for(var n=0;n<e.length;++n)if(!ul(t,e[n]))return!1;return!0}function kv(t){switch(t.length){case 1:return Sv(t[0]);case 2:return ir(t[0],t[1]);case 3:return cl(t[0],t[1],t[2])}}function Sv(t){return{x:t.x,y:t.y,r:t.r}}function ir(t,e){var n=t.x,r=t.y,i=t.r,s=e.x,a=e.y,o=e.r,l=s-n,u=a-r,c=o-i,h=Math.sqrt(l*l+u*u);return{x:(n+s+l/h*c)/2,y:(r+a+u/h*c)/2,r:(h+i+o)/2}}function cl(t,e,n){var r=t.x,i=t.y,s=t.r,a=e.x,o=e.y,l=e.r,u=n.x,c=n.y,h=n.r,f=r-a,d=r-u,g=i-o,m=i-c,p=l-s,_=h-s,y=r*r+i*i-s*s,x=y-a*a-o*o+l*l,w=y-u*u-c*c+h*h,M=d*g-f*m,T=(g*w-m*x)/(M*2)-r,L=(m*p-g*_)/M,I=(d*x-f*w)/(M*2)-i,$=(f*_-d*p)/M,N=L*L+$*$-1,A=2*(s+T*L+I*$),k=T*T+I*I-s*s,b=-(Math.abs(N)>1e-6?(A+Math.sqrt(A*A-4*N*k))/(2*N):k/A);return{x:r+T+L*b,y:i+I+$*b,r:b}}function ga(t,e,n){var r=t.x-e.x,i,s,a=t.y-e.y,o,l,u=r*r+a*a;u?(s=e.r+n.r,s*=s,l=t.r+n.r,l*=l,s>l?(i=(u+l-s)/(2*u),o=Math.sqrt(Math.max(0,l/u-i*i)),n.x=t.x-i*r-o*a,n.y=t.y-i*a+o*r):(i=(u+s-l)/(2*u),o=Math.sqrt(Math.max(0,s/u-i*i)),n.x=e.x+i*r-o*a,n.y=e.y+i*a+o*r)):(n.x=e.x+n.r,n.y=e.y)}function _a(t,e){var n=t.r+e.r-1e-6,r=e.x-t.x,i=e.y-t.y;return n>0&&n*n>r*r+i*i}function ma(t){var e=t._,n=t.next._,r=e.r+n.r,i=(e.x*n.r+n.x*e.r)/r,s=(e.y*n.r+n.y*e.r)/r;return i*i+s*s}function Nr(t){this._=t,this.next=null,this.previous=null}function Tv(t,e){if(!(s=(t=$v(t)).length))return 0;var n,r,i,s,a,o,l,u,c,h,f;if(n=t[0],n.x=0,n.y=0,!(s>1))return n.r;if(r=t[1],n.x=-r.r,r.x=n.r,r.y=0,!(s>2))return n.r+r.r;ga(r,n,i=t[2]),n=new Nr(n),r=new Nr(r),i=new Nr(i),n.next=i.previous=r,r.next=n.previous=i,i.next=r.previous=n;t:for(l=3;l<s;++l){ga(n._,r._,i=t[l]),i=new Nr(i),u=r.next,c=n.previous,h=r._.r,f=n._.r;do if(h<=f){if(_a(u._,i._)){r=u,n.next=r,r.previous=n,--l;continue t}h+=u._.r,u=u.next}else{if(_a(c._,i._)){n=c,n.next=r,r.previous=n,--l;continue t}f+=c._.r,c=c.previous}while(u!==c.next);for(i.previous=n,i.next=r,n.next=r.previous=r=i,a=ma(n);(i=i.next)!==r;)(o=ma(i))<a&&(n=i,a=o);r=n.next}for(n=[r._],i=r;(i=i.next)!==r;)n.push(i._);for(i=Mv(n,e),l=0;l<s;++l)n=t[l],n.x-=i.x,n.y-=i.y;return i.r}function Nv(t){return Math.sqrt(t.value)}function Cv(){var t=null,e=1,n=1,r=hn;function i(s){const a=bv();return s.x=e/2,s.y=n/2,t?s.eachBefore(ya(t)).eachAfter(zi(r,.5,a)).eachBefore(xa(1)):s.eachBefore(ya(Nv)).eachAfter(zi(hn,1,a)).eachAfter(zi(r,s.r/Math.min(e,n),a)).eachBefore(xa(Math.min(e,n)/(2*s.r))),s}return i.radius=function(s){return arguments.length?(t=yv(s),i):t},i.size=function(s){return arguments.length?(e=+s[0],n=+s[1],i):[e,n]},i.padding=function(s){return arguments.length?(r=typeof s=="function"?s:kn(+s),i):r},i}function ya(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function zi(t,e,n){return function(r){if(i=r.children){var i,s,a=i.length,o=t(r)*e||0,l;if(o)for(s=0;s<a;++s)i[s].r+=o;if(l=Tv(i,n),o)for(s=0;s<a;++s)i[s].r-=o;r.r=l+o}}}function xa(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Fv(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function Iv(t,e,n,r,i){for(var s=t.children,a,o=-1,l=s.length,u=t.value&&(r-e)/t.value;++o<l;)a=s[o],a.y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*u}function Rv(t,e,n,r,i){for(var s=t.children,a,o=-1,l=s.length,u=t.value&&(i-n)/t.value;++o<l;)a=s[o],a.x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*u}var Ov=(1+Math.sqrt(5))/2;function zv(t,e,n,r,i,s){for(var a=[],o=e.children,l,u,c=0,h=0,f=o.length,d,g,m=e.value,p,_,y,x,w,M,T;c<f;){d=i-n,g=s-r;do p=o[h++].value;while(!p&&h<f);for(_=y=p,M=Math.max(g/d,d/g)/(m*t),T=p*p*M,w=Math.max(y/T,T/_);h<f;++h){if(p+=u=o[h].value,u<_&&(_=u),u>y&&(y=u),T=p*p*M,x=Math.max(y/T,T/_),x>w){p-=u;break}w=x}a.push(l={value:p,dice:d<g,children:o.slice(c,h)}),l.dice?Iv(l,n,r,i,m?r+=g*p/m:s):Rv(l,n,r,m?n+=d*p/m:i,s),m-=p,c=h}return a}const Pv=(function t(e){function n(r,i,s,a,o){zv(e,r,i,s,a,o)}return n.ratio=function(r){return t((r=+r)>1?r:1)},n})(Ov);function fl(){var t=Pv,e=!1,n=1,r=1,i=[0],s=hn,a=hn,o=hn,l=hn,u=hn;function c(f){return f.x0=f.y0=0,f.x1=n,f.y1=r,f.eachBefore(h),i=[0],e&&f.eachBefore(Fv),f}function h(f){var d=i[f.depth],g=f.x0+d,m=f.y0+d,p=f.x1-d,_=f.y1-d;p<g&&(g=p=(g+p)/2),_<m&&(m=_=(m+_)/2),f.x0=g,f.y0=m,f.x1=p,f.y1=_,f.children&&(d=i[f.depth+1]=s(f)/2,g+=u(f)-d,m+=a(f)-d,p-=o(f)-d,_-=l(f)-d,p<g&&(g=p=(g+p)/2),_<m&&(m=_=(m+_)/2),t(f,g,m,p,_))}return c.round=function(f){return arguments.length?(e=!!f,c):e},c.size=function(f){return arguments.length?(n=+f[0],r=+f[1],c):[n,r]},c.tile=function(f){return arguments.length?(t=ll(f),c):t},c.padding=function(f){return arguments.length?c.paddingInner(f).paddingOuter(f):c.paddingInner()},c.paddingInner=function(f){return arguments.length?(s=typeof f=="function"?f:kn(+f),c):s},c.paddingOuter=function(f){return arguments.length?c.paddingTop(f).paddingRight(f).paddingBottom(f).paddingLeft(f):c.paddingTop()},c.paddingTop=function(f){return arguments.length?(a=typeof f=="function"?f:kn(+f),c):a},c.paddingRight=function(f){return arguments.length?(o=typeof f=="function"?f:kn(+f),c):o},c.paddingBottom=function(f){return arguments.length?(l=typeof f=="function"?f:kn(+f),c):l},c.paddingLeft=function(f){return arguments.length?(u=typeof f=="function"?f:kn(+f),c):u},c}function Dv(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t);break}return this}function Lv(t){return function(){return t}}function qv(t){return+t}var wa=[0,1];function Nn(t){return t}function as(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Lv(isNaN(e)?NaN:.5)}function Vv(t,e){var n;return t>e&&(n=t,t=e,e=n),function(r){return Math.max(t,Math.min(e,r))}}function jv(t,e,n){var r=t[0],i=t[1],s=e[0],a=e[1];return i<r?(r=as(i,r),s=n(a,s)):(r=as(r,i),s=n(s,a)),function(o){return s(r(o))}}function Hv(t,e,n){var r=Math.min(t.length,e.length)-1,i=new Array(r),s=new Array(r),a=-1;for(t[r]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++a<r;)i[a]=as(t[a],t[a+1]),s[a]=n(e[a],e[a+1]);return function(o){var l=Gu(t,o,1,r)-1;return s[l](i[l](o))}}function Bv(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Uv(){var t=wa,e=wa,n=ks,r,i,s,a=Nn,o,l,u;function c(){var f=Math.min(t.length,e.length);return a!==Nn&&(a=Vv(t[0],t[f-1])),o=f>2?Hv:jv,l=u=null,h}function h(f){return f==null||isNaN(f=+f)?s:(l||(l=o(t.map(r),e,n)))(r(a(f)))}return h.invert=function(f){return a(i((u||(u=o(e,t.map(r),pe)))(f)))},h.domain=function(f){return arguments.length?(t=Array.from(f,qv),c()):t.slice()},h.range=function(f){return arguments.length?(e=Array.from(f),c()):e.slice()},h.rangeRound=function(f){return e=Array.from(f),n=sh,c()},h.clamp=function(f){return arguments.length?(a=f?!0:Nn,c()):a!==Nn},h.interpolate=function(f){return arguments.length?(n=f,c()):n},h.unknown=function(f){return arguments.length?(s=f,h):s},function(f,d){return r=f,i=d,c()}}function Wv(){return Uv()(Nn,Nn)}function Yv(t,e,n,r){var i=tc(t,e,n),s;switch(r=ii(r??",f"),r.type){case"s":{var a=Math.max(Math.abs(t),Math.abs(e));return r.precision==null&&!isNaN(s=Qd(i,a))&&(r.precision=s),ol(r,a)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(s=Zd(i,Math.max(Math.abs(t),Math.abs(e))))&&(r.precision=s-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(s=Kd(i))&&(r.precision=s-(r.type==="%")*2);break}}return al(r)}function Xv(t){var e=t.domain;return t.ticks=function(n){var r=e();return Ju(r[0],r[r.length-1],n??10)},t.tickFormat=function(n,r){var i=e();return Yv(i[0],i[i.length-1],n??10,r)},t.nice=function(n){n==null&&(n=10);var r=e(),i=0,s=r.length-1,a=r[i],o=r[s],l,u,c=10;for(o<a&&(u=a,a=o,o=u,u=i,i=s,s=u);c-- >0;){if(u=Ki(a,o,n),u===l)return r[i]=a,r[s]=o,e(r);if(u>0)a=Math.floor(a/u)*u,o=Math.ceil(o/u)*u;else if(u<0)a=Math.ceil(a*u)/u,o=Math.floor(o*u)/u;else break;l=u}return t},t}function hl(){var t=Wv();return t.copy=function(){return Bv(t,hl())},Dv.apply(t,arguments),Xv(t)}function jt(t){return function(){return t}}const ba=Math.abs,Pt=Math.atan2,ln=Math.cos,Gv=Math.max,Pi=Math.min,we=Math.sin,Cn=Math.sqrt,Yt=1e-12,dr=Math.PI,ai=dr/2,qr=2*dr;function Kv(t){return t>1?0:t<-1?dr:Math.acos(t)}function $a(t){return t>=1?ai:t<=-1?-ai:Math.asin(t)}function Qv(t){let e=3;return t.digits=function(n){if(!arguments.length)return e;if(n==null)e=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);e=r}return t},()=>new Ad(e)}function Zv(t){return t.innerRadius}function Jv(t){return t.outerRadius}function tp(t){return t.startAngle}function ep(t){return t.endAngle}function np(t){return t&&t.padAngle}function rp(t,e,n,r,i,s,a,o){var l=n-t,u=r-e,c=a-i,h=o-s,f=h*l-c*u;if(!(f*f<Yt))return f=(c*(e-s)-h*(t-i))/f,[t+f*l,e+f*u]}function Cr(t,e,n,r,i,s,a){var o=t-n,l=e-r,u=(a?s:-s)/Cn(o*o+l*l),c=u*l,h=-u*o,f=t+c,d=e+h,g=n+c,m=r+h,p=(f+g)/2,_=(d+m)/2,y=g-f,x=m-d,w=y*y+x*x,M=i-s,T=f*m-g*d,L=(x<0?-1:1)*Cn(Gv(0,M*M*w-T*T)),I=(T*x-y*L)/w,$=(-T*y-x*L)/w,N=(T*x+y*L)/w,A=(-T*y+x*L)/w,k=I-p,b=$-_,R=N-p,ft=A-_;return k*k+b*b>R*R+ft*ft&&(I=N,$=A),{cx:I,cy:$,x01:-c,y01:-h,x11:I*(i/M-1),y11:$*(i/M-1)}}function ip(){var t=Zv,e=Jv,n=jt(0),r=null,i=tp,s=ep,a=np,o=null,l=Qv(u);function u(){var c,h,f=+t.apply(this,arguments),d=+e.apply(this,arguments),g=i.apply(this,arguments)-ai,m=s.apply(this,arguments)-ai,p=ba(m-g),_=m>g;if(o||(o=c=l()),d<f&&(h=d,d=f,f=h),!(d>Yt))o.moveTo(0,0);else if(p>qr-Yt)o.moveTo(d*ln(g),d*we(g)),o.arc(0,0,d,g,m,!_),f>Yt&&(o.moveTo(f*ln(m),f*we(m)),o.arc(0,0,f,m,g,_));else{var y=g,x=m,w=g,M=m,T=p,L=p,I=a.apply(this,arguments)/2,$=I>Yt&&(r?+r.apply(this,arguments):Cn(f*f+d*d)),N=Pi(ba(d-f)/2,+n.apply(this,arguments)),A=N,k=N,b,R;if($>Yt){var ft=$a($/f*we(I)),At=$a($/d*we(I));(T-=ft*2)>Yt?(ft*=_?1:-1,w+=ft,M-=ft):(T=0,w=M=(g+m)/2),(L-=At*2)>Yt?(At*=_?1:-1,y+=At,x-=At):(L=0,y=x=(g+m)/2)}var Nt=d*ln(y),j=d*we(y),U=f*ln(M),at=f*we(M);if(N>Yt){var yt=d*ln(x),rt=d*we(x),Ct=f*ln(w),xt=f*we(w),st;if(p<dr)if(st=rp(Nt,j,Ct,xt,yt,rt,U,at)){var wt=Nt-st[0],Ft=j-st[1],Ut=yt-st[0],rn=rt-st[1],q=1/we(Kv((wt*Ut+Ft*rn)/(Cn(wt*wt+Ft*Ft)*Cn(Ut*Ut+rn*rn)))/2),X=Cn(st[0]*st[0]+st[1]*st[1]);A=Pi(N,(f-X)/(q-1)),k=Pi(N,(d-X)/(q+1))}else A=k=0}L>Yt?k>Yt?(b=Cr(Ct,xt,Nt,j,d,k,_),R=Cr(yt,rt,U,at,d,k,_),o.moveTo(b.cx+b.x01,b.cy+b.y01),k<N?o.arc(b.cx,b.cy,k,Pt(b.y01,b.x01),Pt(R.y01,R.x01),!_):(o.arc(b.cx,b.cy,k,Pt(b.y01,b.x01),Pt(b.y11,b.x11),!_),o.arc(0,0,d,Pt(b.cy+b.y11,b.cx+b.x11),Pt(R.cy+R.y11,R.cx+R.x11),!_),o.arc(R.cx,R.cy,k,Pt(R.y11,R.x11),Pt(R.y01,R.x01),!_))):(o.moveTo(Nt,j),o.arc(0,0,d,y,x,!_)):o.moveTo(Nt,j),!(f>Yt)||!(T>Yt)?o.lineTo(U,at):A>Yt?(b=Cr(U,at,yt,rt,f,-A,_),R=Cr(Nt,j,Ct,xt,f,-A,_),o.lineTo(b.cx+b.x01,b.cy+b.y01),A<N?o.arc(b.cx,b.cy,A,Pt(b.y01,b.x01),Pt(R.y01,R.x01),!_):(o.arc(b.cx,b.cy,A,Pt(b.y01,b.x01),Pt(b.y11,b.x11),!_),o.arc(0,0,f,Pt(b.cy+b.y11,b.cx+b.x11),Pt(R.cy+R.y11,R.cx+R.x11),_),o.arc(R.cx,R.cy,A,Pt(R.y11,R.x11),Pt(R.y01,R.x01),!_))):o.arc(0,0,f,M,w,_)}if(o.closePath(),c)return o=null,c+""||null}return u.centroid=function(){var c=(+t.apply(this,arguments)+ +e.apply(this,arguments))/2,h=(+i.apply(this,arguments)+ +s.apply(this,arguments))/2-dr/2;return[ln(h)*c,we(h)*c]},u.innerRadius=function(c){return arguments.length?(t=typeof c=="function"?c:jt(+c),u):t},u.outerRadius=function(c){return arguments.length?(e=typeof c=="function"?c:jt(+c),u):e},u.cornerRadius=function(c){return arguments.length?(n=typeof c=="function"?c:jt(+c),u):n},u.padRadius=function(c){return arguments.length?(r=c==null?null:typeof c=="function"?c:jt(+c),u):r},u.startAngle=function(c){return arguments.length?(i=typeof c=="function"?c:jt(+c),u):i},u.endAngle=function(c){return arguments.length?(s=typeof c=="function"?c:jt(+c),u):s},u.padAngle=function(c){return arguments.length?(a=typeof c=="function"?c:jt(+c),u):a},u.context=function(c){return arguments.length?(o=c??null,u):o},u}function sp(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function ap(t,e){return e<t?-1:e>t?1:e>=t?0:NaN}function op(t){return t}function lp(){var t=op,e=ap,n=null,r=jt(0),i=jt(qr),s=jt(0);function a(o){var l,u=(o=sp(o)).length,c,h,f=0,d=new Array(u),g=new Array(u),m=+r.apply(this,arguments),p=Math.min(qr,Math.max(-qr,i.apply(this,arguments)-m)),_,y=Math.min(Math.abs(p)/u,s.apply(this,arguments)),x=y*(p<0?-1:1),w;for(l=0;l<u;++l)(w=g[d[l]=l]=+t(o[l],l,o))>0&&(f+=w);for(e!=null?d.sort(function(M,T){return e(g[M],g[T])}):n!=null&&d.sort(function(M,T){return n(o[M],o[T])}),l=0,h=f?(p-u*x)/f:0;l<u;++l,m=_)c=d[l],w=g[c],_=m+(w>0?w*h:0)+x,g[c]={data:o[c],index:l,value:w,startAngle:m,endAngle:_,padAngle:y};return g}return a.value=function(o){return arguments.length?(t=typeof o=="function"?o:jt(+o),a):t},a.sortValues=function(o){return arguments.length?(e=o,n=null,a):e},a.sort=function(o){return arguments.length?(n=o,e=null,a):n},a.startAngle=function(o){return arguments.length?(r=typeof o=="function"?o:jt(+o),a):r},a.endAngle=function(o){return arguments.length?(i=typeof o=="function"?o:jt(+o),a):i},a.padAngle=function(o){return arguments.length?(s=typeof o=="function"?o:jt(+o),a):s},a}function sr(t,e,n){this.k=t,this.x=e,this.y=n}sr.prototype={constructor:sr,scale:function(t){return t===1?this:new sr(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new sr(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};sr.prototype;const Aa=30,Ye=500,Xe=800,Di=["#4A90E2","#7B68EE","#50C878","#FF6B6B","#FFA500","#9B59B6","#1ABC9C","#E74C3C"],Li=60,qi=30,Ma=40,Ea=40,ka=40,Sa=60,up=.8,cp=.75,fp=.15,hp=.4,dp=.25,vp=4,pp=30,gp=25,_p=.85,Ta=.7,oi=gl;function Is(t,e){let n=t+"_categories";if(e[n])return n;if(t.endsWith("s")){const r=t.slice(0,-1)+"_categories";if(e[r])return r}return null}function Ge(t,e){const n=nn(t);if(!n)return t;const r=Bo(n),i=.05,s=1,o=Math.min(e/.1,1),l=Math.pow(o,3);return r.s=s-l*(s-i),r.toString()}function Et(t){return t.toLocaleString()}function mp(t){if(t.length===0)return{};const e={},n=t[0];for(const r of Object.keys(n)){if(r==="id"||r==="user"||r==="agent"||r==="connections")continue;const i=n[r];if(typeof i=="string"&&new Set(t.map(a=>a[r])).size<Aa&&(e[r]="string"),Array.isArray(i)){const s=new Set;if(t.forEach(a=>{Array.isArray(a[r])&&a[r].forEach(o=>s.add(o))}),s.size<Aa){const a=Is(r,n);a&&typeof n[a]=="object"?e[r]="hierarchical":e[r]="array"}}}return e}function yp(t,e,n="count",r=["spend_30d","users_1d","users_7d","users_30d"]){const i={};for(const[s,a]of Object.entries(e))a==="hierarchical"?i[s]=xp(t,s,r):a==="string"?(i[s]={},t.forEach(o=>{const l=o[s];i[s][l]||(i[s][l]=oi(),r.forEach(u=>{i[s][l][u]===void 0&&(i[s][l][u]=0)})),i[s][l].count++,r.forEach(u=>{i[s][l][u]=(i[s][l][u]||0)+(o[u]||0)}),li(o)&&i[s][l].problematic++})):a==="array"&&(i[s]={},t.forEach(o=>{(o[s]||[]).forEach(u=>{i[s][u]||(i[s][u]=oi(),r.forEach(c=>{i[s][u][c]===void 0&&(i[s][u][c]=0)})),i[s][u].count++,r.forEach(c=>{i[s][u][c]=(i[s][u][c]||0)+(o[c]||0)}),li(o)&&i[s][u].problematic++})}));return i}function xp(t,e,n=["spend_30d","users_1d","users_7d","users_30d"]){if(t.length===0)return{};const r=Is(e,t[0]);if(!r)return console.error(`No hierarchy field found for facet: ${e}`),{};const i={},s=new Set,a={};return t.forEach(o=>{const l=o[r];l&&Object.entries(l).forEach(([u,c])=>{s.add(u),a[u]||(a[u]=new Set),c.forEach(h=>a[u].add(h))})}),s.forEach(o=>{i[o]=Object.assign(oi(),{children:{}}),n.forEach(l=>{i[o][l]===void 0&&(i[o][l]=0)}),a[o]&&a[o].forEach(l=>{i[o].children[l]=oi(),n.forEach(u=>{i[o].children[l][u]===void 0&&(i[o].children[l][u]=0)})})}),t.forEach(o=>{const l=o[r];l&&Object.entries(l).forEach(([u,c])=>{c.forEach(h=>{i[u].children[h].count++,n.forEach(f=>{i[u].children[h][f]=(i[u].children[h][f]||0)+(o[f]||0)}),li(o)&&i[u].children[h].problematic++,i[u].count++,n.forEach(f=>{i[u][f]=(i[u][f]||0)+(o[f]||0)}),li(o)&&i[u].problematic++})})}),i}function li(t){return t.status==="warning"}function Fr(t,e){const n=t[e]||{direct:[],transitive:[]};return{isDirect:r=>n.direct?.includes(r)??!1,isTransitive:r=>n.transitive?.includes(r)??!1}}function wp(t,e,n,r="count"){const s={name:"root",children:Object.entries(t).map(([l,u])=>({name:l,value:u[r]||0,count:u.count,spend_30d:u.spend_30d,users_1d:u.users_1d,users_7d:u.users_7d,users_30d:u.users_30d,problematic:u.problematic}))},a=mr(s).sum(l=>l.value).sort((l,u)=>(u.value||0)-(l.value||0));return fl().size([e,n]).padding(2).round(!0)(a),a.leaves()}function bp(t,e,n,r="count"){const s={name:"root",children:Object.entries(t).map(([l,u])=>({name:l,count:u.count,spend_30d:u.spend_30d,users_1d:u.users_1d,users_7d:u.users_7d,users_30d:u.users_30d,problematic:u.problematic,isCategory:!0,children:Object.entries(u.children||{}).map(([h,f])=>({name:h,value:f[r]||0,count:f.count,spend_30d:f.spend_30d,users_1d:f.users_1d,users_7d:f.users_7d,users_30d:f.users_30d,problematic:f.problematic,isCategory:!1}))}))},a=mr(s).sum(l=>l.value||0).sort((l,u)=>(u.value||0)-(l.value||0));return fl().size([e,n]).paddingOuter(2).paddingTop(20).paddingInner(2).round(!0)(a),a}function $p(t,e){const n={};return t.forEach(r=>{const i=r[e];if(i!=null){const s=String(i);n[s]||(n[s]=[]),n[s].push(r)}}),n}function Ap(t,e){const n=$p(t,e),r=[],i=Object.entries(n);for(let s=0;s<i.length;s++){const[a,o]=i[s];for(let l=0;l<i.length;l++){const[u,c]=i[l],h=new Set(c.map(m=>m.id));let f=0;const d=new Set,g=new Set;for(const m of o)if(m.connections)for(const p of m.connections)h.has(p)&&(f++,d.add(m.id),g.add(p));f>0&&r.push({source:a,target:u,weight:f,sourceIds:Array.from(d),targetIds:Array.from(g)})}}return r}function Mp(t,e){const n=new Set(e),r=new Set,i=[...e],s=new Map;for(t.forEach(a=>s.set(a.id,a));i.length>0;){const a=i.shift();if(r.has(a))continue;r.add(a);const o=s.get(a);if(o&&o.connections)for(const l of o.connections)r.has(l)||(n.add(l),i.push(l))}return t.filter(a=>n.has(a.id))}const bi=Zt([]),Zn=Zt({}),Le=Zt([]),ee=Zt(0),ui=Zt("count"),ci=Zt("treemap"),Un=Zt(!1),os=Zt(!1),Fn=Zt(!1),ls=Zt(""),us=Zt({}),ar=Zt(null),Ep=ye([bi],([t])=>{const e=new Map;return t.forEach(n=>e.set(n.id,n)),e}),kp=ye([bi],([t])=>{const e=new Map;return t.forEach(n=>e.set(n.id,[])),t.forEach(n=>{n.connections&&Array.isArray(n.connections)&&n.connections.forEach(r=>{const i=e.get(r);i&&i.push(n.id)})}),e}),$i=ye([bi,Le,os],([t,e,n])=>{if(e.length===0)return t;let r=t.filter(i=>e.every(s=>{const{facetName:a,facetValue:o,facetType:l}=s;if(l==="string")return i[a]===o;if(l==="array"||l==="hierarchical"){if(l==="hierarchical"){const c=Is(a,i);if(c){const h=i[c];if(h&&typeof h=="object"&&h[o])return!0}}return(i[a]||[]).includes(o)}return!0}));if(n&&r.length>0){const i=r.map(s=>s.id);r=Mp(t,i)}return r}),dl=ye([$i,Zn,ui,Le],([t,e,n,r])=>{if(Object.keys(e).length===0)return{};const s=yp(t,e,n,["spend_30d","users_1d","users_7d","users_30d"]),a={};r.forEach(l=>{a[l.facetName]||(a[l.facetName]=new Set),a[l.facetName].add(l.facetValue)});const o={};for(const[l,u]of Object.entries(s)){const c=a[l];if(!c){o[l]=u;continue}const h={};for(const[f,d]of Object.entries(u))if(!c.has(f))if(d.children){const g={};for(const[m,p]of Object.entries(d.children))c.has(m)||(g[m]=p);h[f]={...d,children:g}}else h[f]=d;o[l]=h}return o}),Ai=ye([Zn,dl],([t,e])=>Object.keys(t).filter(n=>{const r=e[n];return r?Object.keys(r).length>=2:!1})),yr=ye([Ai,ee],([t,e])=>t[e]||""),Mi=ye([yr,Zn],([t,e])=>e[t]||null),Sp=ye([yr,dl],([t,e])=>e[t]||{}),Tp=ye([$i,yr,Mi,Un],([t,e,n,r])=>!r||!e||n!=="string"?null:Ap(t,e)),Np=ye([$i,yr,Mi,Fn],([t,e,n,r])=>{const i=new Map;return!r||!e||n!=="string"||t.forEach(s=>{const a=s[e];if(a==null)return;const o=String(a);i.has(o)||i.set(o,[]),i.get(o).push(s)}),i});var Cp=Y('<span class="filter-chip svelte-1e87otd"> <button class="remove-filter svelte-1e87otd">Ã</button></span>'),Fp=Y('<div class="filter-notice svelte-1e87otd"><strong class="svelte-1e87otd">Filtered by:</strong> <!> <button class="clear-all svelte-1e87otd">Clear All</button></div>'),Ip=Y('<div class="filter-bar svelte-1e87otd"><div class="toggle-controls svelte-1e87otd"><label class="toggle-label svelte-1e87otd"><input type="checkbox" class="svelte-1e87otd"/> <span>Show Connections</span></label> <label class="toggle-label svelte-1e87otd"><input type="checkbox" class="svelte-1e87otd"/> <span>Transitive Mode</span></label></div> <!></div>');function Rp(t,e){se(e,!1);const n=()=>nt(Un,"$showConnections",s),r=()=>nt(os,"$transitiveMode",s),i=()=>nt(Le,"$activeFilters",s),[s,a]=Be();function o(x){Le.update(w=>w.filter((M,T)=>T!==x))}function l(){Le.set([])}function u(){Un.update(x=>!x)}function c(){os.update(x=>!x)}de();var h=Ip(),f=P(h),d=P(f),g=P(d),m=J(d,2),p=P(m),_=J(f,2);{var y=x=>{var w=Fp(),M=J(P(w),2);ve(M,1,i,Ae,(L,I,$)=>{var N=Cp(),A=P(N),k=J(A);lt(()=>$t(A,`${v(I).facetName??""} = "${v(I).facetValue??""}" `)),pt("click",k,()=>o($)),V(L,N)});var T=J(M,2);pt("click",T,l),V(x,w)};_t(_,x=>{i().length>0&&x(y)})}lt(()=>{Xr(g,n()),Xr(p,r())}),pt("change",g,u),pt("change",p,c),V(t,h),ae(),a()}var Op=Y('<label class="size-toggle-option svelte-1kjcpjp"><input type="radio" name="sizeMetric" class="svelte-1kjcpjp"/> <span class="svelte-1kjcpjp"> </span></label>'),zp=Y('<div class="size-toggle svelte-1kjcpjp"><label class="size-toggle-label svelte-1kjcpjp">SIZE BY:</label> <div class="size-toggle-options svelte-1kjcpjp"></div></div>');function Pp(t,e){se(e,!1);const n=()=>nt(ui,"$sizeMetric",r),[r,i]=Be(),s=ut();let a=kt(e,"schema",8,null);function o(c){ui.set(c)}mt(()=>F(a()),()=>{H(s,a()&&a().metrics?[{value:"count",label:"Agent Count"},...a().metrics.map(c=>({value:c,label:c.replace(/_/g," ").replace(/\b\w/g,h=>h.toUpperCase())}))]:[{value:"count",label:"Agent Count"},{value:"spend_30d",label:"Total Spend (30d)"},{value:"users_1d",label:"Total Users (1d)"},{value:"users_7d",label:"Total Users (7d)"},{value:"users_30d",label:"Total Users (30d)"}])}),He(),de();var l=zp(),u=J(P(l),2);ve(u,5,()=>v(s),Ae,(c,h)=>{var f=Op(),d=P(f),g=J(d,2),m=P(g);lt(()=>{zu(d,(v(h),D(()=>v(h).value))),Xr(d,(n(),v(h),D(()=>n()===v(h).value))),$t(m,(v(h),D(()=>v(h).label)))}),pt("change",d,()=>o(v(h).value)),V(c,f)}),V(t,l),ae(),i()}var Dp=Y('<div class="layout-toggle svelte-18h3sna"><span class="label svelte-18h3sna">Layout:</span> <button>Treemap</button> <button>Packed</button> <button>Donut</button></div>');function Lp(t,e){se(e,!1);const n=()=>nt(ci,"$layoutMode",r),[r,i]=Be();function s(d){ci.set(d)}de();var a=Dp(),o=J(P(a),2);let l;var u=J(o,2);let c;var h=J(u,2);let f;lt(()=>{l=De(o,1,"svelte-18h3sna",null,l,{active:n()==="treemap"}),c=De(u,1,"svelte-18h3sna",null,c,{active:n()==="packed"}),f=De(h,1,"svelte-18h3sna",null,f,{active:n()==="donut"})}),pt("click",o,()=>s("treemap")),pt("click",u,()=>s("packed")),pt("click",h,()=>s("donut")),V(t,a),ae(),i()}var qp=Y('<span class="hint svelte-kgdoqn">(switch to Treemap/Packed)</span>'),Vp=Y('<span class="hint svelte-kgdoqn">(string facets only)</span>'),jp=Y('<div><label class="svelte-kgdoqn"><input type="checkbox" class="svelte-kgdoqn"/> <span class="label-text svelte-kgdoqn">Show Agents</span></label> <!></div>');function Hp(t,e){se(e,!1);const n=()=>nt(Mi,"$currentFacetType",s),r=()=>nt(ci,"$layoutMode",s),i=()=>nt(Fn,"$showIndividualAgents",s),[s,a]=Be(),o=ut();function l(){v(o)&&Fn.update(p=>!p)}mt(()=>(n(),r()),()=>{H(o,n()==="string"&&r()!=="donut")}),mt(()=>(v(o),i(),Fn),()=>{!v(o)&&i()&&Fn.set(!1)}),He(),de();var u=jp();let c;var h=P(u),f=P(h),d=J(h,2);{var g=p=>{var _=qp();V(p,_)},m=p=>{var _=un(),y=Re(_);{var x=w=>{var M=Vp();V(w,M)};_t(y,w=>{v(o)||w(x)},!0)}V(p,_)};_t(d,p=>{!v(o)&&n()==="string"?p(g):p(m,!1)})}lt(()=>{c=De(u,1,"agent-dots-toggle svelte-kgdoqn",null,c,{disabled:!v(o)}),Xr(f,i()),f.disabled=!v(o)}),pt("change",f,l),V(t,u),ae(),a()}var Bp=Y('<button role="tab"> </button>'),Up=Y('<div class="facet-tabs svelte-1xxeg1p" tabindex="0" role="tablist"></div>');function Wp(t,e){se(e,!1);const n=()=>nt(Ai,"$visibleFacets",i),r=()=>nt(ee,"$currentFacetIndex",i),[i,s]=Be();function a(u){ee.set(u)}function o(u){if(u.key==="ArrowRight"&&n().length>0){u.preventDefault();const c=(r()+1)%n().length;ee.set(c)}else if(u.key==="ArrowLeft"&&n().length>0){u.preventDefault();const c=(r()-1+n().length)%n().length;ee.set(c)}else(u.key==="c"||u.key==="C")&&(u.preventDefault(),Un.update(c=>!c))}mt(()=>(n(),r(),ee),()=>{n().length>0&&r()>=n().length&&ee.set(0)}),He(),de();var l=Up();ve(l,5,n,Ae,(u,c,h)=>{var f=Bp();let d;var g=P(f);lt(()=>{d=De(f,1,"tab svelte-1xxeg1p",null,d,{active:r()===h}),me(f,"aria-selected",r()===h),$t(g,v(c))}),pt("click",f,()=>a(h)),V(u,f)}),pt("keydown",l,o),V(t,l),ae(),s()}var Yp=Ao('<svg class="edge-bundling svelte-16is0x2" style="position: absolute; top: 0; left: 0; pointer-events: none;"></svg>');function Xp(t,e){se(e,!1);let n=kt(e,"connections",8),r=kt(e,"rectanglePositions",8),i=kt(e,"width",8,800),s=kt(e,"height",8,500),a=kt(e,"bundleCenter",8,null),o=kt(e,"bundleStrength",8,_p),l=ut();function u(){if(!v(l)||!n()||n().length===0||!r())return;const h=cn(v(l));h.selectAll("*").remove();const f=n().map(p=>{const _=r().get(p.source),y=r().get(p.target);if(!_||!y)return null;const x=_.x+_.width/2,w=_.y+_.height/2,M=y.x+y.width/2,T=y.y+y.height/2;if(p.source===p.target)if(a()){const $=a().x,N=a().y,A=x+($-x)*o()*.7,k=w+(N-w)*o()*.7,b=Math.atan2(w-N,x-$),R=20,ft=A+Math.cos(b+.3)*R,At=k+Math.sin(b+.3)*R;return{path:`M${x},${w} C${A},${k} ${ft},${At} ${x},${w}`,weight:p.weight,source:p.source,target:p.target,isSelfLoop:!0}}else{const $=Math.min(_.width,_.height)*.4,N=x-$,A=w-$*1.5,k=x+$,b=w-$*1.5;return{path:`M${x},${w} C${N},${A} ${k},${b} ${x},${w}`,weight:p.weight,source:p.source,target:p.target,isSelfLoop:!0}}let L,I;if(a()){const $=(x+M)/2,N=(w+T)/2;L=$+(a().x-$)*o(),I=N+(a().y-N)*o()}else{const $=(x+M)/2,N=(w+T)/2,A=M-x,k=T-w,b=Math.sqrt(A*A+k*k);if(b===0)return null;const R=b*.2;L=$-k*R/b,I=N+A*R/b}return{path:`M${x},${w} Q${L},${I} ${M},${T}`,weight:p.weight,source:p.source,target:p.target,isSelfLoop:!1}}).filter(p=>p!==null),d=ec(f,p=>p.weight)||1,g=hl().domain([1,d]).range([1,8]);h.append("defs").append("marker").attr("id","arrowhead").attr("markerWidth",10).attr("markerHeight",10).attr("refX",8).attr("refY",3).attr("orient","auto").append("polygon").attr("points","0 0, 6 3, 0 6").attr("fill","#1976d2").attr("opacity",.5),h.selectAll("path.connection").data(f).join("path").attr("class","connection").attr("d",p=>p.path).attr("stroke","#1976d2").attr("stroke-width",p=>g(p.weight)).attr("fill","none").attr("opacity",.4).attr("marker-end",p=>p.isSelfLoop?null:"url(#arrowhead)").append("title").text(p=>p.isSelfLoop?`${p.source}: ${p.weight} internal connections`:`${p.source} â ${p.target}: ${p.weight} connections`)}pr(()=>{u()}),mt(()=>(F(n()),F(r())),()=>{n()&&r()&&u()}),He(),de();var c=Yp();mi(c,h=>H(l,h),()=>v(l)),lt(()=>{me(c,"width",i()),me(c,"height",s())}),V(t,c),ae()}function Gp(t,e){if(e<=0||t.width<=0||t.height<=0)return[];const{x:n,y:r,width:i,height:s}=t,a=i*s/e,o=Math.sqrt(a/Math.PI)*.85,l=Math.max(1,Math.min(6,o)),u=l*2,c=l*Math.sqrt(3),h=Math.floor((i-l)/u)+1,f=Math.ceil(e/h),d=Math.floor((s-l*2)/c)+1,m=(Math.min(f,d)-1)*c+l*2,p=(s-m)/2,_=[];let y=0;for(;_.length<e;){const x=y%2*l;let w=0;for(;_.length<e;){const M=n+x+w*u+l,T=r+p+y*c+l;if(M+l>n+i)break;if(T+l>r+s)return _;_.push({x:M,y:T,radius:l}),w++}y++}return _}class Kp{constructor(){this.tree=Lr().x(e=>e.x).y(e=>e.y)}build(e,n){this.tree=Lr().x(i=>i.x).y(i=>i.y);const r=e.map((i,s)=>({x:n[s]?.x??0,y:n[s]?.y??0,agent:i}));this.tree.addAll(r)}findNearest(e,n,r=15){return this.tree.find(e,n,r)?.agent??null}clear(){this.tree=Lr().x(e=>e.x).y(e=>e.y)}}var Qp=Y('<div class="truncation-indicator"> </div>'),Zp=Y('<canvas style="position: absolute; top: 0; left: 0; pointer-events: auto;"></canvas> <!>',1);function Jp(t,e){se(e,!1);let n=kt(e,"agentsByFacetValue",8),r=kt(e,"rectanglePositions",8),i=kt(e,"color",8),s=kt(e,"width",8),a=kt(e,"height",8),o=ut(),l=ut(null),u=null,c=new Kp,h=[],f=[],d=null,g=null,m=ut([]);function p($){const N=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec($);return N?[parseInt(N[1],16)/255,parseInt(N[2],16)/255,parseInt(N[3],16)/255]:[.5,.5,.5]}function _(){v(o)&&(H(l,_l({canvas:v(o),attributes:{antialias:!0,alpha:!0,premultipliedAlpha:!1}})),u=v(l)({vert:`
        precision mediump float;
        attribute vec2 position;
        attribute vec4 color;
        attribute float size;
        varying vec4 vColor;
        uniform vec2 canvasSize;

        void main() {
          vec2 clipSpace = (position / canvasSize) * 2.0 - 1.0;
          clipSpace.y = -clipSpace.y;
          gl_Position = vec4(clipSpace, 0.0, 1.0);
          gl_PointSize = size * 2.0;
          vColor = color;
        }
      `,frag:`
        precision mediump float;
        varying vec4 vColor;

        void main() {
          vec2 coord = gl_PointCoord - 0.5;
          float dist = length(coord);
          if (dist > 0.5) discard;
          float alpha = 1.0 - smoothstep(0.4, 0.5, dist);
          gl_FragColor = vec4(vColor.rgb, vColor.a * alpha);
        }
      `,attributes:{position:v(l).prop("positions"),color:v(l).prop("colors"),size:v(l).prop("sizes")},uniforms:{canvasSize:()=>[v(o).width,v(o).height]},count:v(l).prop("count"),primitive:"points",blend:{enable:!0,func:{srcRGB:"src alpha",srcAlpha:1,dstRGB:"one minus src alpha",dstAlpha:1}}}))}function y(){if(!v(l)||!u||!n()||n().size===0)return;h=[],f=[];const $=[],N=[];H(m,[]);for(const[k,b]of n()){const R=r().get(k);if(!R||R.width<=0||R.height<=0)continue;const ft=p(i()),At=Gp(R,b.length),Nt=b.length-At.length;Nt>0&&v(m).push({facetValue:k,notShown:Nt,bounds:R}),b.forEach((j,U)=>{if(U>=At.length)return;const at=At[U];h.push(j),f.push({x:at.x,y:at.y}),j.status==="warning"?$.push(.83,.18,.18,Ta):$.push(ft[0],ft[1],ft[2],Ta);const yt=d&&d.id===j.id;N.push(yt?at.radius*1.5:at.radius)})}if(h.length===0)return;c.build(h,f);const A=new Float32Array(f.length*2);f.forEach((k,b)=>{A[b*2]=k.x,A[b*2+1]=k.y}),v(l).clear({color:[0,0,0,0],depth:1}),u({positions:A,colors:new Float32Array($),sizes:new Float32Array(N),count:h.length})}function x($){if(!v(o))return;const N=v(o).getBoundingClientRect(),A=$.clientX-N.left,k=$.clientY-N.top,b=c.findNearest(A,k,15);b!==d?(d=b,g&&(g.remove(),g=null),b&&(g=document.createElement("div"),g.className="agent-dot-tooltip",g.style.cssText=`
          position: absolute;
          background: rgba(0,0,0,0.8);
          color: white;
          padding: 8px 12px;
          border-radius: 4px;
          font-size: 12px;
          pointer-events: none;
          z-index: 1000;
          left: ${$.pageX+10}px;
          top: ${$.pageY+10}px;
        `,g.innerHTML=`
          <strong>${b.agent}</strong><br/>
          ${b.platform}<br/>
          ${b.status==="warning"?'<span style="color:#ff6b6b">Warning</span>':"Normal"}
        `,document.body.appendChild(g)),y()):g&&(g.style.left=`${$.pageX+10}px`,g.style.top=`${$.pageY+10}px`)}function w(){g&&(g.remove(),g=null),d&&(d=null,y())}function M($){if(!v(o))return;const N=v(o).getBoundingClientRect(),A=$.clientX-N.left,k=$.clientY-N.top,b=c.findNearest(A,k,15);b&&ar.set(b.id)}pr(()=>{_(),y()}),Hu(()=>{g&&g.remove(),v(l)&&v(l).destroy()}),Eo(()=>{y()}),mt(()=>(v(l),F(n())),()=>{v(l)&&n()&&y()}),He(),de();var T=Zp(),L=Re(T);mi(L,$=>H(o,$),()=>v(o));var I=J(L,2);ve(I,1,()=>v(m),Ae,($,N)=>{let A=()=>v(N).notShown,k=()=>v(N).bounds;var b=Qp(),R=P(b);lt(ft=>{Yr(b,`
      position: absolute;
      left: ${k(),D(()=>k().x+k().width/2)??""}px;
      top: ${k(),D(()=>k().y+k().height-16)??""}px;
      transform: translateX(-50%);
      background: rgba(0, 0, 0, 0.6);
      color: white;
      padding: 2px 6px;
      border-radius: 3px;
      font-size: 10px;
      pointer-events: none;
      white-space: nowrap;
    `),$t(R,`+${ft??""} more`)},[()=>(A(),D(()=>A().toLocaleString()))]),V($,b)}),lt(()=>{me(L,"width",s()),me(L,"height",a())}),pt("mousemove",L,x),pt("mouseleave",L,w),pt("click",L,M),V(t,T),ae()}var t0=Y('<span class="filter-caption svelte-1tagvx2"> </span>'),e0=Ao('<svg class="treemap-svg svelte-1tagvx2"></svg>'),n0=Y('<div class="agent-dots-webgl-container"><!></div>'),r0=Y('<div class="facet-group svelte-1tagvx2"><div class="facet-title svelte-1tagvx2"> <!></div>  <div class="facet-container svelte-1tagvx2" style="position: relative;" tabindex="0"><!> <!> <!></div></div>');function i0(t,e){se(e,!1);const n=()=>nt(Le,"$activeFilters",h),r=()=>nt(ci,"$layoutMode",h),i=()=>nt(Fn,"$showIndividualAgents",h),s=()=>nt(Ai,"$visibleFacets",h),a=()=>nt(ee,"$currentFacetIndex",h),o=()=>nt(us,"$highlightedValues",h),l=()=>nt(Un,"$showConnections",h),u=()=>nt(Tp,"$connectionData",h),c=()=>nt(Np,"$agentsByFacetValue",h),[h,f]=Be(),d=ut(),g=ut(),m=ut(),p=ut(),_=ut();let y=kt(e,"facetName",8),x=kt(e,"facetStats",8),w=kt(e,"facetType",8),M=kt(e,"color",8),T=kt(e,"sizeMetric",8,"count"),L=ut(),I=ut(!1),$=ut(new Map),N=ut(null);function A(q){Le.update(X=>X.some(ot=>ot.facetName===y()&&ot.facetValue===q)?X:[...X,{facetName:y(),facetValue:q,facetType:w()}])}function k(q){let X=q.target;if(X.tagName==="rect"||X.tagName==="circle"||X.tagName==="path"){const bt=X.getAttribute("data-facet-value");bt&&A(bt)}}function b(q){if(s().length!==0)if(q.key==="ArrowRight"){q.preventDefault();const X=(a()+1)%s().length;ee.set(X)}else if(q.key==="ArrowLeft"){q.preventDefault();const X=(a()-1+s().length)%s().length;ee.set(X)}else(q.key==="c"||q.key==="C")&&(q.preventDefault(),Un.update(X=>!X))}function R(){w()==="hierarchical"?j():r()==="packed"?At():r()==="donut"?ft():Nt()}function ft(){if(!v(L)||!x())return;const q=cn(v(L)),X=Object.entries(x()).map(([G,z])=>({name:G,value:z[T()]||0,count:z.count,problematic:z.problematic,spend_30d:z.spend_30d,users_1d:z.users_1d,users_7d:z.users_7d,users_30d:z.users_30d})).filter(G=>G.value>0);if(X.length===0){q.selectAll("*").remove(),H(I,!1);return}const bt=!v(I);H(I,!0);const ot=Xe,K=Ye,St=ot/2,S=K/2,O=Math.min(ot,K)/2-20,B=O*up,dt=B*cp,{isDirect:Mt,isTransitive:C}=Fr(o(),y()),W=lp().value(G=>G.value).sort(null),E=ip().innerRadius(B).outerRadius(O),tt=G=>{const z=(G.startAngle+G.endAngle)/2,Z=Math.sin(z)*dt,et=-Math.cos(z)*dt;let Wt=z*180/Math.PI-90;return z>Math.PI/2&&z<3*Math.PI/2&&(Wt+=180),`translate(${Z},${et}) rotate(${Wt})`},Q=G=>{const z=(G.startAngle+G.endAngle)/2;return z>Math.PI/2&&z<3*Math.PI/2?"end":"start"},gt=W(X);let Tt=q.select("g.donut-group");Tt.empty()&&(Tt=q.append("g").attr("class","donut-group").attr("transform",`translate(${St},${S})`));const Jt=Tt.selectAll("g.arc").data(gt,G=>G.data.name).join(G=>{const z=G.append("g").attr("class","arc").style("opacity",bt?1:0);return z.append("path").attr("class",Z=>{const et=["donut-segment"];return Mt(Z.data.name)?et.push("highlighted-direct"):C(Z.data.name)&&et.push("highlighted-transitive"),et.join(" ")}).attr("d",E).attr("fill",Z=>{const et=Z.data.count>0?Z.data.problematic/Z.data.count:0;return Ge(M(),et)}).attr("fill-opacity",.7).attr("stroke","white").attr("stroke-width",2).attr("data-facet-value",Z=>Z.data.name).style("cursor","pointer"),z.append("text").attr("class","donut-label").attr("transform",Z=>tt(Z)).attr("text-anchor",Z=>Q(Z)).attr("dominant-baseline","middle"),z.append("title"),bt||z.transition().duration(500).style("opacity",1),z},G=>(G.select("path").attr("class",z=>{const Z=["donut-segment"];return Mt(z.data.name)?Z.push("highlighted-direct"):C(z.data.name)&&Z.push("highlighted-transitive"),Z.join(" ")}).transition().duration(500).attr("d",E).attr("fill",z=>{const Z=z.data.count>0?z.data.problematic/z.data.count:0;return Ge(M(),Z)}),G.select(".donut-label").transition().duration(500).attr("transform",z=>tt(z)).attr("text-anchor",z=>Q(z)),G),G=>G.transition().duration(500).style("opacity",0).remove());Jt.select(".donut-label").text(G=>{const z=G.endAngle-G.startAngle;if(z<=fp)return"";const Z=G.data[T()]||0,et=T()==="spend_30d"?`$${Et(Math.round(Z))}`:Et(Z);return z>hp?`${G.data.name} (${et})`:z>dp?et:""}),Jt.select("title").text(G=>`${G.data.name}
Count: ${Et(G.data.count)}${G.data.problematic>0?`
Problematic: ${Et(G.data.problematic)}`:""}`),v($).clear(),gt.forEach(G=>{const z=E.centroid(G),Z=Math.sqrt(z[0]**2+z[1]**2),et=[St+B*(z[0]/Z),S+B*(z[1]/Z)];v($).set(G.data.name,{x:et[0]-5,y:et[1]-5,width:10,height:10})}),H($,v($)),H(N,{x:St,y:S})}function At(){if(!v(L)||!x())return;const q=cn(v(L)),X=Object.entries(x()).map(([C,W])=>({name:C,value:W[T()]||0,count:W.count,spend_30d:W.spend_30d,users_1d:W.users_1d,users_7d:W.users_7d,users_30d:W.users_30d,problematic:W.problematic}));if(X.length===0){q.selectAll("*").remove(),H(I,!1);return}const ot=mr({name:"root",children:X}).sum(C=>C.value||1).sort((C,W)=>(W.value||0)-(C.value||0)),K=Math.min(Xe,Ye);Cv().size([K,K]).padding(vp)(ot);const S=!v(I);X.length>0&&H(I,!0);const{isDirect:O,isTransitive:B}=Fr(o(),y()),dt=ot.leaves(),Mt=q.selectAll("g.circle-node").data(dt,C=>C.data.name).join(C=>{const W=C.append("g").attr("class","circle-node").attr("transform",E=>`translate(${E.x},${E.y})`).style("opacity",S?1:0);return W.append("title"),W.append("circle").attr("class",E=>O(E.data.name)?"highlighted-direct":B(E.data.name)?"highlighted-transitive":"").attr("r",E=>E.r).attr("fill",E=>{const tt=E.data.count>0?E.data.problematic/E.data.count:0;return Ge(M(),tt)}).attr("fill-opacity",.7).attr("stroke","rgba(0,0,0,0.2)").attr("stroke-width",1).attr("data-facet-value",E=>E.data.name).style("cursor","pointer"),W.append("text").attr("class","packed-label").attr("text-anchor","middle").attr("dy","-0.3em"),W.append("text").attr("class","packed-count").attr("text-anchor","middle").attr("dy","0.9em"),S||W.transition().duration(500).style("opacity",1),W},C=>(C.transition().duration(500).attr("transform",W=>`translate(${W.x},${W.y})`),C.select("circle").attr("class",W=>O(W.data.name)?"highlighted-direct":B(W.data.name)?"highlighted-transitive":"").transition().duration(500).attr("r",W=>W.r).attr("fill",W=>{const E=W.data.count>0?W.data.problematic/W.data.count:0;return Ge(M(),E)}),C),C=>C.transition().duration(500).style("opacity",0).remove());Mt.select("title").text(C=>`${C.data.name}
Count: ${Et(C.data.count)}${C.data.problematic>0?`
Problematic: ${Et(C.data.problematic)}`:""}`),Mt.select(".packed-label").text(C=>C.r>pp?C.data.name:""),Mt.select(".packed-count").text(C=>{if(v(_)||C.r<=gp)return"";const W=C.data[T()]||0;return T()==="spend_30d"?`$${Et(Math.round(W))}`:Et(W)}),v($).clear(),dt.forEach(C=>{v($).set(C.data.name,{x:C.x-C.r,y:C.y-C.r,width:C.r*2,height:C.r*2})}),H($,v($)),H(N,null)}function Nt(){if(!v(L)||!x())return;const q=wp(x(),Xe,Ye,T()),X=cn(v(L)),bt=!v(I)||q.length===0;q.length>0&&H(I,!0);const{isDirect:ot,isTransitive:K}=Fr(o(),y()),St=X.selectAll("g").data(q,S=>S.data.name).join(S=>{const O=S.append("g").attr("transform",B=>`translate(${B.x0},${B.y0})`).style("opacity",bt?1:0);return O.append("title"),O.append("rect").attr("class",B=>ot(B.data.name)?"highlighted-direct":K(B.data.name)?"highlighted-transitive":"").attr("width",B=>B.x1-B.x0).attr("height",B=>B.y1-B.y0).attr("fill",B=>{const dt=B.data.count>0?B.data.problematic/B.data.count:0;return Ge(M(),dt)}).attr("fill-opacity",.7).attr("stroke","rgba(0,0,0,0.2)").attr("stroke-width",1).attr("data-facet-value",B=>B.data.name).style("cursor","pointer"),O.append("text").attr("class","treemap-label").attr("x",5).attr("y",15),O.append("text").attr("class","treemap-count").attr("text-anchor","middle"),O.append("text").attr("class","treemap-problematic").attr("text-anchor","middle"),bt?O:O.transition().duration(500).style("opacity",1)},S=>(S.transition().duration(500).attr("transform",O=>`translate(${O.x0},${O.y0})`),S.select("rect").attr("class",O=>ot(O.data.name)?"highlighted-direct":K(O.data.name)?"highlighted-transitive":"").transition().duration(500).attr("width",O=>O.x1-O.x0).attr("height",O=>O.y1-O.y0).attr("fill",O=>{const B=O.data.count>0?O.data.problematic/O.data.count:0;return Ge(M(),B)}),S),S=>S.transition().duration(500).style("opacity",0).remove());St.select("title").text(S=>`${S.data.name}
Count: ${Et(S.data.count)}${S.data.problematic>0?`
Problematic: ${Et(S.data.problematic)}`:""}`),St.select(".treemap-label").text(S=>S.x1-S.x0>Li&&S.y1-S.y0>qi?S.data.name:"").attr("x",5).attr("y",15),St.select(".treemap-count").text(S=>{if(v(_)||S.x1-S.x0<=Ma||S.y1-S.y0<=Ea)return"";const O=S.data[T()]||0;return T()==="spend_30d"?`$${Et(Math.round(O))}`:Et(O)}).attr("x",S=>(S.x1-S.x0)/2).attr("y",S=>(S.y1-S.y0)/2),St.select(".treemap-problematic").text(S=>v(_)?"":S.data.problematic>0&&S.x1-S.x0>ka&&S.y1-S.y0>Sa?`â  ${Et(S.data.problematic)}`:"").attr("x",S=>(S.x1-S.x0)/2).attr("y",S=>(S.y1-S.y0)/2+20),v($).clear(),q.forEach(S=>{v($).set(S.data.name,{x:S.x0,y:S.y0,width:S.x1-S.x0,height:S.y1-S.y0})}),H($,v($)),H(N,null)}function j(){if(!v(L)||!x())return;if(Object.keys(x()).length===0){cn(v(L)).selectAll("*").remove(),H(I,!1);return}const q=bp(x(),Xe,Ye,T()),X=cn(v(L)),bt=q.children||[],ot=!v(I)||bt.length===0;bt.length>0&&H(I,!0);const{isDirect:K,isTransitive:St}=Fr(o(),y()),S=X.selectAll("g.category-group").data(bt,O=>O.data.name).join(O=>{const B=O.append("g").attr("class","category-group").attr("transform",dt=>`translate(${dt.x0},${dt.y0})`).style("opacity",ot?1:0);return B.append("rect").attr("class","category-rect").attr("width",dt=>dt.x1-dt.x0).attr("height",dt=>dt.y1-dt.y0).attr("fill","transparent").attr("stroke",M()).attr("stroke-width",2).attr("data-facet-value",dt=>dt.data.name).style("cursor","pointer"),B.append("text").attr("class","treemap-category-label").attr("x",5).attr("y",15),B.append("title"),ot||B.transition().duration(500).style("opacity",1),B},O=>(O.transition().duration(500).attr("transform",B=>`translate(${B.x0},${B.y0})`),O.select("rect.category-rect").transition().duration(500).attr("width",B=>B.x1-B.x0).attr("height",B=>B.y1-B.y0),O),O=>O.transition().duration(500).style("opacity",0).remove());S.select(".treemap-category-label").text(O=>{const B=O.x1-O.x0,dt=O.y1-O.y0;return B>Li&&dt>qi?O.data.name:""}),S.select("title").text(O=>`${O.data.name}
Category
Count: ${Et(O.data.count)}`),S.each(function(O){const B=cn(this),dt=O.children||[],Mt=O.x0,C=O.y0,W=B.selectAll("g.leaf-node").data(dt,E=>E.data.name).join(E=>{const tt=E.append("g").attr("class","leaf-node").attr("transform",Q=>`translate(${Q.x0-Mt},${Q.y0-C})`).style("opacity",ot?1:0);return tt.append("rect").attr("class",Q=>{const gt=["leaf-rect"];return K(Q.data.name)?gt.push("highlighted-direct"):St(Q.data.name)&&gt.push("highlighted-transitive"),gt.join(" ")}).attr("width",Q=>Q.x1-Q.x0).attr("height",Q=>Q.y1-Q.y0).attr("fill",Q=>{const gt=Q.data.count>0?Q.data.problematic/Q.data.count:0;return Ge(M(),gt)}).attr("fill-opacity",.7).attr("stroke","rgba(0,0,0,0.2)").attr("stroke-width",1).attr("data-facet-value",Q=>Q.data.name).style("cursor","pointer"),tt.append("text").attr("class","treemap-label").attr("x",5).attr("y",15),tt.append("text").attr("class","treemap-count").attr("text-anchor","middle"),tt.append("text").attr("class","treemap-problematic").attr("text-anchor","middle"),tt.append("title"),ot||tt.transition().duration(500).style("opacity",1),tt},E=>(E.transition().duration(500).attr("transform",tt=>`translate(${tt.x0-Mt},${tt.y0-C})`),E.select("rect").attr("class",tt=>{const Q=["leaf-rect"];return K(tt.data.name)?Q.push("highlighted-direct"):St(tt.data.name)&&Q.push("highlighted-transitive"),Q.join(" ")}).transition().duration(500).attr("width",tt=>tt.x1-tt.x0).attr("height",tt=>tt.y1-tt.y0).attr("fill",tt=>{const Q=tt.data.count>0?tt.data.problematic/tt.data.count:0;return Ge(M(),Q)}),E),E=>E.transition().duration(500).style("opacity",0).remove());W.select(".treemap-label").text(E=>{const tt=E.x1-E.x0,Q=E.y1-E.y0;return tt>Li&&Q>qi?E.data.name:""}),W.select(".treemap-count").text(E=>{if(E.x1-E.x0<=Ma||E.y1-E.y0<=Ea)return"";const tt=E.data[T()]||0;return T()==="spend_30d"?`$${Et(Math.round(tt))}`:Et(tt)}).attr("x",E=>(E.x1-E.x0)/2).attr("y",E=>(E.y1-E.y0)/2),W.select(".treemap-problematic").text(E=>E.data.problematic>0&&E.x1-E.x0>ka&&E.y1-E.y0>Sa?`â  ${Et(E.data.problematic)}`:"").attr("x",E=>(E.x1-E.x0)/2).attr("y",E=>(E.y1-E.y0)/2+20),W.select("title").text(E=>`${E.data.name}
Permission
Count: ${Et(E.data.count)}${E.data.problematic>0?`
Problematic: ${Et(E.data.problematic)}`:""}`)})}pr(R),Eo(R),mt(()=>(n(),F(y())),()=>{H(d,n().filter(q=>q.facetName===y()))}),mt(()=>v(d),()=>{H(g,v(d).length>0?`: ${v(d).map(q=>`"${q.facetValue}"`).join(", ")}`:"")}),mt(()=>(F(y()),r()),()=>{H(m,`${y()}-${r()}`)}),mt(()=>v(m),()=>{v(m)&&(H(I,!1),H($,new Map),H(N,null))}),mt(()=>(i(),F(w()),r()),()=>{H(p,i()&&w()==="string"&&r()!=="donut")}),mt(()=>v(p),()=>{H(_,v(p))}),mt(()=>(o(),r(),i()),()=>{(o()||r()||i()!==void 0)&&R()}),He(),de();var U=r0(),at=P(U),yt=P(at),rt=J(yt);{var Ct=q=>{var X=t0(),bt=P(X);lt(()=>$t(bt,v(g))),V(q,X)};_t(rt,q=>{v(g)&&q(Ct)})}var xt=J(at,2),st=P(xt);ku(st,()=>v(m),q=>{var X=e0();mi(X,bt=>H(L,bt),()=>v(L)),lt(()=>{me(X,"width",Xe),me(X,"height",Ye)}),pt("click",X,k),V(q,X)});var wt=J(st,2);{var Ft=q=>{Xp(q,{get connections(){return u()},get rectanglePositions(){return v($)},get width(){return Xe},get height(){return Ye},get bundleCenter(){return v(N)}})};_t(wt,q=>{l(),u(),F(w()),v($),D(()=>l()&&u()&&u().length>0&&w()==="string"&&v($).size>0)&&q(Ft)})}var Ut=J(wt,2);{var rn=q=>{var X=n0(),bt=P(X);Jp(bt,{get agentsByFacetValue(){return c()},get rectanglePositions(){return v($)},get color(){return M()},get width(){return Xe},get height(){return Ye}}),lt(()=>Yr(X,`position: absolute; top: 0; left: 0; width: ${Xe}px; height: ${Ye}px; pointer-events: none;`)),V(q,X)};_t(Ut,q=>{i()&&w()==="string"&&r()!=="donut"&&q(rn)})}lt(q=>$t(yt,q),[()=>(F(y()),D(()=>y().toUpperCase()))]),pt("keydown",xt,b),pt("mouseenter",xt,q=>q.currentTarget.focus()),V(t,U),ae(),f()}function En(t,e,n){let r=n.initialDeps??[],i;function s(){var a,o,l,u;let c;n.key&&((a=n.debug)!=null&&a.call(n))&&(c=Date.now());const h=t();if(!(h.length!==r.length||h.some((g,m)=>r[m]!==g)))return i;r=h;let d;if(n.key&&((o=n.debug)!=null&&o.call(n))&&(d=Date.now()),i=e(...h),n.key&&((l=n.debug)!=null&&l.call(n))){const g=Math.round((Date.now()-c)*100)/100,m=Math.round((Date.now()-d)*100)/100,p=m/16,_=(y,x)=>{for(y=String(y);y.length<x;)y=" "+y;return y};console.info(`%câ± ${_(m,5)} /${_(g,5)} ms`,`
            font-size: .6rem;
            font-weight: bold;
            color: hsl(${Math.max(0,Math.min(120-120*p,120))}deg 100% 31%);`,n?.key)}return(u=n?.onChange)==null||u.call(n,i),i}return s.updateDeps=a=>{r=a},s}function Na(t,e){if(t===void 0)throw new Error("Unexpected undefined");return t}const s0=(t,e)=>Math.abs(t-e)<1.01,a0=(t,e,n)=>{let r;return function(...i){t.clearTimeout(r),r=t.setTimeout(()=>e.apply(this,i),n)}},Ca=t=>{const{offsetWidth:e,offsetHeight:n}=t;return{width:e,height:n}},o0=t=>t,l0=t=>{const e=Math.max(t.startIndex-t.overscan,0),n=Math.min(t.endIndex+t.overscan,t.count-1),r=[];for(let i=e;i<=n;i++)r.push(i);return r},u0=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;const i=a=>{const{width:o,height:l}=a;e({width:Math.round(o),height:Math.round(l)})};if(i(Ca(n)),!r.ResizeObserver)return()=>{};const s=new r.ResizeObserver(a=>{const o=()=>{const l=a[0];if(l?.borderBoxSize){const u=l.borderBoxSize[0];if(u){i({width:u.inlineSize,height:u.blockSize});return}}i(Ca(n))};t.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(o):o()});return s.observe(n,{box:"border-box"}),()=>{s.unobserve(n)}},Fa={passive:!0},Ia=typeof window>"u"?!0:"onscrollend"in window,c0=(t,e)=>{const n=t.scrollElement;if(!n)return;const r=t.targetWindow;if(!r)return;let i=0;const s=t.options.useScrollendEvent&&Ia?()=>{}:a0(r,()=>{e(i,!1)},t.options.isScrollingResetDelay),a=c=>()=>{const{horizontal:h,isRtl:f}=t.options;i=h?n.scrollLeft*(f&&-1||1):n.scrollTop,s(),e(i,c)},o=a(!0),l=a(!1);l(),n.addEventListener("scroll",o,Fa);const u=t.options.useScrollendEvent&&Ia;return u&&n.addEventListener("scrollend",l,Fa),()=>{n.removeEventListener("scroll",o),u&&n.removeEventListener("scrollend",l)}},f0=(t,e,n)=>{if(e?.borderBoxSize){const r=e.borderBoxSize[0];if(r)return Math.round(r[n.options.horizontal?"inlineSize":"blockSize"])}return t[n.options.horizontal?"offsetWidth":"offsetHeight"]},h0=(t,{adjustments:e=0,behavior:n},r)=>{var i,s;const a=t+e;(s=(i=r.scrollElement)==null?void 0:i.scrollTo)==null||s.call(i,{[r.options.horizontal?"left":"top"]:a,behavior:n})};class d0{constructor(e){this.unsubs=[],this.scrollElement=null,this.targetWindow=null,this.isScrolling=!1,this.measurementsCache=[],this.itemSizeCache=new Map,this.pendingMeasuredCacheIndexes=[],this.scrollRect=null,this.scrollOffset=null,this.scrollDirection=null,this.scrollAdjustments=0,this.elementsCache=new Map,this.observer=(()=>{let n=null;const r=()=>n||(!this.targetWindow||!this.targetWindow.ResizeObserver?null:n=new this.targetWindow.ResizeObserver(i=>{i.forEach(s=>{const a=()=>{this._measureElement(s.target,s)};this.options.useAnimationFrameWithResizeObserver?requestAnimationFrame(a):a()})}));return{disconnect:()=>{var i;(i=r())==null||i.disconnect(),n=null},observe:i=>{var s;return(s=r())==null?void 0:s.observe(i,{box:"border-box"})},unobserve:i=>{var s;return(s=r())==null?void 0:s.unobserve(i)}}})(),this.range=null,this.setOptions=n=>{Object.entries(n).forEach(([r,i])=>{typeof i>"u"&&delete n[r]}),this.options={debug:!1,initialOffset:0,overscan:1,paddingStart:0,paddingEnd:0,scrollPaddingStart:0,scrollPaddingEnd:0,horizontal:!1,getItemKey:o0,rangeExtractor:l0,onChange:()=>{},measureElement:f0,initialRect:{width:0,height:0},scrollMargin:0,gap:0,indexAttribute:"data-index",initialMeasurementsCache:[],lanes:1,isScrollingResetDelay:150,enabled:!0,isRtl:!1,useScrollendEvent:!1,useAnimationFrameWithResizeObserver:!1,...n}},this.notify=n=>{var r,i;(i=(r=this.options).onChange)==null||i.call(r,this,n)},this.maybeNotify=En(()=>(this.calculateRange(),[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]),n=>{this.notify(n)},{key:!1,debug:()=>this.options.debug,initialDeps:[this.isScrolling,this.range?this.range.startIndex:null,this.range?this.range.endIndex:null]}),this.cleanup=()=>{this.unsubs.filter(Boolean).forEach(n=>n()),this.unsubs=[],this.observer.disconnect(),this.scrollElement=null,this.targetWindow=null},this._didMount=()=>()=>{this.cleanup()},this._willUpdate=()=>{var n;const r=this.options.enabled?this.options.getScrollElement():null;if(this.scrollElement!==r){if(this.cleanup(),!r){this.maybeNotify();return}this.scrollElement=r,this.scrollElement&&"ownerDocument"in this.scrollElement?this.targetWindow=this.scrollElement.ownerDocument.defaultView:this.targetWindow=((n=this.scrollElement)==null?void 0:n.window)??null,this.elementsCache.forEach(i=>{this.observer.observe(i)}),this._scrollToOffset(this.getScrollOffset(),{adjustments:void 0,behavior:void 0}),this.unsubs.push(this.options.observeElementRect(this,i=>{this.scrollRect=i,this.maybeNotify()})),this.unsubs.push(this.options.observeElementOffset(this,(i,s)=>{this.scrollAdjustments=0,this.scrollDirection=s?this.getScrollOffset()<i?"forward":"backward":null,this.scrollOffset=i,this.isScrolling=s,this.maybeNotify()}))}},this.getSize=()=>this.options.enabled?(this.scrollRect=this.scrollRect??this.options.initialRect,this.scrollRect[this.options.horizontal?"width":"height"]):(this.scrollRect=null,0),this.getScrollOffset=()=>this.options.enabled?(this.scrollOffset=this.scrollOffset??(typeof this.options.initialOffset=="function"?this.options.initialOffset():this.options.initialOffset),this.scrollOffset):(this.scrollOffset=null,0),this.getFurthestMeasurement=(n,r)=>{const i=new Map,s=new Map;for(let a=r-1;a>=0;a--){const o=n[a];if(i.has(o.lane))continue;const l=s.get(o.lane);if(l==null||o.end>l.end?s.set(o.lane,o):o.end<l.end&&i.set(o.lane,!0),i.size===this.options.lanes)break}return s.size===this.options.lanes?Array.from(s.values()).sort((a,o)=>a.end===o.end?a.index-o.index:a.end-o.end)[0]:void 0},this.getMeasurementOptions=En(()=>[this.options.count,this.options.paddingStart,this.options.scrollMargin,this.options.getItemKey,this.options.enabled],(n,r,i,s,a)=>(this.pendingMeasuredCacheIndexes=[],{count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a}),{key:!1}),this.getMeasurements=En(()=>[this.getMeasurementOptions(),this.itemSizeCache],({count:n,paddingStart:r,scrollMargin:i,getItemKey:s,enabled:a},o)=>{if(!a)return this.measurementsCache=[],this.itemSizeCache.clear(),[];this.measurementsCache.length===0&&(this.measurementsCache=this.options.initialMeasurementsCache,this.measurementsCache.forEach(c=>{this.itemSizeCache.set(c.key,c.size)}));const l=this.pendingMeasuredCacheIndexes.length>0?Math.min(...this.pendingMeasuredCacheIndexes):0;this.pendingMeasuredCacheIndexes=[];const u=this.measurementsCache.slice(0,l);for(let c=l;c<n;c++){const h=s(c),f=this.options.lanes===1?u[c-1]:this.getFurthestMeasurement(u,c),d=f?f.end+this.options.gap:r+i,g=o.get(h),m=typeof g=="number"?g:this.options.estimateSize(c),p=d+m,_=f?f.lane:c%this.options.lanes;u[c]={index:c,start:d,size:m,end:p,key:h,lane:_}}return this.measurementsCache=u,u},{key:!1,debug:()=>this.options.debug}),this.calculateRange=En(()=>[this.getMeasurements(),this.getSize(),this.getScrollOffset(),this.options.lanes],(n,r,i,s)=>this.range=n.length>0&&r>0?v0({measurements:n,outerSize:r,scrollOffset:i,lanes:s}):null,{key:!1,debug:()=>this.options.debug}),this.getVirtualIndexes=En(()=>{let n=null,r=null;const i=this.calculateRange();return i&&(n=i.startIndex,r=i.endIndex),this.maybeNotify.updateDeps([this.isScrolling,n,r]),[this.options.rangeExtractor,this.options.overscan,this.options.count,n,r]},(n,r,i,s,a)=>s===null||a===null?[]:n({startIndex:s,endIndex:a,overscan:r,count:i}),{key:!1,debug:()=>this.options.debug}),this.indexFromElement=n=>{const r=this.options.indexAttribute,i=n.getAttribute(r);return i?parseInt(i,10):(console.warn(`Missing attribute name '${r}={index}' on measured element.`),-1)},this._measureElement=(n,r)=>{const i=this.indexFromElement(n),s=this.measurementsCache[i];if(!s)return;const a=s.key,o=this.elementsCache.get(a);o!==n&&(o&&this.observer.unobserve(o),this.observer.observe(n),this.elementsCache.set(a,n)),n.isConnected&&this.resizeItem(i,this.options.measureElement(n,r,this))},this.resizeItem=(n,r)=>{const i=this.measurementsCache[n];if(!i)return;const s=this.itemSizeCache.get(i.key)??i.size,a=r-s;a!==0&&((this.shouldAdjustScrollPositionOnItemSizeChange!==void 0?this.shouldAdjustScrollPositionOnItemSizeChange(i,a,this):i.start<this.getScrollOffset()+this.scrollAdjustments)&&this._scrollToOffset(this.getScrollOffset(),{adjustments:this.scrollAdjustments+=a,behavior:void 0}),this.pendingMeasuredCacheIndexes.push(i.index),this.itemSizeCache=new Map(this.itemSizeCache.set(i.key,r)),this.notify(!1))},this.measureElement=n=>{if(!n){this.elementsCache.forEach((r,i)=>{r.isConnected||(this.observer.unobserve(r),this.elementsCache.delete(i))});return}this._measureElement(n,void 0)},this.getVirtualItems=En(()=>[this.getVirtualIndexes(),this.getMeasurements()],(n,r)=>{const i=[];for(let s=0,a=n.length;s<a;s++){const o=n[s],l=r[o];i.push(l)}return i},{key:!1,debug:()=>this.options.debug}),this.getVirtualItemForOffset=n=>{const r=this.getMeasurements();if(r.length!==0)return Na(r[vl(0,r.length-1,i=>Na(r[i]).start,n)])},this.getOffsetForAlignment=(n,r,i=0)=>{const s=this.getSize(),a=this.getScrollOffset();r==="auto"&&(r=n>=a+s?"end":"start"),r==="center"?n+=(i-s)/2:r==="end"&&(n-=s);const o=this.getTotalSize()+this.options.scrollMargin-s;return Math.max(Math.min(o,n),0)},this.getOffsetForIndex=(n,r="auto")=>{n=Math.max(0,Math.min(n,this.options.count-1));const i=this.measurementsCache[n];if(!i)return;const s=this.getSize(),a=this.getScrollOffset();if(r==="auto")if(i.end>=a+s-this.options.scrollPaddingEnd)r="end";else if(i.start<=a+this.options.scrollPaddingStart)r="start";else return[a,r];const o=r==="end"?i.end+this.options.scrollPaddingEnd:i.start-this.options.scrollPaddingStart;return[this.getOffsetForAlignment(o,r,i.size),r]},this.isDynamicMode=()=>this.elementsCache.size>0,this.scrollToOffset=(n,{align:r="start",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getOffsetForAlignment(n,r),{adjustments:void 0,behavior:i})},this.scrollToIndex=(n,{align:r="auto",behavior:i}={})=>{i==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),n=Math.max(0,Math.min(n,this.options.count-1));let s=0;const a=10,o=u=>{if(!this.targetWindow)return;const c=this.getOffsetForIndex(n,u);if(!c){console.warn("Failed to get offset for index:",n);return}const[h,f]=c;this._scrollToOffset(h,{adjustments:void 0,behavior:i}),this.targetWindow.requestAnimationFrame(()=>{const d=this.getScrollOffset(),g=this.getOffsetForIndex(n,f);if(!g){console.warn("Failed to get offset for index:",n);return}s0(g[0],d)||l(f)})},l=u=>{this.targetWindow&&(s++,s<a?this.targetWindow.requestAnimationFrame(()=>o(u)):console.warn(`Failed to scroll to index ${n} after ${a} attempts.`))};o(r)},this.scrollBy=(n,{behavior:r}={})=>{r==="smooth"&&this.isDynamicMode()&&console.warn("The `smooth` scroll behavior is not fully supported with dynamic size."),this._scrollToOffset(this.getScrollOffset()+n,{adjustments:void 0,behavior:r})},this.getTotalSize=()=>{var n;const r=this.getMeasurements();let i;if(r.length===0)i=this.options.paddingStart;else if(this.options.lanes===1)i=((n=r[r.length-1])==null?void 0:n.end)??0;else{const s=Array(this.options.lanes).fill(null);let a=r.length-1;for(;a>=0&&s.some(o=>o===null);){const o=r[a];s[o.lane]===null&&(s[o.lane]=o.end),a--}i=Math.max(...s.filter(o=>o!==null))}return Math.max(i-this.options.scrollMargin+this.options.paddingEnd,0)},this._scrollToOffset=(n,{adjustments:r,behavior:i})=>{this.options.scrollToFn(n,{behavior:i,adjustments:r},this)},this.measure=()=>{this.itemSizeCache=new Map,this.notify(!1)},this.setOptions(e)}}const vl=(t,e,n,r)=>{for(;t<=e;){const i=(t+e)/2|0,s=n(i);if(s<r)t=i+1;else if(s>r)e=i-1;else return i}return t>0?t-1:0};function v0({measurements:t,outerSize:e,scrollOffset:n,lanes:r}){const i=t.length-1,s=l=>t[l].start;if(t.length<=r)return{startIndex:0,endIndex:i};let a=vl(0,i,s,n),o=a;if(r===1)for(;o<i&&t[o].end<n+e;)o++;else if(r>1){const l=Array(r).fill(0);for(;o<i&&l.some(c=>c<n+e);){const c=t[o];l[c.lane]=c.end,o++}const u=Array(r).fill(n+e);for(;a>=0&&u.some(c=>c>=n);){const c=t[a];u[c.lane]=c.start,a--}a=Math.max(0,a-a%r),o=Math.min(i,o+(r-1-o%r))}return{startIndex:a,endIndex:o}}function p0(t){const e=new d0(t),n=e.setOptions;let r;const i=s=>{const a={...e.options,...s,onChange:s.onChange};n({...a,onChange:(o,l)=>{r.set(o),a.onChange?.(o,l)}}),e._willUpdate()};return r=Zt(e,()=>(i(t),e._didMount())),ye(r,s=>Object.assign(s,{setOptions:i}))}function g0(t){return p0({observeElementRect:u0,observeElementOffset:c0,scrollToFn:h0,...t})}async function _0(){try{const t=await rl("../data.config.json");return console.log("â Loaded config from data.config.json"),t}catch{return console.warn("No config file found, using auto-detection"),null}}function m0(t,e){if(e)return console.log("â Using explicit config from data.config.json"),e;console.warn("â  No config file found - using auto-detection heuristics"),console.warn("  For better control, create a data.config.json file");const n=t[0]||{},r=Object.keys(n),i={version:"1.0-auto",roles:{titleField:y0(n),idField:x0(r),warningField:w0(r),warningValue:"warning",connectionField:b0(n),connectionSecondaryField:null},fieldOrder:r.filter(s=>$0(s,n)),excludeFromDisplay:[]};return console.log("Auto-detected schema:",{titleField:i.roles.titleField,idField:i.roles.idField,warningField:i.roles.warningField,connectionField:i.roles.connectionField}),i}function y0(t){const e=["name","title","agent","label"];for(const r of e)if(r in t)return r;for(const[r,i]of Object.entries(t))if(typeof i=="string")return console.warn(`  Using "${r}" as title field (first string field found)`),r;const n=Object.keys(t)[0];return console.warn(`  Using "${n}" as title field (first field in record)`),n}function x0(t){return t.includes("id")?"id":t[0]}function w0(t){return t.includes("status")?"status":null}function b0(t){for(const[e,n]of Object.entries(t))if(Array.isArray(n)&&n.length>0&&typeof n[0]=="number")return e;return console.warn("  No connection field found (expected array of numbers)"),null}function $0(t,e){const n=e[t];return t!=="_internal"&&n!==void 0}function Ke(t){return t.split("_").map(e=>e.charAt(0).toUpperCase()+e.slice(1)).join(" ")}function ue(t,e){return t[e]}function Qe(t,e){return e.roles.warningField?t[e.roles.warningField]===e.roles.warningValue:!1}function Vi(t,e){const n=e.roles.connectionField;return!n||!t[n]?null:{ids:t[n],secondaryField:e.roles.connectionSecondaryField}}function Ra(t){return t.fieldOrder.filter(e=>!t.excludeFromDisplay.includes(e))}function Oa(t,e){return Array.isArray(t[e])}function za(t,e){const n=t[e];return n!==null&&typeof n=="object"&&!Array.isArray(n)}var A0=Y("<span> </span>");function Ir(t,e){se(e,!1);const n=()=>nt(Zn,"$facetTypes",r),[r,i]=Be(),s=ut(),a=ut();let o=kt(e,"fieldName",8),l=kt(e,"fieldValue",8);function u(){v(s)&&Le.update(d=>{const g={facetName:o(),facetValue:l(),facetType:v(s)};return d.some(p=>p.facetName===o()&&p.facetValue===l())?d:[...d,g]})}mt(()=>(n(),F(o())),()=>{H(s,n()[o()])}),mt(()=>v(s),()=>{H(a,v(s)!==void 0)}),He(),de();var c=A0();let h;var f=P(c);lt(()=>{h=De(c,1,"field-value svelte-mahwrk",null,h,{clickable:v(a)}),me(c,"role",v(a)?"button":void 0),me(c,"tabindex",v(a)?0:void 0),$t(f,l())}),pt("click",c,u),pt("keypress",c,d=>(d.key==="Enter"||d.key===" ")&&u()),V(t,c),ae(),i()}var M0=Y('<button class="clear-btn svelte-n8ztcz" aria-label="Clear search">Ã</button>'),E0=Y('<div class="search-box svelte-n8ztcz"><span class="search-icon svelte-n8ztcz">ð</span> <input type="text" placeholder="Search by agent, user, or ID..." aria-label="Search agents" class="svelte-n8ztcz"/> <!></div>');function k0(t,e){se(e,!1);let n=ut(""),r;function i(){clearTimeout(r),r=setTimeout(()=>{ls.set(v(n))},300)}function s(){H(n,""),ls.set("")}de();var a=E0(),o=J(P(a),2),l=J(o,2);{var u=c=>{var h=M0();pt("click",h,s),V(c,h)};_t(l,c=>{v(n)&&c(u)})}Du(o,()=>v(n),c=>H(n,c)),pt("input",o,i),V(t,a),ae()}var S0=Y('<div class="no-results svelte-ti8i33"><p class="svelte-ti8i33"> </p></div>'),T0=Y('<span class="detail-item-warning svelte-ti8i33">â  WARNING</span>'),N0=Y('<span class="connection-platform svelte-ti8i33"> </span>'),C0=Y('<span class="connection-warning svelte-ti8i33">â </span>'),F0=Y('<button title="Click to highlight and scroll to this record"><div class="connection-agent svelte-ti8i33"> </div> <div class="connection-details svelte-ti8i33"><!> <!></div></button>'),I0=Y('<span class="connection-item-missing svelte-ti8i33" title="Record not found"> </span>'),R0=Y('<div class="detail-item-field svelte-ti8i33"><strong class="svelte-ti8i33"> </strong> <div class="connections-list svelte-ti8i33"></div></div>'),O0=Y('<span class="permission-badge svelte-ti8i33"><!></span>'),z0=Y('<div class="detail-item-field svelte-ti8i33"><strong class="svelte-ti8i33"> </strong> <div class="detail-item-permissions svelte-ti8i33"></div></div>'),P0=Y('<span class="permission-badge small svelte-ti8i33"><!></span>'),D0=Y('<div class="object-field-value svelte-ti8i33"></div>'),L0=Y('<span class="object-field-value svelte-ti8i33"> </span>'),q0=Y('<div class="object-field-item svelte-ti8i33"><span class="object-field-key svelte-ti8i33"><!>:</span> <!></div>'),V0=Y('<div class="detail-item-field svelte-ti8i33"><strong class="svelte-ti8i33"> </strong> <div class="object-field svelte-ti8i33"></div></div>'),j0=Y('<div class="detail-item-field svelte-ti8i33"><strong class="svelte-ti8i33"> </strong> <!></div>'),H0=Y('<span class="connection-platform svelte-ti8i33"> </span>'),B0=Y('<span class="connection-warning svelte-ti8i33">â </span>'),U0=Y('<button title="Click to highlight and scroll to this record"><div class="connection-agent svelte-ti8i33"> </div> <div class="connection-details svelte-ti8i33"><!> <!></div></button>'),W0=Y('<span class="connection-item-missing svelte-ti8i33" title="Record not found"> </span>'),Y0=Y('<div class="detail-item-field svelte-ti8i33"><strong class="svelte-ti8i33"> </strong> <div class="connections-list svelte-ti8i33"></div></div>'),X0=Y('<div><div class="detail-item-header svelte-ti8i33"><span class="svelte-ti8i33"> </span> <!></div> <!> <!></div>'),G0=Y('<div class="svelte-ti8i33"></div>'),K0=Y('<div class="detail-panel svelte-ti8i33"><h2 class="svelte-ti8i33"> </h2> <!> <!> <div class="detail-list svelte-ti8i33"><!></div></div>');function Q0(t,e){se(e,!1);const n=()=>nt(ls,"$searchQuery",l),r=()=>nt(v(f),"$virtualizer",l),i=()=>nt(Zn,"$facetTypes",l),s=()=>nt(Ep,"$recordLookup",l),a=()=>nt(ar,"$highlightedRecordId",l),o=()=>nt(kp,"$backlinksMap",l),[l,u]=Be(),c=ut(),h=ut(),f=ut(),d=ut(),g=ut(),m=ut();let p=kt(e,"data",8),_=kt(e,"schema",8),y=ut(),x=new Map,w=ut("");function M(j,U){const{recordId:at,virtualItem:yt}=U;return x.set(at,j),v(f)&&requestAnimationFrame(()=>{j.isConnected&&r().measureElement(j)}),{destroy(){x.delete(at)}}}function T(j){const U={},at=i();Object.keys(at).forEach(xt=>{U[xt]={direct:[],transitive:[]}});const yt=new Set([j.id]),rt=[j.id],Ct=[];for(;rt.length>0;){const xt=rt.shift(),st=s().get(xt);if(st){const wt=Vi(st,_());wt&&wt.ids&&wt.ids.forEach(Ft=>{if(!yt.has(Ft)){yt.add(Ft),rt.push(Ft);const Ut=s().get(Ft);Ut&&Ct.push(Ut)}})}}Object.keys(at).forEach(xt=>{const st=at[xt];if(st==="string"){const wt=j[xt];wt&&U[xt].direct.push(wt)}else if(st==="array"||st==="hierarchical"){const wt=j[xt]||[];U[xt].direct.push(...wt)}}),Ct.forEach(xt=>{Object.keys(at).forEach(st=>{const wt=at[st];if(wt==="string"){const Ft=xt[st];Ft&&!U[st].transitive.includes(Ft)&&!U[st].direct.includes(Ft)&&U[st].transitive.push(Ft)}else(wt==="array"||wt==="hierarchical")&&(xt[st]||[]).forEach(Ut=>{!U[st].transitive.includes(Ut)&&!U[st].direct.includes(Ut)&&U[st].transitive.push(Ut)})})}),us.set(U)}function L(){us.set({})}async function I(j){ar.set(j);const U=p().findIndex(at=>at.id===j);U>=0?(v(f)&&r().scrollToIndex(U,{align:"center",behavior:"auto"}),await Yi(),requestAnimationFrame(()=>{requestAnimationFrame(()=>{setTimeout(()=>{ar.set(null)},2e3)})})):(alert("Connected record is not in the current filtered view. Try adjusting your filters."),ar.set(null))}mt(()=>(n(),F(p())),()=>{H(c,n()?p().filter(j=>{const U=n().toLowerCase();return j.agent.toLowerCase().includes(U)||j.user.toLowerCase().includes(U)||String(j.id).includes(U)}):p())}),mt(()=>(v(c),v(y)),()=>{H(h,{count:v(c).length,getScrollElement:()=>v(y),estimateSize:()=>280,overscan:5,measureElement:j=>j?.getBoundingClientRect().height})}),mt(()=>(v(y),v(h)),()=>{Vu(H(f,v(y)?g0(v(h)):null),"$virtualizer",l)}),mt(()=>(v(f),F(p()),r()),()=>{v(f)&&p()&&Yi().then(()=>{requestAnimationFrame(()=>{x.forEach(j=>{j?.isConnected&&r().measureElement(j)})})})}),mt(()=>(F(_()),Ra),()=>{H(d,_()?Ra(_()):[])}),mt(()=>F(_()),()=>{H(g,_()?_().roles.titleField:"agent")}),mt(()=>v(c),()=>{H(m,v(c).length>0?v(c)[0].id:null)}),mt(()=>(n(),v(w),v(m),v(c),v(f),r()),()=>{n()!==v(w)&&v(m)!==null&&(H(w,n()),setTimeout(()=>{const j=v(c).findIndex(U=>U.id===v(m));j>=0&&v(f)&&r().scrollToIndex(j,{align:"start",behavior:"auto"})},100))}),He(),de();var $=K0(),N=P($),A=P(N),k=J(N,2);k0(k,{});var b=J(k,2);{var R=j=>{var U=S0(),at=P(U),yt=P(at);lt(()=>$t(yt,`No agents found matching "${n()??""}"`)),V(j,U)};_t(b,j=>{n(),v(c),D(()=>n()&&v(c).length===0)&&j(R)})}var ft=J(b,2),At=P(ft);{var Nt=j=>{var U=G0();ve(U,5,()=>(r(),D(()=>r().getVirtualItems())),at=>at.key,(at,yt)=>{const rt=$e(()=>(v(c),v(yt),D(()=>v(c)[v(yt).index])));var Ct=X0();let xt;var st=P(Ct),wt=P(st),Ft=P(wt),Ut=J(wt,2);{var rn=ot=>{var K=T0();V(ot,K)};_t(Ut,ot=>{F(Qe),F(v(rt)),F(_()),D(()=>Qe(v(rt),_()))&&ot(rn)})}var q=J(st,2);ve(q,1,()=>v(d),Ae,(ot,K)=>{const St=$e(()=>(F(ue),F(v(rt)),v(K),D(()=>ue(v(rt),v(K)))));var S=un(),O=Re(S);{var B=Mt=>{const C=$e(()=>(F(Vi),F(v(rt)),F(_()),D(()=>Vi(v(rt),_()))));var W=un(),E=Re(W);{var tt=Q=>{var gt=R0(),Tt=P(gt),Jt=P(Tt),G=J(Tt,2);ve(G,5,()=>(F(v(C)),D(()=>v(C).ids)),Ae,(z,Z)=>{const et=$e(()=>(s(),v(Z),D(()=>s().get(v(Z)))));var Wt=un(),sn=Re(Wt);{var an=qt=>{var oe=F0();let Ue;var on=P(oe),xr=P(on),wr=J(on,2),br=P(wr);{var Ei=zt=>{var le=N0(),Jn=P(le);lt(Ti=>$t(Jn,Ti),[()=>(F(ue),F(v(et)),F(v(C)),D(()=>ue(v(et),v(C).secondaryField)))]),V(zt,le)};_t(br,zt=>{F(v(C)),D(()=>v(C).secondaryField)&&zt(Ei)})}var ki=J(br,2);{var Si=zt=>{var le=C0();V(zt,le)};_t(ki,zt=>{F(Qe),F(v(et)),F(_()),D(()=>Qe(v(et),_()))&&zt(Si)})}lt((zt,le)=>{Ue=De(oe,1,"connection-item svelte-ti8i33",null,Ue,zt),$t(xr,le)},[()=>({warning:Qe(v(et),_())}),()=>(F(ue),F(v(et)),v(g),D(()=>ue(v(et),v(g))))]),pt("click",oe,()=>I(v(Z))),V(qt,oe)},Lt=qt=>{var oe=I0(),Ue=P(oe);lt(()=>$t(Ue,`ID ${v(Z)??""} (not found)`)),V(qt,oe)};_t(sn,qt=>{v(et)?qt(an):qt(Lt,!1)})}V(z,Wt)}),lt(z=>$t(Jt,`${z??""} (${F(v(C)),D(()=>v(C).ids.length)??""}):`),[()=>(F(Ke),v(K),D(()=>Ke(v(K))))]),V(Q,gt)};_t(E,Q=>{F(v(C)),D(()=>v(C)&&v(C).ids.length>0)&&Q(tt)})}V(Mt,W)},dt=Mt=>{var C=un(),W=Re(C);{var E=Q=>{var gt=z0(),Tt=P(gt),Jt=P(Tt),G=J(Tt,2);ve(G,5,()=>v(St),Ae,(z,Z)=>{var et=O0(),Wt=P(et);Ir(Wt,{get fieldName(){return v(K)},get fieldValue(){return v(Z)}}),V(z,et)}),lt(z=>$t(Jt,`${z??""}:`),[()=>(F(Ke),v(K),D(()=>Ke(v(K))))]),V(Q,gt)},tt=Q=>{var gt=un(),Tt=Re(gt);{var Jt=z=>{const Z=$e(()=>(v(K),D(()=>v(K).endsWith("_categories")?v(K).replace("_categories","s"):v(K))));var et=V0(),Wt=P(et),sn=P(Wt),an=J(Wt,2);ve(an,5,()=>(F(v(St)),D(()=>Object.entries(v(St)))),Ae,(Lt,qt)=>{var oe=ru(()=>bl(v(qt),2));let Ue=()=>v(oe)[0],on=()=>v(oe)[1];var xr=q0(),wr=P(xr),br=P(wr);Ir(br,{get fieldName(){return v(Z)},get fieldValue(){return Ue()}});var Ei=J(wr,2);{var ki=zt=>{var le=D0();ve(le,5,on,Ae,(Jn,Ti)=>{var Rs=P0(),pl=P(Rs);Ir(pl,{get fieldName(){return v(Z)},get fieldValue(){return v(Ti)}}),V(Jn,Rs)}),V(zt,le)},Si=zt=>{var le=L0(),Jn=P(le);lt(()=>$t(Jn,on())),V(zt,le)};_t(Ei,zt=>{on(),D(()=>Array.isArray(on()))?zt(ki):zt(Si,!1)})}V(Lt,xr)}),lt(Lt=>$t(sn,`${Lt??""}:`),[()=>(F(Ke),v(K),D(()=>Ke(v(K))))]),V(z,et)},G=z=>{var Z=j0(),et=P(Z),Wt=P(et),sn=J(et,2);Ir(sn,{get fieldName(){return v(K)},get fieldValue(){return v(St)}}),lt(an=>$t(Wt,`${an??""}:`),[()=>(F(Ke),v(K),D(()=>Ke(v(K))))]),V(z,Z)};_t(Tt,z=>{F(za),F(v(rt)),v(K),D(()=>za(v(rt),v(K)))?z(Jt):z(G,!1)},!0)}V(Q,gt)};_t(W,Q=>{F(Oa),F(v(rt)),v(K),D(()=>Oa(v(rt),v(K)))?Q(E):Q(tt,!1)},!0)}V(Mt,C)};_t(O,Mt=>{v(K),F(_()),D(()=>v(K)===_().roles.connectionField)?Mt(B):Mt(dt,!1)})}V(ot,S)});var X=J(q,2);{var bt=ot=>{const K=$e(()=>(o(),F(v(rt)),D(()=>o().get(v(rt).id)||[])));var St=Y0(),S=P(St),O=P(S),B=J(S,2);ve(B,5,()=>v(K),Ae,(dt,Mt)=>{const C=$e(()=>(s(),v(Mt),D(()=>s().get(v(Mt)))));var W=un(),E=Re(W);{var tt=gt=>{var Tt=U0();let Jt;var G=P(Tt),z=P(G),Z=J(G,2),et=P(Z);{var Wt=Lt=>{var qt=H0(),oe=P(qt);lt(Ue=>$t(oe,Ue),[()=>(F(ue),F(v(C)),F(_()),D(()=>ue(v(C),_().roles.connectionSecondaryField)))]),V(Lt,qt)};_t(et,Lt=>{F(_()),D(()=>_().roles.connectionSecondaryField)&&Lt(Wt)})}var sn=J(et,2);{var an=Lt=>{var qt=B0();V(Lt,qt)};_t(sn,Lt=>{F(Qe),F(v(C)),F(_()),D(()=>Qe(v(C),_()))&&Lt(an)})}lt((Lt,qt)=>{Jt=De(Tt,1,"connection-item svelte-ti8i33",null,Jt,Lt),$t(z,qt)},[()=>({warning:Qe(v(C),_())}),()=>(F(ue),F(v(C)),v(g),D(()=>ue(v(C),v(g))))]),pt("click",Tt,()=>I(v(Mt))),V(gt,Tt)},Q=gt=>{var Tt=W0(),Jt=P(Tt);lt(()=>$t(Jt,`ID ${v(Mt)??""} (not found)`)),V(gt,Tt)};_t(E,gt=>{v(C)?gt(tt):gt(Q,!1)})}V(dt,W)}),lt(()=>$t(O,`Connects to this (${F(v(K)),D(()=>v(K).length)??""}):`)),V(ot,St)};_t(X,ot=>{o(),F(v(rt)),D(()=>(o().get(v(rt).id)||[]).length>0)&&ot(bt)})}Cu(Ct,(ot,K)=>M?.(ot,K),()=>({recordId:v(rt).id,virtualItem:v(yt)})),Hr(()=>pt("mouseenter",Ct,()=>T(v(rt)))),Hr(()=>pt("mouseleave",Ct,L)),lt(ot=>{xt=De(Ct,1,"detail-item svelte-ti8i33",null,xt,{highlighted:a()===v(rt).id||n()&&v(rt).id===v(m)}),Yr(Ct,`position: absolute; top: 0; left: 0; width: 100%; transform: translateY(${v(yt),D(()=>v(yt).start)??""}px);`),me(Ct,"data-index",(v(yt),D(()=>v(yt).index))),me(Ct,"data-agent-id",(F(v(rt)),D(()=>v(rt).id))),$t(Ft,ot)},[()=>(F(ue),F(v(rt)),v(g),D(()=>ue(v(rt),v(g))))]),V(at,Ct)}),lt(at=>Yr(U,`height: ${at??""}px; width: 100%; position: relative;`),[()=>(r(),D(()=>r().getTotalSize()))]),V(j,U)};_t(At,j=>{v(f),v(c),D(()=>v(f)&&v(c).length>0)&&j(Nt)})}mi(ft,j=>H(y,j),()=>v(y)),lt(j=>$t(A,`Matching Records (${j??""})`),[()=>(F(Et),v(c),D(()=>Et(v(c).length)))]),V(t,$),ae(),u()}var Z0=Y('<div id="visualization" class="svelte-2jhczl"><!> <!></div> <!>',1),J0=Y("<p>Loading...</p>"),tg=Y('<div id="container" class="svelte-2jhczl"><h1 class="svelte-2jhczl">Hierarchical Faceted Browser</h1> <!> <div class="controls-row svelte-2jhczl"><!> <!> <!></div> <div id="main-content" class="svelte-2jhczl"><!></div></div>');function eg(t,e){se(e,!1);const n=()=>nt(Le,"$activeFilters",c),r=()=>nt(Ai,"$visibleFacets",c),i=()=>nt(yr,"$currentFacetName",c),s=()=>nt(ee,"$currentFacetIndex",c),a=()=>nt(Mi,"$currentFacetType",c),o=()=>nt(Sp,"$currentFacetStats",c),l=()=>nt(ui,"$sizeMetric",c),u=()=>nt($i,"$filteredData",c),[c,h]=Be();let f=ut(null),d=ut(0);pr(async()=>{try{const I=await _0(),$=await rl("../data.json");$.forEach(A=>{A.connections&&A.connections.length>0?A.connection_status="Connected":A.connection_status="Isolated"}),bi.set($),H(f,m0($,I)),console.log("Schema loaded:",v(f));const N=mp($);Zn.set(N)}catch(I){console.error("Error loading data:",I)}}),mt(()=>(n(),v(d),r(),i(),s(),ee),()=>{if(n().length>v(d)&&r().length>0){const I=n()[n().length-1];if(I.facetType==="string"&&I.facetName===i()){const $=(s()+1)%r().length;ee.set($)}}H(d,n().length)}),He(),de();var g=tg(),m=J(P(g),2);Rp(m,{});var p=J(m,2),_=P(p);Pp(_,{get schema(){return v(f)}});var y=J(_,2);Lp(y,{});var x=J(y,2);Hp(x,{});var w=J(p,2),M=P(w);{var T=I=>{var $=Z0(),N=Re($),A=P(N);Wp(A,{});var k=J(A,2);{var b=ft=>{i0(ft,{get facetName(){return i()},get facetStats(){return o()},get facetType(){return a()},get color(){return F(Di),s(),D(()=>Di[s()%Di.length])},get sizeMetric(){return l()}})};_t(k,ft=>{i()&&a()&&ft(b)})}var R=J(N,2);Q0(R,{get data(){return u()},get schema(){return v(f)}}),V(I,$)},L=I=>{var $=J0();V(I,$)};_t(M,I=>{v(f)?I(T):I(L,!1)})}V(t,g),ae(),h()}Au(eg,{target:document.getElementById("app")});
